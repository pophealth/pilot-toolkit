<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xsl:stylesheet xmlns:xhtml="http://www.w3.org/1999/xhtml"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:saxon="http://saxon.sf.net/"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                xmlns:schold="http://www.ascc.net/xml/schematron"
                xmlns:iso="http://purl.oclc.org/dsdl/schematron"
                xmlns:cda="urn:hl7-org:v3"
                xmlns:sdtc="urn:hl7-org:sdtc"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                version="2.0"><!--Implementers: please note that overriding process-prolog or process-root is 
    the preferred method for meta-stylesheets to use where possible. -->
<xsl:param name="archiveDirParameter"/>
   <xsl:param name="archiveNameParameter"/>
   <xsl:param name="fileNameParameter"/>
   <xsl:param name="fileDirParameter"/>
   <xsl:variable name="document-uri">
      <xsl:value-of select="document-uri(/)"/>
   </xsl:variable>

   <!--PHASES-->


<!--PROLOG-->
<xsl:output xmlns:svrl="http://purl.oclc.org/dsdl/svrl" method="xml"
               omit-xml-declaration="no"
               standalone="yes"
               indent="yes"/>

   <!--XSD TYPES FOR XSLT2-->


<!--KEYS AND FUNCTIONS-->


<!--DEFAULT RULES-->


<!--MODE: SCHEMATRON-SELECT-FULL-PATH-->
<!--This mode can be used to generate an ugly though full XPath for locators-->
<xsl:template match="*" mode="schematron-select-full-path">
      <xsl:apply-templates select="." mode="schematron-get-full-path"/>
   </xsl:template>

   <!--MODE: SCHEMATRON-FULL-PATH-->
<!--This mode can be used to generate an ugly though full XPath for locators-->
<xsl:template match="*" mode="schematron-get-full-path">
      <xsl:apply-templates select="parent::*" mode="schematron-get-full-path"/>
      <xsl:text>/</xsl:text>
      <xsl:choose>
         <xsl:when test="namespace-uri()=''">
            <xsl:value-of select="name()"/>
         </xsl:when>
         <xsl:otherwise>
            <xsl:text>*:</xsl:text>
            <xsl:value-of select="local-name()"/>
            <xsl:text>[namespace-uri()='</xsl:text>
            <xsl:value-of select="namespace-uri()"/>
            <xsl:text>']</xsl:text>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:variable name="preceding"
                    select="count(preceding-sibling::*[local-name()=local-name(current())                                   and namespace-uri() = namespace-uri(current())])"/>
      <xsl:text>[</xsl:text>
      <xsl:value-of select="1+ $preceding"/>
      <xsl:text>]</xsl:text>
   </xsl:template>
   <xsl:template match="@*" mode="schematron-get-full-path">
      <xsl:apply-templates select="parent::*" mode="schematron-get-full-path"/>
      <xsl:text>/</xsl:text>
      <xsl:choose>
         <xsl:when test="namespace-uri()=''">@<xsl:value-of select="name()"/>
         </xsl:when>
         <xsl:otherwise>
            <xsl:text>@*[local-name()='</xsl:text>
            <xsl:value-of select="local-name()"/>
            <xsl:text>' and namespace-uri()='</xsl:text>
            <xsl:value-of select="namespace-uri()"/>
            <xsl:text>']</xsl:text>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>

   <!--MODE: SCHEMATRON-FULL-PATH-2-->
<!--This mode can be used to generate prefixed XPath for humans-->
<xsl:template match="node() | @*" mode="schematron-get-full-path-2">
      <xsl:for-each select="ancestor-or-self::*">
         <xsl:text>/</xsl:text>
         <xsl:value-of select="name(.)"/>
         <xsl:if test="preceding-sibling::*[name(.)=name(current())]">
            <xsl:text>[</xsl:text>
            <xsl:value-of select="count(preceding-sibling::*[name(.)=name(current())])+1"/>
            <xsl:text>]</xsl:text>
         </xsl:if>
      </xsl:for-each>
      <xsl:if test="not(self::*)">
         <xsl:text/>/@<xsl:value-of select="name(.)"/>
      </xsl:if>
   </xsl:template>
   <!--MODE: SCHEMATRON-FULL-PATH-3-->
<!--This mode can be used to generate prefixed XPath for humans 
	(Top-level element has index)-->
<xsl:template match="node() | @*" mode="schematron-get-full-path-3">
      <xsl:for-each select="ancestor-or-self::*">
         <xsl:text>/</xsl:text>
         <xsl:value-of select="name(.)"/>
         <xsl:if test="parent::*">
            <xsl:text>[</xsl:text>
            <xsl:value-of select="count(preceding-sibling::*[name(.)=name(current())])+1"/>
            <xsl:text>]</xsl:text>
         </xsl:if>
      </xsl:for-each>
      <xsl:if test="not(self::*)">
         <xsl:text/>/@<xsl:value-of select="name(.)"/>
      </xsl:if>
   </xsl:template>

   <!--MODE: GENERATE-ID-FROM-PATH -->
<xsl:template match="/" mode="generate-id-from-path"/>
   <xsl:template match="text()" mode="generate-id-from-path">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:value-of select="concat('.text-', 1+count(preceding-sibling::text()), '-')"/>
   </xsl:template>
   <xsl:template match="comment()" mode="generate-id-from-path">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:value-of select="concat('.comment-', 1+count(preceding-sibling::comment()), '-')"/>
   </xsl:template>
   <xsl:template match="processing-instruction()" mode="generate-id-from-path">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:value-of select="concat('.processing-instruction-', 1+count(preceding-sibling::processing-instruction()), '-')"/>
   </xsl:template>
   <xsl:template match="@*" mode="generate-id-from-path">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:value-of select="concat('.@', name())"/>
   </xsl:template>
   <xsl:template match="*" mode="generate-id-from-path" priority="-0.5">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:text>.</xsl:text>
      <xsl:value-of select="concat('.',name(),'-',1+count(preceding-sibling::*[name()=name(current())]),'-')"/>
   </xsl:template>

   <!--MODE: GENERATE-ID-2 -->
<xsl:template match="/" mode="generate-id-2">U</xsl:template>
   <xsl:template match="*" mode="generate-id-2" priority="2">
      <xsl:text>U</xsl:text>
      <xsl:number level="multiple" count="*"/>
   </xsl:template>
   <xsl:template match="node()" mode="generate-id-2">
      <xsl:text>U.</xsl:text>
      <xsl:number level="multiple" count="*"/>
      <xsl:text>n</xsl:text>
      <xsl:number count="node()"/>
   </xsl:template>
   <xsl:template match="@*" mode="generate-id-2">
      <xsl:text>U.</xsl:text>
      <xsl:number level="multiple" count="*"/>
      <xsl:text>_</xsl:text>
      <xsl:value-of select="string-length(local-name(.))"/>
      <xsl:text>_</xsl:text>
      <xsl:value-of select="translate(name(),':','.')"/>
   </xsl:template>
   <!--Strip characters--><xsl:template match="text()" priority="-1"/>

   <!--SCHEMA SETUP-->
<xsl:template match="/">
      <svrl:schematron-output xmlns:svrl="http://purl.oclc.org/dsdl/svrl" title="HITSP_C32 V2.5"
                              schemaVersion="">
         <xsl:attribute name="phase">errors</xsl:attribute>
         <xsl:comment>
            <xsl:value-of select="$archiveDirParameter"/>   
		 <xsl:value-of select="$archiveNameParameter"/>  
		 <xsl:value-of select="$fileNameParameter"/>  
		 <xsl:value-of select="$fileDirParameter"/>
         </xsl:comment>
         <svrl:ns-prefix-in-attribute-values uri="urn:hl7-org:v3" prefix="cda"/>
         <svrl:ns-prefix-in-attribute-values uri="urn:hl7-org:sdtc" prefix="sdtc"/>
         <svrl:ns-prefix-in-attribute-values uri="http://www.w3.org/2001/XMLSchema-instance" prefix="xsi"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.10.20.2.10-errors</xsl:attribute>
            <xsl:attribute name="name">Physical Examination - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M7"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.10.20.2.7-errors</xsl:attribute>
            <xsl:attribute name="name">Assessment and Plan - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M8"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.10.20.2.8-errors</xsl:attribute>
            <xsl:attribute name="name">Reason for Visit / Chief Complaint - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M9"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.10.20.2.9-errors</xsl:attribute>
            <xsl:attribute name="name">Past Medical History - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M10"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.10.20.3-errors</xsl:attribute>
            <xsl:attribute name="name">CDA for CDT - General Header Constraints - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M12"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.10.20.4.10-errors</xsl:attribute>
            <xsl:attribute name="name">Review of Systems - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M15"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.10.20.4.8-errors</xsl:attribute>
            <xsl:attribute name="name">Reason for Referral/Visit - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M16"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.32.1-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.32.1-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M17"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.11-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.11-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M20"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.12-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.12-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M23"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.13-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.13-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M26"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.14-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.14-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M29"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.15.1-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.15.1-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M32"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.16-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.16-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M35"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.17-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.17-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M38"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.2-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.2-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M41"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.3-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.3-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M44"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.4-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.4-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M47"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.5-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.5-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M50"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.6-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.6-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M53"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.7-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.7-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M56"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.8.1-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.8.1-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M59"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.8.2-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.8.2-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M62"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.8.3-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.8.3-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M65"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-2.16.840.1.113883.3.88.11.83.8-errors</xsl:attribute>
            <xsl:attribute name="name">p-2.16.840.1.113883.3.88.11.83.8-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M68"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-C83_2.2.1-errors</xsl:attribute>
            <xsl:attribute name="name">C83 Section 2.2.1</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M71"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-C83_2.2.2.10-errors</xsl:attribute>
            <xsl:attribute name="name">p-C83_2.2.2.10-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M74"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-C83_2.2.2.1-errors</xsl:attribute>
            <xsl:attribute name="name">p-C83_2.2.2.1-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M77"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-C83_2.2-errors</xsl:attribute>
            <xsl:attribute name="name">p-C83_2.2-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M80"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Transport Mode - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M83"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Transport - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M85"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Encounter Disposition - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M87"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M89"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M92"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.1-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.1-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M95"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Antepartum Visit Summary Battery - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M98"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M100"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M103"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M106"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M109"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M112"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M115"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M118"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M121"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M124"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M127"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M130"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M133"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC ED Disposition Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M136"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Reason For Visit - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M138"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Procedures Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M140"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Chief Complaint Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M142"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2-errors</xsl:attribute>
            <xsl:attribute name="name">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2-errors</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M144"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.3-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Referral Source - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M146"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.4-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Assessments Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M148"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Assessment and Plan Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M151"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Intravenous Fluids Administered Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M153"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.7-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Progress Note Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M155"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.8-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC ED Consultations Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M157"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC ED Diagnosis - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M159"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Acuity - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M161"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Intravenous Fluids - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M163"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.13.3.4-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Nursing Assessments Battery - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M165"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC History of Infection - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M167"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Extremities - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M169"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Medical Documents Specification - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M171"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Medical Summary Specification - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M173"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Hazardous Working Conditions - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M176"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Coded Vital Signs Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M178"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Encounter Histories Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M180"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Pregnancy History Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M182"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Medical Devices Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M184"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.6-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Foreign Travel Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M186"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Payers Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M188"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.15-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Physical Exam Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M190"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.16-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC General Appearance Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M193"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.17-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Integumentary System Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M195"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.18-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Head Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M197"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.19-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Eyes Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M199"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.20-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Ears, Nose, Mouth and Throat Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M201"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.21-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Ears Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M203"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.22-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Nose Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M205"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.23-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Mouth, Throat and Teeth Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M207"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.24-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Neck Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M209"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.25-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Endocrine System Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M211"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.26-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Thorax and Lungs Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M213"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.27-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Chest Wall Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M215"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.28-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Breast Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M217"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.29-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Heart Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M219"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.30-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Respiratory System Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M221"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.31-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Abdomen Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M223"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.32-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Lymphatic System Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M225"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.33-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Vessels Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M227"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.34-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Musculoskeletal System Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M229"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.35-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Neurologic System Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M231"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.36-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Genitalia Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M233"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.37-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Rectum Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M235"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.38-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Patient Education and Consents Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M237"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.39-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Patient Education and Consents - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M239"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.1.9.48-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Visible Implanted Medical Devices Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M242"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.2.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Language Communication - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M244"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.2.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Employer and School Contacts - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M246"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.2.3-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Healthcare Providers and Pharmacies - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M248"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.2.4.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Spouse - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M250"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.2.4.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Natural Father of Fetus - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M252"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.2.4-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Patient Contacts - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M254"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.11-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC List of Surgeries Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M256"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.12-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Coded List of Surgeries Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M258"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.13-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Allergies and Other Adverse Reactions Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M260"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.14-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Family Medical History - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M262"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.15-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Coded Family Medical History Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M264"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.16-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Social History Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M266"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.17-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Functional Status Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M268"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.18-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Review of Systems Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M270"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.19-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Medications Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M272"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Reason for Referral Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M274"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.20-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Admission Medication History - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M276"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.21-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Medications Administered Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M278"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.22-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Hospital Discharge Medications Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M280"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.23-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Immunizations Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M282"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.24-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Physical Exam Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M284"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.25-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Vital Signs Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M286"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.27-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Results Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M288"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.28-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Coded Results Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M290"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.29-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Hospital Studies Summary - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M293"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.31-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Care Plan Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M295"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.33-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Discharge Diet - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M297"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.34-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Advance Directives Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M299"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.35-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Coded Advance Directives Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M301"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.3-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Hospital Admission Diagnosis Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M303"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.4-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC History of Present Illness Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M305"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.5-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Hospital Course Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M307"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.6-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Active Problems Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M309"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.7-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Discharge Diagnosis - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M311"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.3.8-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Resolved Problems Section - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M313"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.1.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Problem Status Observation - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M315"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.1.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Health Status - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M317"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.12-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Immunizations - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M319"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.13.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Vital Signs Organizer - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M321"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.13.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Vital Signs Observation - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M323"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.13.3-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Family History Observation - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M325"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.13.5-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Pregnancy Observation - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M327"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.13.7-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Advance Directive Observation - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M329"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.13-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Simple Observation - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M331"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.14-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Encounters - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M334"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.15-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Family History Organizer - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M337"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.16-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC v3.0 Update Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M339"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.17-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Coverage Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M341"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.18-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Payer Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M343"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.19-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Procedure Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M345"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Severity - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M348"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Comments - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M350"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.3.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Medication Fulfillment Instructions - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M352"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.3-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Patient Medication Instructions - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M354"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.4.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Internal References - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M356"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.4-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC External References - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M358"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.5.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Concern Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M360"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.5.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Problem Concern Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M362"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.5.3-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Allergy and Intolerance Concern - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M364"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.5-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Problem Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M366"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.6-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Allergies and Intolerances - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M368"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.7.1-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Normal Dosing - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M370"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.7.2-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Product Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M372"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.7.3-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Supply Entry - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M374"/>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">p-1.3.6.1.4.1.19376.1.5.3.1.4.7-errors</xsl:attribute>
            <xsl:attribute name="name">IHE PCC Medications - errors validation phase</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M377"/>
      </svrl:schematron-output>
   </xsl:template>

   <!--SCHEMATRON PATTERNS-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">HITSP_C32 V2.5</svrl:text>

   <!--PATTERN p-2.16.840.1.113883.10.20.2.10-errorsPhysical Examination - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">Physical Examination - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.10&#34;]" priority="1000"
                 mode="M7">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.10&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code/@code='29545-1'"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code/@code='29545-1'">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: HL7 History and Physical Notes, the section code for the section describing physical 
       examination SHALL be 29545-1 (PHYSICAL FINDINGS).
       See HL7 History and Physical Note, Section 4.2.9, CONF-HP-85.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M7"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M7"/>
   <xsl:template match="@*|node()" priority="-2" mode="M7">
      <xsl:apply-templates select="@*|*" mode="M7"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.10.20.2.7-errorsAssessment and Plan - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">Assessment and Plan - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.7&#34;]" priority="1000"
                 mode="M8">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.7&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code/@code='18776-5'"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code/@code='18776-5'">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: HL7 History and Physical Note, in the Plan of Care Section as used by HITSP/C83 2.2.1.24
       Plan of Care Section SHALL have a section / code set to "18776-5".
       See HL7 History and Physical Note, Section 4.2.13 Assessment and Plan, rules CONF-HP-91 and
       rules CONF-HP-92.  See also HITSP/C83, Section 2.2.1.24.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M8"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M8"/>
   <xsl:template match="@*|node()" priority="-2" mode="M8">
      <xsl:apply-templates select="@*|*" mode="M8"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.10.20.2.8-errorsReason for Visit / Chief Complaint - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">Reason for Visit / Chief Complaint - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.8&#34;]" priority="1000"
                 mode="M9">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.8&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem='2.16.840.1.113883.6.1'][@code='29299-5' or @code='10154-3' or @code='46239-0']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem='2.16.840.1.113883.6.1'][@code='29299-5' or @code='10154-3' or @code='46239-0']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HL7 History and Physical Note, when the Chief Complaint and the Reason for Visit are 
      recorded separately, LOINC codes 29299-5 (REASON FOR VISIT) and 10154-3 (CHIEF COMPLAINT) 
      SHALL be used to record them.  When the Chief Complaint and Reason for Visit are recorded 
      together, LOINC code 46239-0 (REASON FOR VISIT+CHIEF COMPLAINT) SHALL be used.
      See HL7 History and Physical Note, Section 4.2.1, CONF-HP-74 and CONF-HP-75.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(//cda:code[@code='46239-0'] and //cda:code[@code='29299-5' or @code='10154-3'])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(//cda:code[@code='46239-0'] and //cda:code[@code='29299-5' or @code='10154-3'])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HL7 History and Physical Note, a History and Physical document that contains a section 
      with a code value of 46239-0 (REASON FOR VISIT+CHIEF COMPLAINT) SHALL NOT contain sections 
      with a code value of 29299-5 (REASON FOR VISIT) or 10154-3 (CHIEF COMPLAINT) and vice versa.
      See HL7 History and Physical Note, Section 4.2.1, CONF-HP-74 and CONF-HP-75.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M9"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M9"/>
   <xsl:template match="@*|node()" priority="-2" mode="M9">
      <xsl:apply-templates select="@*|*" mode="M9"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.10.20.2.9-errorsPast Medical History - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">Past Medical History - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.9&#34;]" priority="1000"
                 mode="M10">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.9&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: HL7 History and Physical Note, the Past Medical History section SHALL contain a narrative block.
       See HL7 History and Physical Note, Section 4.2.3, CONF-HP-77.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code='11348-0']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code='11348-0']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: HL7 History and Physical Note, the section code for the section describing Past Medical History 
       SHALL be 11348-0 (HISTORY OF PAST ILLNESS).
       See HL7 History and Physical Note, Section 4.2.3, CONF-HP-78.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M10"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M10"/>
   <xsl:template match="@*|node()" priority="-2" mode="M10">
      <xsl:apply-templates select="@*|*" mode="M10"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.10.20.3-errorsCDA for CDT - General Header Constraints - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">CDA for CDT - General Header Constraints - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="/" priority="1017" mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="/"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="//cda:templateId/@root=&#34;2.16.840.1.113883.10.20.3&#34; or //cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="//cda:templateId/@root=&#34;2.16.840.1.113883.10.20.3&#34; or //cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: A CDA R2 Document that claims conformance to the general header 
    constraints for Clinical Document Template (CDT) SHALL indicate so by including 
    the following template id in the header of the document, or by including a template 
    id in the header for a template that requires use of the general header constraint 
    template: &lt;templateId root=”2.16.840.1.113883.10.20.3”/&gt;.
    See HL7 History and Physical Note, CONF-HP-1.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root='2.16.840.1.113883.10.20.3']" priority="1016"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root='2.16.840.1.113883.10.20.3']"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:ClinicalDocument"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:ClinicalDocument">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The root of a History and Physical SHALL be a ClinicalDocument element
    from the urn:hl7-org:v3 namespace.
    See HL7 History and Physical Note, CONF-HP-2.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:realmCode[@code='US']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:realmCode[@code='US']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The ClinicalDocument/realmCode element SHALL be present.  It SHALL
    use the fixed value US.
    See HL7 History and Physical Note, CONF-HP-15.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:typeId[@extension='POCD_HD000040']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:typeId[@extension='POCD_HD000040']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The extension attribute of the typeId element SHALL be
    POCD_HD000040.
    See HL7 History and Physical Note, CONF-HP-16.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="matches(cda:id/@root,'([0-2])(.([1-9][0-9]*|0))+') or matches(cda:id/@root,'([A-Fa-f0-9]{8})(\-[A-Fa-f0-9]{4}){3}(\-[A-Fa-f0-9]{12})')"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="matches(cda:id/@root,'([0-2])(.([1-9][0-9]*|0))+') or matches(cda:id/@root,'([A-Fa-f0-9]{8})(\-[A-Fa-f0-9]{4}){3}(\-[A-Fa-f0-9]{12})')">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The ClinicalDocument/id/@root attribute SHALL be a syntactically
    correct UUID or OID. UUIDs SHALL be represented in the form
    XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX, where each X is a character from the set
    [A-Fa-f0-9].  OIDs SHALL be represented in dotted decimal notation, where each
    decimal number is either 0, or starts with a nonzero digit.  More formally,
    an OID SHALL be in the form ([0-2])(.([1-9][0-9]*|0))+.
    See HL7 History and Physical Note, CONF-HP-17, CONF-HP-18 and CONF-HP-19.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not (cda:id[string-length(@root)&gt;64])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not (cda:id[string-length(@root)&gt;64])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: OIDs SHALL be no more than 64 characters in length.
    See HL7 History and Physical Note, CONF-HP-20.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The ClinicalDocument/code element SHALL be present and specifies the
    type of clincal document.
    See HL7 History and Physical Note, CONF-HP-21.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:title"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:title">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The title element SHALL be present and specifies the local name used
    for the document.
    See HL7 History and Physical Note, CONF-HP-22.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The ClinicalDocument/effectiveTime element SHALL be present and
    specifies the creation time of the document.
    See HL7 History and Physical Note, CONF-HP-23.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:languageCode"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:languageCode">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: ClinicalDocument / languageCode element SHALL be present.
    See HL7 History and Physical Note, CONF-HP-24.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="matches(cda:languageCode/@code,'(([a-z]{2})(\-[A-Z]{2})?)')"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="matches(cda:languageCode/@code,'(([a-z]{2})(\-[A-Z]{2})?)')">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: ClincalDocument / languageCode SHALL be in the form nn, or nn-CC.
    See HL7 History and Physical Note, CONF-HP-25.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(cda:setId) and not(cda:versionNumber)) or (cda:setId and cda:versionNumber)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(cda:setId) and not(cda:versionNumber)) or (cda:setId and cda:versionNumber)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: Both ClinicalDocument/setId and ClinicalDocument/versionNumber SHALL
    be present or both SHALL be absent.
    See HL7 History and Physical Note, CONF-HP-28.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not((cda:setId/@extension = cda:id/@extension)                                       and (cda:setId/@root = cda:id/@root))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not((cda:setId/@extension = cda:id/@extension) and (cda:setId/@root = cda:id/@root))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The @extension and/or @root of ClinicalDocument/setId and
    ClinicalDocument/id SHALL be different when both are present.
    See HL7 History and Physical Note, CONF-HP-29.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:copyTime)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:copyTime)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: A ClinicalDocument/copyTime element SHALL NOT be present.
    See HL7 History and Physical Note, CONF-HP-30.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:recordTarget/cda:patientRole"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:recordTarget/cda:patientRole">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: At least one recordTarget/patientRole element SHALL be present.
    See HL7 History and Physical Note, CONF-HP-31.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="string-length(cda:recordTarget/cda:patientRole/cda:patient/cda:birthTime/@value) &gt;= 4 or cda:recordTarget/cda:patientRole/cda:patient/cda:birthTime/@nullFlavor"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="string-length(cda:recordTarget/cda:patientRole/cda:patient/cda:birthTime/@value) &gt;= 4 or cda:recordTarget/cda:patientRole/cda:patient/cda:birthTime/@nullFlavor">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: A patient/birthTime element SHALL be present. The patient/birthTime
    element SHALL be precise at least to the year.  If unknown, it SHALL be
    represented using a flavor of null.
    See HL7 History and Physical Note, CONF-HP-32.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:recordTarget/cda:patientRole/cda:patient/cda:administrativeGenderCode[(@code and @codeSystem) or @nullFlavor]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:recordTarget/cda:patientRole/cda:patient/cda:administrativeGenderCode[(@code and @codeSystem) or @nullFlavor]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: A patient/administrativeGenderCode element SHALL be present.
    If unknown, it SHALL be represented using a flavor of null.
    See HL7 History and Physical Note, CONF-HP-33.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:author/cda:time"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:author/cda:time">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The author/time element SHALL be present.
    See HL7 History and Physical Note, CONF-HP-37.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:author/cda:assignedAuthor/cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:author/cda:assignedAuthor/cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The assignedAuthor/id element SHALL be present.
    See HL7 History and Physical Note, CONF-HP-38.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:author/cda:assignedAuthor/cda:assignedPerson or cda:author/cda:assignedAuthor/cda:assignedAuthoringDevice"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:author/cda:assignedAuthor/cda:assignedPerson or cda:author/cda:assignedAuthor/cda:assignedAuthoringDevice">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: An assignedAuthor element SHALL contain at least one assignedPerson
    or assignedAuthoringDevice elements.
    See HL7 History and Physical Note, CONF-HP-39.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:languageCode" priority="1015" mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:languageCode"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="                 (                 string-length(current()/@code) = 2                 and                 substring( current()/@code , 1, 2 ) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.840.1.113883.6.121&#34;]/code/@value                 )                 or                 (                 string-length(current()/@code) = 3                 and                 substring( current()/@code , 1, 3 ) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.840.1.113883.6.121&#34;]/code/@value                 )                 or                 (                 string-length(current()/@code) = 5                 and                 substring( current()/@code , 1, 2 ) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.840.1.113883.6.121&#34;]/code/@value                 and                 substring( current()/@code , 3, 1 ) = &#34;-&#34;                 and                 substring( current()/@code, 4, 2) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.1&#34;]/code/@value                 )                 or                 (                 string-length(current()/@code) = 6                 and                 substring( current()/@code , 1, 3 ) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.840.1.113883.6.121&#34;]/code/@value                 and                 substring( current()/@code , 4, 1 ) = &#34;-&#34;                 and                 substring( current()/@code, 5, 2) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.1&#34;]/code/@value                 )                 "/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="( string-length(current()/@code) = 2 and substring( current()/@code , 1, 2 ) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.840.1.113883.6.121&#34;]/code/@value ) or ( string-length(current()/@code) = 3 and substring( current()/@code , 1, 3 ) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.840.1.113883.6.121&#34;]/code/@value ) or ( string-length(current()/@code) = 5 and substring( current()/@code , 1, 2 ) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.840.1.113883.6.121&#34;]/code/@value and substring( current()/@code , 3, 1 ) = &#34;-&#34; and substring( current()/@code, 4, 2) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.1&#34;]/code/@value ) or ( string-length(current()/@code) = 6 and substring( current()/@code , 1, 3 ) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.840.1.113883.6.121&#34;]/code/@value and substring( current()/@code , 4, 1 ) = &#34;-&#34; and substring( current()/@code, 5, 2) = document(&#34;languageCode.xml&#34;)/systems/system[@root=&#34;2.16.1&#34;]/code/@value )">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: ClinicalDocument / languageCode SHALL be in the
    form nn, or nn-CC.  The nn portion of ClinicalDocument / languageCode SHALL be a
    legal ISO-639-1 language code in lowercase.  The CC portion ClinicalDocument /
    languageCode, if present, SHALL be an ISO-3166 country code in uppercase.
    See HL7 History and Physical Note, CONF-HP-25, CONF-HP-26 and CONF-HP-27.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:patient or self::cda:guardianPerson or self::cda:assignedPerson or                       self::cda:maintainingPerson or self::cda:relatedPerson or self::cda:associatedPerson]"
                 priority="1014"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[self::cda:patient or self::cda:guardianPerson or self::cda:assignedPerson or                       self::cda:maintainingPerson or self::cda:relatedPerson or self::cda:associatedPerson]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: All patient guardianPerson, assignedPerson, maintainingPerson, relatedPerson,
    intendedRecipient/informationRecipient, associatedPerson, and relatedSubject/subject 
    elements SHALL have a name.
    See HL7 History and Physical Note, CONF-HP-6.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:intendedRecipient/cda:informationRecipient or self::cda:relatedSubject/cda:subject]"
                 priority="1013"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[self::cda:intendedRecipient/cda:informationRecipient or self::cda:relatedSubject/cda:subject]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:informationRecipient/cda:name or cda:subject/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:informationRecipient/cda:name or cda:subject/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: All patient guardianPerson, assignedPerson, maintainingPerson, relatedPerson,
    intendedRecipient/informationRecipient, associatedPerson, and relatedSubject/subject
    elements SHALL have a name.
    See HL7 History and Physical Note, CONF-HP-6.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:patientRole or self::cda:assignedAuthor or self::cda:assignedEntity[not(parent::cda:dataEnterer)] or self::cda:associatedEntity]"
                 priority="1012"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[self::cda:patientRole or self::cda:assignedAuthor or self::cda:assignedEntity[not(parent::cda:dataEnterer)] or self::cda:associatedEntity]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:addr and cda:telecom"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:addr and cda:telecom">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: All patientRole, assignedAuthor, assignedEntity[not(parent::dataEnterer)]
    and associatedEntity elements SHALL have an addr and telecom element.
    See HL7 History and Physical Note, CONF-HP-7.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:guardianOrganization or self::cda:providerOrganization or self::cda:wholeOrganization or self::cda:representedOrganization or self::cda:representedCustodianOrganization or self::cda:receivedOrganization or self::cda:scopingOrganization or self::cda:serviceProviderOrganization]"
                 priority="1011"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[self::cda:guardianOrganization or self::cda:providerOrganization or self::cda:wholeOrganization or self::cda:representedOrganization or self::cda:representedCustodianOrganization or self::cda:receivedOrganization or self::cda:scopingOrganization or self::cda:serviceProviderOrganization]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:name and cda:addr and cda:telecom"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:name and cda:addr and cda:telecom">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: All guardianOrganization, providerOrganization, wholeOrganization, 
    representedOrganization, representedCustodianOrganization, receivedOrganization,
    scopingOrganization and serviceProviderOrganization elements SHALL have name, 
    addr and telecom elements.
    See HL7 History and Physical Note, CONF-HP-9.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:effectiveTime | //cda:author/cda:time | //cda:dataEnterer/cda:time | //cda:encompassingEncounter/cda:effectiveTime"
                 priority="1010"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:effectiveTime | //cda:author/cda:time | //cda:dataEnterer/cda:time | //cda:encompassingEncounter/cda:effectiveTime"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(@nullFlavor or (not(@value)) or string-length(@value) &gt;= 8) or                    (cda:low/@nullFlavor or string-length(cda:low/@value) &gt;= 8) or                    (cda:high/@nullFlavor or string-length(cda:high/@value) &gt;= 8) or                    (cda:center/@nullFlavor or string-length(cda:center/@value) &gt;= 8) or                    (cda:width/@nullFlavor or string-length(cda:width/@value) &gt;= 8)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(@nullFlavor or (not(@value)) or string-length(@value) &gt;= 8) or (cda:low/@nullFlavor or string-length(cda:low/@value) &gt;= 8) or (cda:high/@nullFlavor or string-length(cda:high/@value) &gt;= 8) or (cda:center/@nullFlavor or string-length(cda:center/@value) &gt;= 8) or (cda:width/@nullFlavor or string-length(cda:width/@value) &gt;= 8)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: Times or time intervals found in the ClinicalDocument/effectiveTime,
    author/time, dataEnterer/time, legalAuthenticator/time, authenticator/time and
    encompassingEncounter/effectiveTime elements SHALL be precise to the day, and SHALL
    include a time zone if more precise than to the day.
    See HL7 History and Physical Note, CONF-HP-10.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:asOrganizationPartOf or self::cda:asMaintainedEntity or self::cda:relatedEntity or self::cda:serviceEvent or self::cda:serviceEvent/cda:performer or self::cda:encounterParticipant]"
                 priority="1009"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[self::cda:asOrganizationPartOf or self::cda:asMaintainedEntity or self::cda:relatedEntity or self::cda:serviceEvent or self::cda:serviceEvent/cda:performer or self::cda:encounterParticipant]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(cda:time/@value) or string-length(cda:time/@value) &gt;= 4) and                    (not(cda:time/cda:low/@value) or string-length(cda:time/cda:low/@value) &gt;= 4) and                   (not(cda:time/cda:high/@value) or string-length(cda:time/cda:high/@value) &gt;= 4) and                   (not(cda:time/cda:center/@value) or string-length(cda:time/cda:center/@value) &gt;= 4) and                   (not(cda:time/cda:width/@value) or string-length(cda:time/cda:width/@value) &gt;= 4) and                   (not(cda:effectiveTime/@value) or string-length(cda:effectiveTime/@value) &gt;= 4) and                   (not(cda:effectiveTime/cda:low/@value) or string-length(cda:effectiveTime/cda:low/@value) &gt;= 4) and                    (not(cda:effectiveTime/cda:high/@value) or string-length(cda:effectiveTime/cda:high/@value) &gt;= 4) and                   (not(cda:effectiveTime/cda:center/@value) or string-length(cda:effectiveTime/cda:center/@value) &gt;= 4) and                    (not(cda:effectiveTime/cda:width/@value) or string-length(cda:effectiveTime/cda:width/@value) &gt;= 4)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(cda:time/@value) or string-length(cda:time/@value) &gt;= 4) and (not(cda:time/cda:low/@value) or string-length(cda:time/cda:low/@value) &gt;= 4) and (not(cda:time/cda:high/@value) or string-length(cda:time/cda:high/@value) &gt;= 4) and (not(cda:time/cda:center/@value) or string-length(cda:time/cda:center/@value) &gt;= 4) and (not(cda:time/cda:width/@value) or string-length(cda:time/cda:width/@value) &gt;= 4) and (not(cda:effectiveTime/@value) or string-length(cda:effectiveTime/@value) &gt;= 4) and (not(cda:effectiveTime/cda:low/@value) or string-length(cda:effectiveTime/cda:low/@value) &gt;= 4) and (not(cda:effectiveTime/cda:high/@value) or string-length(cda:effectiveTime/cda:high/@value) &gt;= 4) and (not(cda:effectiveTime/cda:center/@value) or string-length(cda:effectiveTime/cda:center/@value) &gt;= 4) and (not(cda:effectiveTime/cda:width/@value) or string-length(cda:effectiveTime/cda:width/@value) &gt;= 4)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: Times or time intervals found in the asOrganizationPartOf/effectiveTime, 
    asMaintainedEntity/effectiveTime, relatedEntity/effectiveTime, serviceEvent/effectiveTime, 
    ClinicalDocument/participant/time, serviceEvent/performer/time and encounterParticipant/time 
    SHALL be precise at least to the year.
    See HL7 History and Physical Note, CONF-HP-11.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:participant/cda:time" priority="1008"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:participant/cda:time"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(./@value) or string-length(./@value) &gt;= 4) and                   (not(./cda:low/@value) or string-length(./cda:low/@value) &gt;= 4) and                   (not(./cda:high/@value) or string-length(./cda:high/@value) &gt;= 4) and                   (not(./cda:center/@value) or string-length(./cda:center/@value) &gt;= 4) and                   (not(./cda:width/@value) or string-length(./cda:width/@value) &gt;= 4) "/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(./@value) or string-length(./@value) &gt;= 4) and (not(./cda:low/@value) or string-length(./cda:low/@value) &gt;= 4) and (not(./cda:high/@value) or string-length(./cda:high/@value) &gt;= 4) and (not(./cda:center/@value) or string-length(./cda:center/@value) &gt;= 4) and (not(./cda:width/@value) or string-length(./cda:width/@value) &gt;= 4)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: Times or time intervals found in the asOrganizationPartOf/effectiveTime,
    asMaintainedEntity/effectiveTime, relatedEntity/effectiveTime, serviceEvent/effectiveTime,
    ClinicalDocument/participant/time, serviceEvent/performer/time and encounterParticipant/time
    SHALL be precise at least to the year.
    See HL7 History and Physical Note, CONF-HP-11.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="//*[self::cda:addr/@nullFlavor or self::cda:name/@nullFlavor or self::cda:telecom/@nullFlavor]"
                 priority="1007"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="//*[self::cda:addr/@nullFlavor or self::cda:name/@nullFlavor or self::cda:telecom/@nullFlavor]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="document('voc.xml')/systems/system[@group='Null Flavors']/code[@value = current()/@nullFlavor]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="document('voc.xml')/systems/system[@group='Null Flavors']/code[@value = current()/@nullFlavor]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: When name, addr, telecom information is unknown and where these elements 
    are required to be present, the fact that the information is unknown SHALL be represented 
    using an appropriate value for the nullFlavor attribute on the element.  Legal values 
    according to this specification come from the HL7 NullFlavor vocabulary. 
    See HL7 History and Physical Note, CONF-HP-9.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="//*[self::cda:telecom]" priority="1006" mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="//*[self::cda:telecom]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(starts-with(@value,'tel:')) or matches(@value,'tel:\+?[-0-9().]+')"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(starts-with(@value,'tel:')) or matches(@value,'tel:\+?[-0-9().]+')">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: Telephone numbers SHALL match the regular expression pattern tel:\+?[-0-9().]+ 
    See HL7 History and Physical Note, CONF-HP-12.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(starts-with(@value,'tel:')) or matches(@value,'.\d+.' )"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(starts-with(@value,'tel:')) or matches(@value,'.\d+.' )">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: At least one dialing digit SHALL be present in the phone number after visual 
    separators are removed.
    See HL7 History and Physical Note, CONF-HP-13.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:telecom]" priority="1005" mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="*[self::cda:telecom]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@value or @nullFlavor"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="@value or @nullFlavor">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: If the telephone number is unknown it SHALL be represented using the appopriate
    flavor of null.
    See HL7 History and Physical Note, CONF-HP-14.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:assignedEntity[parent::cda:dataEnterer]]" priority="1004"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[self::cda:assignedEntity[parent::cda:dataEnterer]]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedPerson"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:assignedPerson">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: When dataEnterer is present, an assignedEntity/assignedPerson element SHALL
    be present.
    See HL7 History and Physical Note, CONF-HP-40.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="cda:informant" priority="1003" mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="cda:informant"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:relatedEntity) or cda:relatedEntity[@classCode='CON' or @classCode='PRS' or @classCode='CAREGIVER' or @classCode='AGNT' or @classCode='PROV']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:relatedEntity) or cda:relatedEntity[@classCode='CON' or @classCode='PRS' or @classCode='CAREGIVER' or @classCode='AGNT' or @classCode='PROV']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: Allowable values for informant/relatedEntity/@classCode SHALL be CON, PRS,
    CAREGIVER, AGNT or PROV from the RoleClass vocabulary.
    See HL7 History and Physical Note, CONF-HP-45.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedEntity/cda:assignedPerson or cda:relatedEntity/cda:relatedPerson"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:assignedEntity/cda:assignedPerson or cda:relatedEntity/cda:relatedPerson">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: When informant is present, an assignedEntity/assignedPerson or 
    relatedEntity/relatedPerson element SHALL be present.
    See HL7 History and Physical Note, CONF-HP-43.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:relatedEntity/@classCode='PRS') or document('voc.xml')/systems/system[@codeSystemName='LOINC'][@group='Personal Relationship Role Type']/code[@value = current()/cda:relatedEntity/cda:code/@code] or current()/cda:relatedEntity/cda:code/@codeSystem='2.16.840.1.113883.6.96'"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:relatedEntity/@classCode='PRS') or document('voc.xml')/systems/system[@codeSystemName='LOINC'][@group='Personal Relationship Role Type']/code[@value = current()/cda:relatedEntity/cda:code/@code] or current()/cda:relatedEntity/cda:code/@codeSystem='2.16.840.1.113883.6.96'">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: When relatedEntity/@classCode is PRS, values in relatedEntity/code SHALL come
    from the HL7 PersonalRelationshipRoleType vocabulary or from SNOMED, any subtype of“
    Person in the family” (303071001).
    See HL7 History and Physical Note, CONF-HP-46.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="cda:informationRecipient/cda:intendedRecipient" priority="1002"
                 mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="cda:informationRecipient/cda:intendedRecipient"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:informationRecipient or cda:receivedOrganization"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:informationRecipient or cda:receivedOrganization">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: When informationRecipient is used, at least one 
    informationRecipient/intendedRecipient/informationRecipient or 
    informationRecipient/intendedRecipient/receivedOrganization SHALL be present.
    See HL7 History and Physical Note, CONF-HP-50.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:legalAuthenticator]" priority="1001" mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[self::cda:legalAuthenticator]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:time/@nullFlavor or string-length(cda:time/@value) &gt;= 8) or                    (cda:effectiveTime/@nullFlavor or string-length(cda:effectiveTime/@value) &gt;= 8) or                   (cda:time/cda:low/@nullFlavor or string-length(cda:time/cda:low/@value) &gt;= 8) or                    (cda:effectiveTime/cda:low/@nullFlavor or string-length(cda:effectiveTime/cda:low/@value) &gt;= 8) or                   (cda:time/cda:high/@nullFlavor or string-length(cda:time/cda:high/@value) &gt;= 8) or                    (cda:effectiveTime/cda:high/@nullFlavor or string-length(cda:effectiveTime/cda:high/@value) &gt;= 8) or                   (cda:time/cda:center/@nullFlavor or string-length(cda:time/cda:center/@value) &gt;= 8) or                    (cda:effectiveTime/cda:center/@nullFlavor or string-length(cda:effectiveTime/cda:center/@value) &gt;= 8) or                   (cda:time/cda:width/@nullFlavor or string-length(cda:time/cda:width/@value) &gt;= 8) or                    (cda:effectiveTime/cda:width/@nullFlavor or string-length(cda:effectiveTime/cda:width/@value) &gt;= 8)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:time/@nullFlavor or string-length(cda:time/@value) &gt;= 8) or (cda:effectiveTime/@nullFlavor or string-length(cda:effectiveTime/@value) &gt;= 8) or (cda:time/cda:low/@nullFlavor or string-length(cda:time/cda:low/@value) &gt;= 8) or (cda:effectiveTime/cda:low/@nullFlavor or string-length(cda:effectiveTime/cda:low/@value) &gt;= 8) or (cda:time/cda:high/@nullFlavor or string-length(cda:time/cda:high/@value) &gt;= 8) or (cda:effectiveTime/cda:high/@nullFlavor or string-length(cda:effectiveTime/cda:high/@value) &gt;= 8) or (cda:time/cda:center/@nullFlavor or string-length(cda:time/cda:center/@value) &gt;= 8) or (cda:effectiveTime/cda:center/@nullFlavor or string-length(cda:effectiveTime/cda:center/@value) &gt;= 8) or (cda:time/cda:width/@nullFlavor or string-length(cda:time/cda:width/@value) &gt;= 8) or (cda:effectiveTime/cda:width/@nullFlavor or string-length(cda:effectiveTime/cda:width/@value) &gt;= 8)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: Times or time intervals found in the ClinicalDocument/effectiveTime,
    author/time, dataEnterer/time, legalAuthenticator/time, authenticator/time and
    encompassingEncounter/effectiveTime elements SHALL be precise to the day, and SHALL
    include a time zone if more precise than to the day.
    See HL7 History and Physical Note, CONF-HP-10.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedEntity/cda:assignedPerson"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:assignedEntity/cda:assignedPerson">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The assignedEntity/assignedPerson element SHALL be present 
    in legalAuthenticator.
    See HL7 History and Physical Note, CONF-HP-51.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:authenticator]" priority="1000" mode="M12">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="*[self::cda:authenticator]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:time/@nullFlavor or string-length(cda:time/@value) &gt;= 8) or                    (cda:effectiveTime/@nullFlavor or string-length(cda:effectiveTime/@value) &gt;= 8) or                   (cda:time/cda:low/@nullFlavor or string-length(cda:time/cda:low/@value) &gt;= 8) or                    (cda:effectiveTime/cda:low/@nullFlavor or string-length(cda:effectiveTime/cda:low/@value) &gt;= 8) or                   (cda:time/cda:high/@nullFlavor or string-length(cda:time/cda:high/@value) &gt;= 8) or                    (cda:effectiveTime/cda:high/@nullFlavor or string-length(cda:effectiveTime/cda:high/@value) &gt;= 8) or                   (cda:time/cda:center/@nullFlavor or string-length(cda:time/cda:center/@value) &gt;= 8) or                    (cda:effectiveTime/cda:center/@nullFlavor or string-length(cda:effectiveTime/cda:center/@value) &gt;= 8) or                   (cda:time/cda:width/@nullFlavor or string-length(cda:time/cda:width/@value) &gt;= 8) or                    (cda:effectiveTime/cda:width/@nullFlavor or string-length(cda:effectiveTime/cda:width/@value) &gt;= 8)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:time/@nullFlavor or string-length(cda:time/@value) &gt;= 8) or (cda:effectiveTime/@nullFlavor or string-length(cda:effectiveTime/@value) &gt;= 8) or (cda:time/cda:low/@nullFlavor or string-length(cda:time/cda:low/@value) &gt;= 8) or (cda:effectiveTime/cda:low/@nullFlavor or string-length(cda:effectiveTime/cda:low/@value) &gt;= 8) or (cda:time/cda:high/@nullFlavor or string-length(cda:time/cda:high/@value) &gt;= 8) or (cda:effectiveTime/cda:high/@nullFlavor or string-length(cda:effectiveTime/cda:high/@value) &gt;= 8) or (cda:time/cda:center/@nullFlavor or string-length(cda:time/cda:center/@value) &gt;= 8) or (cda:effectiveTime/cda:center/@nullFlavor or string-length(cda:effectiveTime/cda:center/@value) &gt;= 8) or (cda:time/cda:width/@nullFlavor or string-length(cda:time/cda:width/@value) &gt;= 8) or (cda:effectiveTime/cda:width/@nullFlavor or string-length(cda:effectiveTime/cda:width/@value) &gt;= 8)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: Times or time intervals found in the ClinicalDocument/effectiveTime,
    author/time, dataEnterer/time, legalAuthenticator/time, authenticator/time and
    encompassingEncounter/effectiveTime elements SHALL be precise to the day, and SHALL
    include a time zone if more precise than to the day.
    See HL7 History and Physical Note, CONF-HP-10.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedEntity/cda:assignedPerson"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:assignedEntity/cda:assignedPerson">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
    Error: The assignedEntity/assignedPerson element SHALL be present
    in an authenticator element.
    See HL7 History and Physical Note, CONF-HP-52.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M12"/>
   <xsl:template match="@*|node()" priority="-2" mode="M12">
      <xsl:apply-templates select="@*|*" mode="M12"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.10.20.4.10-errorsReview of Systems - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">Review of Systems - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.4.10&#34;]" priority="1000"
                 mode="M15">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.4.10&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code='10187-3']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code='10187-3']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In HL7 Consultation Note, the LOINC section code used for the section describing the 
       Review of Systems SHALL be 10187-3 (REVIEW OF SYSTEMS).
       See HL7 Consultation Note, Section 4.3.9, CONF-CO-41.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M15"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M15"/>
   <xsl:template match="@*|node()" priority="-2" mode="M15">
      <xsl:apply-templates select="@*|*" mode="M15"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.10.20.4.8-errorsReason for Referral/Visit - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">Reason for Referral/Visit - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.4.8&#34;]" priority="1000"
                 mode="M16">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.4.8&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code='42349-1'] | cda:code[@code='29299-5']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code='42349-1'] | cda:code[@code='29299-5']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: HL7 Consulation Note, the section code for the section describing the reason for 
       referral/visit SHALL be 42349-1 (REASON FOR REFERRAL) or 29299-5 (REASON FOR VISIT).  A 
       Consultation Note that uses the latter code SHALL NOT use the former code and vice versa.
       See HL7 Consultation Node, Section 4.2.1, CONF-CO-26.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(//cda:section/cda:code[@code='42349-1'] and //cda:section/cda:code[@code='29299-5'])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(//cda:section/cda:code[@code='42349-1'] and //cda:section/cda:code[@code='29299-5'])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: HL7 Consulation Note, the section code for the section describing the reason for
       referral/visit SHALL be 42349-1 (REASON FOR REFERRAL) or 29299-5 (REASON FOR VISIT).  A
       Consultation Note that uses the latter code SHALL NOT use the former code and vice versa.
       See HL7 Consultation Node, Section 4.2.1, CONF-CO-26.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M16"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M16"/>
   <xsl:template match="@*|node()" priority="-2" mode="M16">
      <xsl:apply-templates select="@*|*" mode="M16"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.32.1-errors-->


	<!--RULE -->
<xsl:template match="/cda:ClinicalDocument" priority="1000" mode="M17">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="/cda:ClinicalDocument"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.32.1&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.32.1&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: A CDA Document shall declare conformance to HITSP/C32 by including a templateId 
     element with the root attribute set to the value 2.16.840.1.113883.3.88.11.32.1.
     See Section 2.2.1.2, rule C32-[CT1-19].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:author"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test=".//cda:author">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C32 requires a repeatable HITSP/C83 Information Source module.
      See Section 2.2.1, Table 2-3, rule C32-[CT1--8].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M17"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M17"/>
   <xsl:template match="@*|node()" priority="-2" mode="M17">
      <xsl:apply-templates select="@*|*" mode="M17"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.11-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.11&#34;]"
                 priority="1000"
                 mode="M20">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.11&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.40&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.40&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for a Comments Module (2.16.840.1.113883.3.88.11.83.11) is in the wrong location. 
      A HITSP/C83 Comments Module shall be represented as a CCD Comment act (2.16.840.1.113883.10.20.1.40).
      See HITSP/C83 Section 2.2.2.11 and C83-[DE-10-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="ancestor-or-self::*/cda:author[1]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="ancestor-or-self::*/cda:author[1]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Comment module, Author is a required, non-repeating element.
      See HITSP/C83 Table 2-16, Author.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference/@value"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference/@value">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Comments module, Free Text Comment (cda:text/cda:reference/@value) is a required, 
     non-repeatable data element.
     See HITSP/C83 Table 2-16, Data Element 11.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Comment module SHALL be conformant with the IHE Comment module and SHALL include a
      templateId element with the root attribute set to the value 1.3.6.1.4.1.19376.1.5.3.1.4.2.
      See HITSP/C83 Section 2.2.2.11.1, rule C83-[DE-10-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M20"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M20"/>
   <xsl:template match="@*|node()" priority="-2" mode="M20">
      <xsl:apply-templates select="@*|*" mode="M20"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.12-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.12&#34;]"
                 priority="1000"
                 mode="M23">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.12&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.17&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.17&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Advance Directives (2.16.840.1.113883.3.88.11.83.12) is in the wrong location. 
      A HITSP/C83 Advance Directive data element shall be represented as a CCD Advance Directive Observation 
      (2.16.840.1.113883.10.20.1.17).
      See HITSP/C83 Section 2.2.2.12 and Section 2.2.2.12.1, rule C83-[DE-12-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code) or cda:code/cda:originalText/cda:reference/@value"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code) or cda:code/cda:originalText/cda:reference/@value">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, Advance Directive Free Text Type is a required, non-repeating data
      element.  The human readable description of the type of Advance Directive SHALL appear in the 
      narrative text and SHALL be pointed to by the value attribute of the reference element instead the
      originalText element of the code.
      See HITSP/C83 Table 2-17, Data Element 12.02 and Section 2.2.2.12.3 Rule C83-[DE-12.02-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:effectiveTime) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:effectiveTime) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, Effective Date is a required, non-repeating data element.
      See HITSP/C83 Table 2-17, Data Element 12.03.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:participant[@typeCode=&#34;CST&#34;]/cda:participantRole[@classCode=&#34;AGNT&#34;]) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:participant[@typeCode=&#34;CST&#34;]/cda:participantRole[@classCode=&#34;AGNT&#34;]) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, Custodian of the Document is a required, non-repeating data element.   
      See HITSP/C83 Table 2-17, Data Element 12.04 and Section 2.2.2.12.5, rules C83-[DE-12.04-1] and
      C83-[DE-12.04-2] and C83-[DE-12.04-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive data element SHALL declare conformance to the IHE Advance Directive
      Observation by including a templateId element with the root attribute set to the value
      1.3.6.1.4.1.19376.1.5.3.1.4.13.7.
      See HITSP/C83 Section 2.2.2.12.1, rule C83-[DE-12-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code and @codeSystem]) or cda:code[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and (                  @code=&#34;304251008&#34; or                  @code=&#34;52765003&#34; or                  @code=&#34;225204009&#34; or                  @code=&#34;89666000&#34; or                  @code=&#34;281789004&#34; or                  @code=&#34;78823007&#34;)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code and @codeSystem]) or cda:code[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and ( @code=&#34;304251008&#34; or @code=&#34;52765003&#34; or @code=&#34;225204009&#34; or @code=&#34;89666000&#34; or @code=&#34;281789004&#34; or @code=&#34;78823007&#34;)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, the code SHALL be coded as specified in HITSP/C80 Section 
      2.2.3.10.1 Advance Directive Type.
      See HITSP/C83 Section 2.2.2.12.2, rule C154-[DE-12.01-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:low"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime/cda:low">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, the starting time of the Advance Directive SHALL be recorded in the 
      low element of the effectiveTime element in the Advance Directive observation.
      See HITSP/C83 Section 2.2.2.12.4, rule C83-[DE-12.03-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:low[@value or @nullFlavor=&#34;UNK&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:effectiveTime/cda:low[@value or @nullFlavor=&#34;UNK&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, if the starting time of an Advance Directive is unknown, then the low element 
      of its Effective Date shall have a nullFlavor attribute set to UNK.   
      See HITSP/C83 Section 2.2.2.12.4, rule C83-[DE-12.03-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:high"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime/cda:high">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, the ending time of the Advance Directive shall be recorded in the high element 
      of the Effective Date.   
      See HITSP/C83 Section 2.2.2.12.4, rule C83-[DE-12.03-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:high[@value or @nullFlavor=&#34;UNK&#34; or @nullFlavor=&#34;NA&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:effectiveTime/cda:high[@value or @nullFlavor=&#34;UNK&#34; or @nullFlavor=&#34;NA&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, if the ending time of an Advance Directive is unknown, then the high element 
      of its effectiveTime shall have a nullFlavor attribute set to UNK. If the Advance Directive does not have a 
      specified ending time, then the high element of its effectiveTime shall have a nullFlavor attribute set to NA.
      See HITSP/C83 Section 2.2.2.12.4, rules C83-[DE-12.03-4] and C83-[DE-12.03-5].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:participant/cda:participantRole/cda:playingEntity/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:participant/cda:participantRole/cda:playingEntity/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Advance Directive, in Custodian of the Document data element the name of the agent who 
      can provide a copy of the Advance Directive SHALL be recorded in the name element inside the 
      playingEntity element.
      See HITSP/C83 Section 2.2.2.12.5 Rule C83-[DE-12.04-6].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M23"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M23"/>
   <xsl:template match="@*|node()" priority="-2" mode="M23">
      <xsl:apply-templates select="@*|*" mode="M23"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.13-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.13&#34;]"
                 priority="1001"
                 mode="M26">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.13&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:substanceAdministration[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.24&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:substanceAdministration[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.24&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Immunization Event (2.16.840.1.113883.3.88.11.83.13) is in the wrong 
      location. The HITSP/C83 Immunizations Event Entry data element shall be represented as a CCD Medication 
      Activity substanceAdministration act (2.16.840.1.113883.10.20.1.24). 
      See HITSP/C83 Section 2.2.2.13 and rule C83-[DE-13-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Immunization Module data elements SHALL declare conformance to the IHE Immunization entry by 
      including a templateId element with the root attribute set to the value 1.3.6.1.4.1.19376.1.5.3.1.4.12.
      See HITSP/C83 Section 2.2.2.13, rule C83-[DE-13-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@negationInd"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="@negationInd">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Immunization Module, Refusal is a required, non-repeating element.  A value of false indicates 
      that the immunization was administered. A value of true indicates that the medication was refused and not taken. 
      The reason for refusal, if known, is carried by the Refusal Reason data element (Data Element 13.10).
      See HITSP/C83 Table 2-18, Data Element 13.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:consumable/cda:manufacturedProduct"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:consumable/cda:manufacturedProduct">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Immunization Module, Medication Information is a required, repeatable data element.
      See HITSP/C83 Table 2-18, Medication Information. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M26"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.13&#34;]/cda:consumable/cda:manufacturedProduct/cda:manufacturedMaterial/cda:code"
                 priority="1000"
                 mode="M26">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.13&#34;]/cda:consumable/cda:manufacturedProduct/cda:manufacturedMaterial/cda:code"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:originalText) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:originalText) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Immunization Module, Free Text Product Name is a required, non-repeating data element.
      See HITSP/C83 Table 2-18, Data Element 13.07.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(@codeSystem) and not(@code)) or                  (@codeSystem=&#34;2.16.840.1.113883.6.59&#34; or cda:translation/@codeSystem=&#34;2.16.840.1.113883.6.59&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(@codeSystem) and not(@code)) or (@codeSystem=&#34;2.16.840.1.113883.6.59&#34; or cda:translation/@codeSystem=&#34;2.16.840.1.113883.6.59&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Immunization Module SHALL be coded using CVX as specified in HITSP/C80 Section 2.2.3.5.1 
      Vaccines Administered. The code SHALL appear in the code attribute of the code or translation element.
      See HITSP/C83 Section 2.2.2.13.1, rules C83-[DE-13.06-CDA-1] and C154-[DE-13.06-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(@codeSystem) and not(@code)) or                  (@code or cda:translation/@code)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(@codeSystem) and not(@code)) or (@code or cda:translation/@code)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Immunization Module SHALL be coded using CVX as specified in HITSP/C80 Section 2.2.3.5.1
      Vaccines Administered. The code SHALL appear in the code attribute of the code or translation element.
      See HITSP/C83 Section 2.2.2.13.1, rules C83-[DE-13.06-CDA-1] and C154-[DE-13.06-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M26"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M26"/>
   <xsl:template match="@*|node()" priority="-2" mode="M26">
      <xsl:apply-templates select="@*|*" mode="M26"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.14-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.14&#34;]"
                 priority="1000"
                 mode="M29">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.14&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.31&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.31&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for a Vital Signs entry (2.16.840.1.113883.3.88.11.83.14) is in the wrong 
      location. A HITSP/C83 Vital Signs entry data element shall be represented as a CCD Result observation 
      (2.16.840.1.113883.10.20.1.31). 
      See HITSP/C83 Section 2.2.2.14 and rule C83-[DE-14-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="ancestor::cda:organizer[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="ancestor::cda:organizer[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Vital Signs information elements SHALL be contained in a conforming IHE Vital Signs 
      Organizer element that includes a templateId element with the root attribute set to the value
      1.3.6.1.4.1.19376.1.5.3.1.4.13.1.
      See HITSP/C83 Section 2.2.2.14, rule C83-[DE-14-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Vital Signs, Result ID is a required, repeatable data element. 
     See HITSP/C83 Table 2-19 and Table 2-20, Data Element 15.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:effectiveTime) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:effectiveTime) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Vital Signs, Result Date / Time is a required, non-repeating data element. 
     See HITSP/C83 Table 2-19 and Table 2-20, Data Element 15.02.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:code/@code) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:code/@code) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Vital Signs, Result Type is a required, non-repeating data element. 
     See HITSP/C83 Table 2-19 and Table 2-20, Data Element 15.03.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:statusCode) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:statusCode) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Vital Signs, a Result Status is a required, non-repeating data element.
     See HITSP/C83 Table 2-19 and Table 2-20, Data Element 15.04.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:value) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:value) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Vital Signs, Result Value is a required, non-repeating data element. 
     See HITSP/C83 Table 2-19 and Table 2-20, Data Element 15.05.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(self::cda:observation[@moodCode=&#34;EVN&#34; or @moodCode=&#34;GOL&#34;] and count(cda:value) = 1) or                  (self::cda:observation[@moodCode=&#34;INT&#34; or @moodCode=&#34;PRP&#34;] and not(cda:value))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(self::cda:observation[@moodCode=&#34;EVN&#34; or @moodCode=&#34;GOL&#34;] and count(cda:value) = 1) or (self::cda:observation[@moodCode=&#34;INT&#34; or @moodCode=&#34;PRP&#34;] and not(cda:value))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Vital Signs, Result Value is a non-repeatable data element of conditional optionality.
     Result Value SHALL be present when the observation/@moodCode is EVN or GOL,
     and SHALL NOT be present when observation/@moodCode is INT or PRP.
     See HITSP/C83 Table 2-19, Data Element 15.05 and Section 2.2.2.15.3, rule C83-[DE-15.05-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M29"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M29"/>
   <xsl:template match="@*|node()" priority="-2" mode="M29">
      <xsl:apply-templates select="@*|*" mode="M29"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.15.1-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.15.1&#34;]"
                 priority="1000"
                 mode="M32">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.15.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.31&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.31&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for a Result entry (2.16.840.1.113883.3.88.11.83.15.1) is in the wrong 
      location. A HITSP/C83 Result entry data element shall be represented as a CCD Result observation 
      (2.16.840.1.113883.10.20.1.31). 
      See HITSP/C83 Section 2.2.2.15 and rules C83-[DE-15-CDA-1] and C83-[DE-15-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Result data elements SHALL declare conformance to the IHE Simple Observation
      entry by including a templateId element with the root attribute set to the value
      1.3.6.1.4.1.19376.1.5.3.1.4.13. 
      See HITSP/C83 Section 2.2.2.15, rule C83-[DE-15-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Results, Result ID is a required, repeatable data element. 
     See HITSP/C83 Table 2-20, Data Element 15.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:effectiveTime) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:effectiveTime) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Results, Result Date / Time is a required, non-repeating data element. 
     See HITSP/C83 Table 2-20, Data Element 15.02.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:code/@code) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:code/@code) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Result, Result Type is a required, non-repeating data element. 
     See HITSP/C83 Table 2-20, Data Element 15.03.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:statusCode) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:statusCode) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Result, a Result Status is a required, non-repeating data element.
     See HITSP/C83 Table 2-20, Data Element 15.04.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(self::cda:observation[@moodCode=&#34;EVN&#34; or @moodCode=&#34;GOL&#34;] and count(cda:value) = 1) or                  (self::cda:observation[@moodCode=&#34;INT&#34; or @moodCode=&#34;PRP&#34;] and not(cda:value))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(self::cda:observation[@moodCode=&#34;EVN&#34; or @moodCode=&#34;GOL&#34;] and count(cda:value) = 1) or (self::cda:observation[@moodCode=&#34;INT&#34; or @moodCode=&#34;PRP&#34;] and not(cda:value))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Result, Result Value is a non-repeatable data element of conditional optionality. 
     Result Value SHALL be present when the observation/@moodCode is EVN or GOL,
     and SHALL NOT be present when observation/@moodCode is INT or PRP.
     See HITSP/C83 Table 2-20, Data Element 15.05 and Section 2.2.2.15.3, rule C83-[DE-15.05-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M32"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M32"/>
   <xsl:template match="@*|node()" priority="-2" mode="M32">
      <xsl:apply-templates select="@*|*" mode="M32"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.16-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.16&#34;]"
                 priority="1001"
                 mode="M35">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.16&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:encounter[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.21&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:encounter[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.21&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Encounter entry (2.16.840.1.113883.3.88.11.83.16) is in the wrong 
      location. A HITSP/C83 Encounter entry data element shall be represented as a CCD Encounter activity 
      (2.16.840.1.113883.10.20.1.21).
      See HITSP/C83 Section 2.2.2.16 and Section 2.2.2.16.1, rule C83-[DE-16-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.14&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.14&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Encounter data elements SHALL declare conformance to the IHE Encounter entry by including a
      templateIs element with the root attribute set to the value 1.3.6.1.4.1.19376.1.5.3.1.4.14.
      See HITSP/C83 Section 2.2.2.16.1, rule C83-[DE-16-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Encounter, Encounter ID is a required, repeatable data element.
      See HITSP/C83 Table 2-21, Data Element 16.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code) or count(cda:code/cda:originalText/cda:reference/@value) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code) or count(cda:code/cda:originalText/cda:reference/@value) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Encounter, Encounter Free Text Type is a required, non-repeating data element.
      See HITSP/C83 Table 2-21, Data Element 16.03. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:effectiveTime) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:effectiveTime) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Encounter, Encounter Date / Time is a required, non-repeating data element.
      See HITSP/C83 Table 2-21, Data Element 16.04.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:priorityCode[@code and @codeSystem]) or                  cda:priorityCode[@code and @codeSystem=&#34;2.16.840.1.113883.6.21&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:priorityCode[@code and @codeSystem]) or cda:priorityCode[@code and @codeSystem=&#34;2.16.840.1.113883.6.21&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Encounter, Admission Type SHALL be coded as specified in HITSP/C80 Section 2.2.3.9.2
      Admission Type.
      See HITSP/C83 Section 2.2.2.16.3, rule C154-[DE-16.07-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant[@typeCode=&#34;ORG&#34;]/cda:code[@code and @codeSystem]) or                  cda:participant[@typeCode=&#34;ORG&#34;]/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.6.21&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant[@typeCode=&#34;ORG&#34;]/cda:code[@code and @codeSystem]) or cda:participant[@typeCode=&#34;ORG&#34;]/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.6.21&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Encounter, Admission Source SHALL be coded as specified in HITSP/C80 Section 2.2.3.9.1
      Admission Source.
      See HITSP/C83 Section 2.2.2.16.4, rule C154-[DE-16.06-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M35"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:componentOf/cda:encompassingEncounter"
                 priority="1000"
                 mode="M35">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:componentOf/cda:encompassingEncounter"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code]) or                  cda:code[@code=&#34;EMER&#34; or @code=&#34;IMP&#34; or @code=&#34;AMB&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code]) or cda:code[@code=&#34;EMER&#34; or @code=&#34;IMP&#34; or @code=&#34;AMB&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Encounter, Patient Class SHALL be coded as specified in HITSP/C80 Section 2.2.3.9.5
      Patient Class.
      See HITSP/C83 Section 2.2.2.16.5, rule C154-[DE-16.10-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M35"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M35"/>
   <xsl:template match="@*|node()" priority="-2" mode="M35">
      <xsl:apply-templates select="@*|*" mode="M35"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.17-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.17&#34;]"
                 priority="1000"
                 mode="M38">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.17&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:procedure[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.29&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:procedure[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.29&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Procedure (2.16.840.1.113883.3.88.11.83.17) is in the wrong location.  The
      Procedure module should be within a CCD Procedures Activities (2.16.840.1.113883.10.20.1.29).
      See HITSP/C83 Section 2.2.2.17.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Procedure, Procedure ID is a required, repeatable element.
      See HITSP/C83 Table 2-22, Data Element 17.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:code/cda:originalText/cda:reference/@value) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:code/cda:originalText/cda:reference/@value) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Procedure, Procedure Free Text Type is a required, non-repeating data element.
      See HITSP/C83 Table 2-22, Data Element 17.03
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Procedure entries SHALL also declare conformance to the IHE Procedure
      entry by including a templateId element with the root attribute set to the value
      1.3.6.1.4.1.19376.1.5.3.1.4.19.
      See HITSP/C83 Section 2.2.2.17.1, rule C83-[DE-17-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:targetSiteCode[@code and @codeSystem]) or                  cda:targetSiteCode[@code and @codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:targetSiteCode[@code and @codeSystem]) or cda:targetSiteCode[@code and @codeSystem=&#34;2.16.840.1.113883.6.96&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Procedure, Body Site SHALL be coded as specified in HITSP/C80 Section 2.2.3.2.1
      Body Site.
      See HITSP/C83 Section 2.2.2.17.2, rule C83-[DE-17-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M38"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M38"/>
   <xsl:template match="@*|node()" priority="-2" mode="M38">
      <xsl:apply-templates select="@*|*" mode="M38"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.2-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.2&#34;]"
                 priority="1000"
                 mode="M41">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:languageCommunication"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:languageCommunication">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Spoken Language (2.16.840.1.113883.3.88.11.83.2)
      is in the wrong location. The HITSP/C83 Language Spoken module is represented as a 
      CDA languageCommunication element.
      See Table 2-6, Data Element 2.01 and Section 2.2.2.2.1, rules C83-[DE-2.01-CDA-1] and
      C83-[DE-2.01-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.1&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.1&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Language Spoken entries SHALL declare conformance to the IHE Language
      Communication module by including a templateId element with the root attribute set to 
      the value 1.3.6.1.4.1.19376.1.5.3.1.2.1.
      See Section 2.2.2.2.1, rule C83-[DE-2.01-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:modeCode) or cda:modeCode[(@code=&#34;ESGN&#34; or @code=&#34;ESP&#34; or @code=&#34;EWR&#34;                                                   or @code=&#34;RSGN&#34; or @code=&#34;RSP&#34; or @code=&#34;RWR&#34;)                                                and @codeSystem=&#34;2.16.840.1.113883.5.60&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:modeCode) or cda:modeCode[(@code=&#34;ESGN&#34; or @code=&#34;ESP&#34; or @code=&#34;EWR&#34; or @code=&#34;RSGN&#34; or @code=&#34;RSP&#34; or @code=&#34;RWR&#34;) and @codeSystem=&#34;2.16.840.1.113883.5.60&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Language Spoken, if the Patient Language element contains a modeCode element 
      to express  types of language expression, then that code shall come from the HL7 
      LanguageAbilityMode code system (2.16.840.1.113883.5.60), which specifies the following 
      codes: ESGN (expressed signed), ESP (expressed spoken), EWR (expressed written), RSGN 
      (received signed), RSP (received spoken), RWR (received written).
      See Section 2.2.2.2.1, rule C83-[DE-2.01-CDA-4].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M41"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M41"/>
   <xsl:template match="@*|node()" priority="-2" mode="M41">
      <xsl:apply-templates select="@*|*" mode="M41"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.3-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.3&#34;]"
                 priority="1000"
                 mode="M44">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(parent::cda:patient and self::cda:guardian[@classCode =&#34;GUARD&#34;])               or (parent::cda:ClinicalDocument and self::cda:participant[@typeCode=&#34;IND&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(parent::cda:patient and self::cda:guardian[@classCode =&#34;GUARD&#34;]) or (parent::cda:ClinicalDocument and self::cda:participant[@typeCode=&#34;IND&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Support (2.16.840.1.113883.3.88.11.83.3) is in the wrong 
      location. The C83 Support module shall be represented as a CDA Guardian under CDA Patient, 
      or as a CDA Participant (indirect participant IND) directly under ClinicalDocument.
      See HITSP/C83 Table 2-7 and Figure 2-11 and Section 2.2.2.3.1, rule C83-[DE-3-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Support Module SHALL also declare conformance to the IHE Patient Contacts 
      module by including a templateId element with the root attribute set to the value 
      1.3.6.1.4.1.19376.1.5.3.1.2.4.
      See HITSP/C83 Section 2.2.2.3.1, rule C83-[DE-3-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(parent::cda:ClinicalDocument and self::cda:participant[@typeCode=&#34;IND&#34;]) or                  count(cda:time) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(parent::cda:ClinicalDocument and self::cda:participant[@typeCode=&#34;IND&#34;]) or count(cda:time) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Support Module, participant/associatedEntity support requires a non-repeating
      time element describing the period over which the support is provided.
      See HITSP/C83 Table 2-7, Data Element 3.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:associatedEntity/@classCode or @classCode"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:associatedEntity/@classCode or @classCode">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Support Module, contact type is a required, non-repeating element.
      See HITSP/C83 Table 2-7, Data Element 3.02.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:associatedEntity/cda:associatedPerson/cda:name or cda:guardianPerson/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:associatedEntity/cda:associatedPerson/cda:name or cda:guardianPerson/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Support Module, Contact Name is a required, repeatable element.
      See HITSP/C83 Table 2-7, Data Element 3.06.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(parent::cda:patient and self::cda:guardian[@classCode =&#34;GUARD&#34;]) or                  (not(cda:associatedEntity/@classCode) or                    cda:associatedEntity[@classCode=&#34;AGNT&#34; or                                         @classCode=&#34;CAREGIVER&#34; or                                        @classCode=&#34;ECON&#34; or                                        @classCode=&#34;GUARD&#34; or                                        @classCode=&#34;NOK&#34; or                                        @classCode=&#34;PRS&#34;]                  )"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(parent::cda:patient and self::cda:guardian[@classCode =&#34;GUARD&#34;]) or (not(cda:associatedEntity/@classCode) or cda:associatedEntity[@classCode=&#34;AGNT&#34; or @classCode=&#34;CAREGIVER&#34; or @classCode=&#34;ECON&#34; or @classCode=&#34;GUARD&#34; or @classCode=&#34;NOK&#34; or @classCode=&#34;PRS&#34;] )">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Support, Contact Type classCode attribute SHALL be coded as 
      specified in HITSP/C80 section 2.2.1.2.6 Contact Type.
      See HITSP/C83, Rule C83-[DE-3.01-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(parent::cda:ClinicalDocument and self::cda:participant[@typeCode=&#34;IND&#34;]) or                  (not(./@classCode) or                   ./@classCode=&#34;AGNT&#34; or                   ./@classCode=&#34;CAREGIVER&#34; or                   ./@classCode=&#34;ECON&#34; or                   ./@classCode=&#34;GUARD&#34; or                   ./@classCode=&#34;NOK&#34; or                   ./@classCode=&#34;PRS&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(parent::cda:ClinicalDocument and self::cda:participant[@typeCode=&#34;IND&#34;]) or (not(./@classCode) or ./@classCode=&#34;AGNT&#34; or ./@classCode=&#34;CAREGIVER&#34; or ./@classCode=&#34;ECON&#34; or ./@classCode=&#34;GUARD&#34; or ./@classCode=&#34;NOK&#34; or ./@classCode=&#34;PRS&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Support, Contact Type classCode attribute SHALL be coded as
      specified in HITSP/C80 section 2.2.1.2.6 Contact Type.
      See HITSP/C83, Rule C83-[DE-3.01-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(parent::cda:ClinicalDocument and self::cda:participant[@typeCode=&#34;IND&#34;]) or                  (not(cda:associatedEntity/cda:code) or                   cda:associatedEntity/cda:code/@codeSystem=&#34;2.16.840.1.113883.5.111&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(parent::cda:ClinicalDocument and self::cda:participant[@typeCode=&#34;IND&#34;]) or (not(cda:associatedEntity/cda:code) or cda:associatedEntity/cda:code/@codeSystem=&#34;2.16.840.1.113883.5.111&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Support, Contact Relationship code element SHALL have a code value as
      specified in HITSP/C80 section 2.2.1.2.4 Personal Relationships.
      See HITSP/C83, Rule C154-[DE-3.03-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(parent::cda:patient and self::cda:guardian[@classCode =&#34;GUARD&#34;]) or                  ((not(cda:code/@code) and not(cda:code/@codeSystem) or                   cda:code/@codeSystem=&#34;2.16.840.1.113883.5.111&#34;))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(parent::cda:patient and self::cda:guardian[@classCode =&#34;GUARD&#34;]) or ((not(cda:code/@code) and not(cda:code/@codeSystem) or cda:code/@codeSystem=&#34;2.16.840.1.113883.5.111&#34;))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Support, Contact Relationship code element SHALL have a code value as
      specified in HITSP/C80 section 2.2.1.2.4 Personal Relationships.
      See HITSP/C83, Rule C154-[DE-3.03-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M44"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M44"/>
   <xsl:template match="@*|node()" priority="-2" mode="M44">
      <xsl:apply-templates select="@*|*" mode="M44"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.4-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.4&#34;]"
                 priority="1001"
                 mode="M47">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="ancestor::cda:documentationOf              and parent::cda:serviceEvent[@classCode=&#34;PCPR&#34;]              and self::cda:performer[@typeCode=&#34;PRF&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="ancestor::cda:documentationOf and parent::cda:serviceEvent[@classCode=&#34;PCPR&#34;] and self::cda:performer[@typeCode=&#34;PRF&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Healthcare Provider (2.16.840.1.113883.3.88.11.83.4) 
      is in the wrong location. The Healthcare Provider data element shall be represented as a
      cda:performer element under a cda:serviceEvent under a cda:documentationOf element.
      See HITSP/C83 Section 2.2.2.4 and Section 2.2.2.4.2.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.3&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.3&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Healthcare Provider module SHALL declare conformance to the IHE Healthcare 
      Providers and Pharmacies specification by including a templateId element with the root 
      attribute set to the value 1.3.6.1.4.1.19376.1.5.3.1.2.3.
      See HITSP/C83 Section 2.2.2.4.1, rule C83-[DE-4-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:time) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:time) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Healthcare Provider, Date Range is a required, non-repeatable element
      See HITSP/C83 Table 2-8, Data Element 4.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedEntity"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:assignedEntity">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Healthcare Provider, Provider Entity is a required, repeatable data element
      See HITSP/C83 Table 2-8, Provider Entity Data Element.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="parent::cda:serviceEvent[@classCode=&#34;PCPR&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="parent::cda:serviceEvent[@classCode=&#34;PCPR&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Healthcare Providers are encoded within a &lt;serviceEvent
      classCode='PCPR'&gt; element as shown in Figure 2-13.  The value "PCPR" is required, 
      and is a code meaning "provision of care".
      See HITSP/C83 Section 2.2.2.4.2.  
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(cda:functionCode/@code) and not(cda:functionCode/@codeSystem)) or                  (cda:functionCode[@codeSystem=&#34;2.16.840.1.113883.12.443&#34; and (@code=&#34;CP&#34; or @code=&#34;PP&#34; or @code=&#34;RP&#34;)])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(cda:functionCode/@code) and not(cda:functionCode/@codeSystem)) or (cda:functionCode[@codeSystem=&#34;2.16.840.1.113883.12.443&#34; and (@code=&#34;CP&#34; or @code=&#34;PP&#34; or @code=&#34;RP&#34;)])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Healthcare Provider, Provider Role Coded data element (i.e. CDA functionCode), 
      if present, SHALL be coded as specified in HITSP/C80 section 2.2.3.8.1 Provider Role.  The allowed
      values are Consulting Provider (CP), Primary Care Provider (PP) and Referring Provider (RP), a 
      limited subset taken from the HL7 v2 Provider Role code system (2.16.840.1.113883.12.443).
      See HITSP/C83 Section 2.2.2.4.3, rule C154-[DE-4.02-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M47"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.4&#34;]/cda:assignedEntity"
                 priority="1000"
                 mode="M47">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.4&#34;]/cda:assignedEntity"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(cda:code/@code) and not(cda:code/@codeSystem))               or (cda:code[@codeSystem=&#34;2.16.840.1.113883.6.101&#34;]                   and cda:code[substring(@code,3,10)=&#34;0000000X&#34;]                  and not(cda:code[substring(@code,1,2)=&#34;17&#34;])                  and not(cda:code[substring(@code,1,2)=&#34;19&#34;])                  and not(cda:code[substring(@code,1,2)=&#34;24&#34;])                  and not(cda:code[substring(@code,1,2)=&#34;27&#34;])                  and not(cda:code[substring(@code,1,2)=&#34;34&#34;]))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(cda:code/@code) and not(cda:code/@codeSystem)) or (cda:code[@codeSystem=&#34;2.16.840.1.113883.6.101&#34;] and cda:code[substring(@code,3,10)=&#34;0000000X&#34;] and not(cda:code[substring(@code,1,2)=&#34;17&#34;]) and not(cda:code[substring(@code,1,2)=&#34;19&#34;]) and not(cda:code[substring(@code,1,2)=&#34;24&#34;]) and not(cda:code[substring(@code,1,2)=&#34;27&#34;]) and not(cda:code[substring(@code,1,2)=&#34;34&#34;]))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Healthcare Provider, Provider Type data element, if present, SHALL be coded 
     as specified in HITSP/C80 section 2.2.3.8.2 Provider Type.  It shall be one of 
     23 selected top-level values (format dd0000000X) taken from the NUCC ProviderCodes code 
     system (2.16.840.1.113883.6.101).
     See HITSP/C83 Section 2.2.2.4.5, rule C154-[DE-4.04-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(cda:id)) or                  (cda:id[@extension and @root=&#34;2.16.840.1.113883.4.6&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(cda:id)) or (cda:id[@extension and @root=&#34;2.16.840.1.113883.4.6&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Healthcare Provider, National Provider Identifier, the extension attribute 
      SHALL contain the National Provider Identifier.  The root attribute SHALL contain the value
      2.16.840.1.113883.4.6 to indicate that this identifier is the provider’s assigned NPI.
      See HITSP/C83 Section 2.2.2.4.4, rules C83-[DE-4.10-CDA-1] and C83-[DE-4.10-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M47"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M47"/>
   <xsl:template match="@*|node()" priority="-2" mode="M47">
      <xsl:apply-templates select="@*|*" mode="M47"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.5-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.5&#34;]"
                 priority="1001"
                 mode="M50">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.5&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.26&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.26&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Insurance Payment Provider (2.16.840.1.113883.3.88.11.83.5)
      is in the wrong location. A C83 Insurance Payment Providers data element shall be represented as
      a CCD Policy Activity act (2.16.840.1.113883.10.20.1.26).
      See HITSP/C83 Section 2.2.2.5, Table 2-9 and Section 2.2.2.5.1, rule C83-[DE-5-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="ancestor::cda:act[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.17&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="ancestor::cda:act[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.17&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Provider modules SHALL declare conformance to the IHE Coverage 
      Entry by including a templateId element with the root attribute set to the value 
      1.3.6.1.4.1.19376.1.5.3.1.4.17.
      See HITSP/C83 Section 2.2.2.5.1, rule C83-[DE-5-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:id) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:id) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C38 Insurance Provider, Payment Provider Event Entry Group Number is a required,
      non-repeating data element. The root attribute SHOULD be the OID of the assigning authority
      for the identifier; however, determining the assigning authority is not feasible in all settings.
      A GUID MAY be used in place of the OID of the assigning authority.  Implementers SHOULD use the
      same GUID for each instance of the same group or contract number.
      See HITSP/C83 Table 2-9, Data Element 5.01 and Section 2.2.2.5.3 rules C83-[DE-5.01-CDA-2], 
      C83-[DE-5.01-CDA-3] and C83-[DE-5.01-CDA-4].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code and @codeSystem]) or cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.6.255.1336&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code and @codeSystem]) or cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.6.255.1336&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Provider, Health Insurance Type, the code attribute value SHALL 
      be coded as specified in HITSP/C80 Section 2.2.2.1 Health Insurance Type.
      See HITSP/C83 Section 2.2.2.5.4 Rule C154-[DE-5.02-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:performer/cda:assignedEntity) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:performer/cda:assignedEntity) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Providers shall contain a non-repeating Payer element.
      See HITSP/C83 Table 2-9, Payer.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:participant[@typeCode=&#34;COV&#34;]) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:participant[@typeCode=&#34;COV&#34;]) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Providers shall contain a non-repeating Member Information element.
      See HITSP/C83 Table 2-9, Member Information.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Providers, Member Information shall contain a non-repeating Patient
      element.
      See HITSP/C83 Table 2-9, Patient. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:id) or                  cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:id/@extension"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:id) or cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:id/@extension">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Providers, Member Information Identifier number SHALL be recorded 
      in the extension attribute of the id element found in the participantRole element.
      See HITSP/C83 Section 2.2.2.5.8, rule C83-[DE-5.08-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:code) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:code) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Providers, Member Information Patient shall contain a non-repeating Patient
      Relationship to Subscriber code element.
      See HITSP/C83 Table 2-9, Data Element 5.09 and Section 2.2.2.5.10 Rule C83-[DE-5.09-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:code) or                  cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:code[                  @codeSystem=&#34;2.16.840.1.113883.5.111&#34; and (                  @code=&#34;FAMDEP&#34; or                  @code=&#34;HANDIC&#34; or                  @code=&#34;INJ&#34; or                  @code=&#34;SELF&#34; or                  @code=&#34;SPON&#34; or                  @code=&#34;STUD&#34; or                  @code=&#34;FSTUD&#34; or                  @code=&#34;PSTUD&#34;)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:code) or cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:code[ @codeSystem=&#34;2.16.840.1.113883.5.111&#34; and ( @code=&#34;FAMDEP&#34; or @code=&#34;HANDIC&#34; or @code=&#34;INJ&#34; or @code=&#34;SELF&#34; or @code=&#34;SPON&#34; or @code=&#34;STUD&#34; or @code=&#34;FSTUD&#34; or @code=&#34;PSTUD&#34;)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Providers, Member Information Patient Relationship to Subscriber Code, the 
      code attribute SHALL be present, and SHALL be coded as specified in HITSP/C80 section 2.2.2.2
      Subscriber Relationship.
      See HITSP/C83 Section 2.2.2.5.10, rule C154-[DE-5.09-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:playingEntity/cda:name) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:playingEntity/cda:name) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Providers, Member Information Patient shall contain a non-repeating Patient
      Name element.
      See HITSP/C83 Table 2-9, Data Element 5.12 and Section 2.2.2.5.12, rule C83-[DE-5.12-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:playingEntity/sdtc:birthTime) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:participant[@typeCode=&#34;COV&#34;]/cda:participantRole[@classCode=&#34;PAT&#34;]/cda:playingEntity/sdtc:birthTime) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Providers, Member Information Patient shall contain a non-repeating Patient
      Date of Birth element (i.e. sdtc:birthTime).
      Note: The sdtc:birthTime represents an extension to HL7 CDA Release 2.0.
      See HITSP/C83 Table 2-9, Data Element 5.13 and Section 2.2.2.5.13, rule C83-[DE-5.13-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:performer/cda:assignedEntity/cda:code[@code and @codeSystem]) or                   cda:performer/cda:assignedEntity/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.5.110&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:performer/cda:assignedEntity/cda:code[@code and @codeSystem]) or cda:performer/cda:assignedEntity/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.5.110&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Insurance Providers, Financial Responsibility Party Type element, the code attribute
     SHALL be coded as specified in HITSP/C80 Section 2.2.2.3 Financially Responsible Party Type.
     See HITSP/C83 Section 2.2.2.5.14, rule C83-[DE-5.14-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code and @codeSystem]) or                   not(cda:code[@code=&#34;PP&#34;]) or                   cda:performer/cda:assignedEntity/cda:code[@code=&#34;GUAR&#34; or @code=&#34;PAT&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code and @codeSystem]) or not(cda:code[@code=&#34;PP&#34;]) or cda:performer/cda:assignedEntity/cda:code[@code=&#34;GUAR&#34; or @code=&#34;PAT&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Insurance Providers, Financial Responsibility Party Type element, if the Health 
     Insurance Type of the encompassing Payment Provider (i.e. cda:code) is PP, then the Financial
     Responsibility Party Type code attribute shall be set to GUAR or PAT to indicate a Guarantor 
     or self-paying patient, respectively.
     See HITSP/C83 Section 2.2.2.5.14, rule C83-[DE-5.14-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code and @codeSystem]) or                   cda:code[@code=&#34;PP&#34;] or                   cda:performer/cda:assignedEntity/cda:code[@code=&#34;PAYOR&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code and @codeSystem]) or cda:code[@code=&#34;PP&#34;] or cda:performer/cda:assignedEntity/cda:code[@code=&#34;PAYOR&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Insurance Providers, Financial Responsibility Party Type element, if the Health
     Insurance Type of the encompassing Payment Provider (i.e. cda:code) is anything other than PP, then the
     Financial Responsibility Party Type code attribute shall be set to PAYOR.
     See HITSP/C83 Section 2.2.2.5.14, rule C83-[DE-5.14-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M50"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.5&#34;]/cda:participant[@typeCode=&#34;HLD&#34;]/cda:participantRole"
                 priority="1000"
                 mode="M50">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.5&#34;]/cda:participant[@typeCode=&#34;HLD&#34;]/cda:participantRole"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:id) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:id) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Insurance Provider, Subscriber Information data element shall contain a 
      non-repeating Subscriber ID element.  The root attribute SHOULD be the OID of the assigning authority 
      for the identifier; however, determining the assigning authority is not feasible in all
      settings.  A GUID MAY be used in place of the OID of the assigning authority. Implementers 
      SHOULD use the same GUID for each instance of a subscriber identifier from the same health
      plan.
      See HITSP/C83 Table 2-9, Data Element 5.15 and Section 2.2.2.5.16, rules C83-[DE-5.15-CDA-1] 
      and C83-[DE-5.15-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:addr) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:addr) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Insurance Provider, Subscriber Information data element shall contain a
     non-repeating Subscriber Address data element.
     See HITSP/C83 Table 2-9, Data Element 5.16.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:playingEntity/cda:name) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:playingEntity/cda:name) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Insurance Provider, Subscriber Information data element shall contain a non-repeating
     Subscriber Name data element.
     See HITSP/C83 Table 2-9, Data Element 5.18.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:playingEntity/sdtc:birthTime) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:playingEntity/sdtc:birthTime) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Insurance Provider, Subscriber Information data element shall contain a non-repeating
     Subscriber Date of Birth element (sdtc:birthTime). 
     Note: The sdtc:birthTime represents an extension to HL7 CDA Release 2.0.
     See HITSP/C83 Table 2-9, Data Element 5.19 and Section 2.2.2.5.17, rule C83-[DE-5.19-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M50"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M50"/>
   <xsl:template match="@*|node()" priority="-2" mode="M50">
      <xsl:apply-templates select="@*|*" mode="M50"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.6-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]"
                 priority="1005"
                 mode="M53">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="ancestor::cda:section[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.2&#34;]              and self::cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.27&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="ancestor::cda:section[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.2&#34;] and self::cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.27&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Allergy and Drug Sensitivities (2.16.840.1.113883.3.88.11.83.6) 
      is in the wrong location. A HITSP C83 Allergy and Drug Sensitivities module (2.16.840.1.113883.3.88.11.83.6) 
      shall be represented as a CCD Problem act (2.16.840.1.113883.10.20.1.27) under a CCD Alerts section 
      (2.16.840.1.113883.10.20.1.2).
      See HITSP/C83 Section 2.2.2.6, Table 2-10 and Section 2.2.2.6.1, rule C83-[DE-6-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.3&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.3&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error:  HITSP/C83 Allergy/Drug Sensitivity entries SHALL conform to the IHE PCC Allergy and Intolerance 
      Concern template by including a templateId element with the root attribute set to the value 
      1.3.6.1.4.1.19376.1.5.3.1.4.5.3.
      See HITSP/C83 Section 2.2.2.6.1, Rule C83-[DE-6-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M53"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]"
                 priority="1004"
                 mode="M53">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:code/@code) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:code/@code) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Allergy/Drug Sensitivity, Adverse Event Type is a required, non-repeatable data
      element.
      See HITSP/C83 Table 2-10, Data Element 6.02.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;] and                  cda:code[@code=&#34;420134006&#34; or @code=&#34;418038007&#34; or @code=&#34;419511003&#34; or @code=&#34;418471000&#34; or                           @code=&#34;419199007&#34; or @code=&#34;416098002&#34; or @code=&#34;414285001&#34; or @code=&#34;59037007&#34; or                           @code=&#34;235719002&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;] and cda:code[@code=&#34;420134006&#34; or @code=&#34;418038007&#34; or @code=&#34;419511003&#34; or @code=&#34;418471000&#34; or @code=&#34;419199007&#34; or @code=&#34;416098002&#34; or @code=&#34;414285001&#34; or @code=&#34;59037007&#34; or @code=&#34;235719002&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Allergy/Drug Sensitivity, the vocabulary used for adverse event types SHALL be coded 
     as specified in HITSP/C80 Section 2.2.3.4.2 Allergy/Adverse Event Type Adverse Event Entry data element. 
     See HITSP/C83 Section 2.2.2.6.2 Rule C154-[DE-6.02-1].   
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M53"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]/cda:participant[@typeCode=&#34;CSM&#34;]"
                 priority="1003"
                 mode="M53">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]/cda:participant[@typeCode=&#34;CSM&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:participantRole[@classCode=&#34;MANU&#34;]/cda:playingEntity[@classCode=&#34;MMAT&#34;]) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:participantRole[@classCode=&#34;MANU&#34;]/cda:playingEntity[@classCode=&#34;MMAT&#34;]) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Allergy/Drug Sensitivity, Product Detail is a required, non-repeatable data element
      under Product.
      See HITSP/C83 Table 2-10, Product Detail.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M53"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]/cda:participant[@typeCode=&#34;CSM&#34;]/cda:participantRole[@classCode=&#34;MANU&#34;]/cda:playingEntity[@classCode=&#34;MMAT&#34;]"
                 priority="1002"
                 mode="M53">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]/cda:participant[@typeCode=&#34;CSM&#34;]/cda:participantRole[@classCode=&#34;MANU&#34;]/cda:playingEntity[@classCode=&#34;MMAT&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:name) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:name) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Allergy/Drug Sensitivity, Product Free-Text is a required, non-repeatable data element.
     See HITSP/C83 Table 2-10, Data Element 6.03.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M53"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]/cda:entryRelationship[@typeCode=&#34;MFST&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.54&#34;]"
                 priority="1001"
                 mode="M53">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]/cda:entryRelationship[@typeCode=&#34;MFST&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.54&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:value[@code and @codeSystem]) or cda:value[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and @code]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:value[@code and @codeSystem]) or cda:value[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and @code]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Allergy/Drug Sensitivity, the reaction SHALL be coded as specified in HITSP/C80 
      Section 2.2.3.4.1 Allergy/Adverse Event (Reaction)
      See Section 2.2.2.6.4, rule C154-[DE-6.06-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M53"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]/cda:entryRelationship[@typeCode=&#34;MFST&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.54&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.55&#34;]"
                 priority="1000"
                 mode="M53">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.18&#34;]/cda:entryRelationship[@typeCode=&#34;MFST&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.54&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.55&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:value[@code and @codeSystem])                  or cda:value[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;                  and (@code=&#34;255604002&#34; or @code=&#34;371923003&#34; or @code=&#34;6736007&#34;                    or @code=&#34;371924009&#34; or @code=&#34;24484000&#34; or @code=&#34;399166001&#34;)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:value[@code and @codeSystem]) or cda:value[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and (@code=&#34;255604002&#34; or @code=&#34;371923003&#34; or @code=&#34;6736007&#34; or @code=&#34;371924009&#34; or @code=&#34;24484000&#34; or @code=&#34;399166001&#34;)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Allergy/Drug Sensitivity, the terminology used for severity of the adverse event SHALL
      be coded as specified in HITSP/C80 Section 2.2.3.4.3 Allergy/Adverse Event Severity.
      See Section 2.2.2.6.5 rule C154-[DE-6.08-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M53"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M53"/>
   <xsl:template match="@*|node()" priority="-2" mode="M53">
      <xsl:apply-templates select="@*|*" mode="M53"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.7-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]"
                 priority="1004"
                 mode="M56">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.27&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.27&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Condition - Problem entry (2.16.840.1.113883.3.88.11.83.7) 
      is in the wrong location. The HITSP/C83 Conditions module (2.16.840.1.113883.3.88.11.83.7) shall 
      be represented as a CCD Problem act (2.16.840.1.113883.10.20.1.27).
      See HITSP/C83 Section 2.2.2.7 and Section 2.2.2.7.1, rule C83-[DE-7-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.28&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.28&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Condition module (2.16.840.1.113883.3.88.11.83.7) represented as a CCD 
      Problem Act (2.16.840.1.113883.10.20.1.27) shall contain a subject (SUBJ) entryRelationship 
      with target a Problem Entry data element represented as a CCD Problem Observation 
      (2.16.840.1.113883.10.20.1.28).
      See HITSP/C83 Table 2-11, Problem Entry.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Condition Problem Entries SHALL also declare conformance to the IHE Problem 
      Concern by including a templateId element with the root attribute set to the value 
      1.3.6.1.4.1.19376.1.5.3.1.4.5.2.
      See HITSP/C83 Section 2.2.2.7.1 Rule C83-[DE-7-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M56"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.28&#34;]"
                 priority="1003"
                 mode="M56">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]/cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.28&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference/@value"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference/@value">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Condition, Problem Entry data element element shall contain a free text 
     element to record the Problem Name. The Problem Name element shall contain a reference 
     element whose value attribute points to narrative text in the parent section containing 
     the name of the problem.
     See HITSP/C83 Table 2-11, Data Element 7.03 and Section 2.2.2.7.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code and @codeSystem]) or (cda:code/@codeSystem=&#34;2.16.840.1.113883.6.96&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code and @codeSystem]) or (cda:code/@codeSystem=&#34;2.16.840.1.113883.6.96&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Conditions Problem Type SHALL be coded as specified in HITSP/C80 Section 2.2.3.1.2 
      Problem Type.  The code SHALL contain a codeSystem attribute that identifies the SNOMED CT 
      codeSystem (2.16.840.1.113883.6.96).
      See HITSP/C83 Section 2.2.2.7.3, rule C154-[DE-7.02-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code and @codeSystem]) or                  cda:code[@code=&#34;404684003&#34; or @code=&#34;418799008&#34; or @code=&#34;55607006&#34; or                           @code=&#34;409586006&#34; or @code=&#34;64572001&#34; or @code=&#34;282291009&#34; or                           @code=&#34;248536006&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code and @codeSystem]) or cda:code[@code=&#34;404684003&#34; or @code=&#34;418799008&#34; or @code=&#34;55607006&#34; or @code=&#34;409586006&#34; or @code=&#34;64572001&#34; or @code=&#34;282291009&#34; or @code=&#34;248536006&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Conditions Problem Type SHALL be coded as specified in HITSP/C80 Section 2.2.3.1.2
      Problem Type.  The Problem Type code element SHALL contain a code attribute that identifies the 
      SNOMED CT code for one of the following seven conditions: Finding (404684003), Symptom (418799008),
      Problem (55607006), Complaint (409586006), Condition (64572001), Diagnosis (282291009, Functional 
      limitation (248536006).
      See HITSP/C83 Section 2.2.2.7.3, rule C83-[DE-7.02-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:value[@code and @codeSystem]) or                   cda:value[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and @code]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:value[@code and @codeSystem]) or cda:value[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and @code]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Condition Problem Code SHALL be coded as specified in HITSP/C80 Section 
      2.2.3.1.1 Problem.
     See HITSP/C83 Section 2.2.2.7.5, rule C154-[DE-7.04-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M56"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]/cda:performer"
                 priority="1002"
                 mode="M56">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]/cda:performer"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedEntity/cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:assignedEntity/cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Condition Treating Provider, the identifier of the treating provider SHALL be 
     present in the id element beneath the assignedEntity. This identifier SHALL be the identifier
     of one of the providers listed in the healthcare providers module described in Section 2.2.2.4
     See HITSP/C83 Section 2.2.2.7.6, rule C83-[DE-7.05-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:assignedEntity/cda:id/@root = /cda:ClinicalDocument/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:id/@root)               and (cda:assignedEntity/cda:id/@extension = /cda:ClinicalDocument/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:id/@extension)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:assignedEntity/cda:id/@root = /cda:ClinicalDocument/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:id/@root) and (cda:assignedEntity/cda:id/@extension = /cda:ClinicalDocument/cda:documentationOf/cda:serviceEvent/cda:performer/cda:assignedEntity/cda:id/@extension)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Condition Treating Provider, the identifier of the treating provider SHALL be
     present in the id element beneath the assignedEntity. This identifier SHALL be the identifier
     of one of the providers listed in the healthcare providers module described in Section 2.2.2.4
     See HITSP/C83 Section 2.2.2.7.6, rule C83-[DE-7.05-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M56"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]/cda:entryRelationship/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.38&#34;]"
                 priority="1001"
                 mode="M56">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]/cda:entryRelationship/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.38&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.3&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.3&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Condition Age (at onset) SHALL declare conformance to the IHE Family History
      Observation entry by including a templateId element with the root attribute set to the value
      1.3.6.1.4.1.19376.1.5.3.1.4.13.3.
      See HITSP/C83 Table 2-11, Data Element 7.06 and Section 2.2.2.18.11, rule C83-[DE-18.13-CDA-1]. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M56"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]/cda:entryRelationship[@typeCode=&#34;CAUS&#34;]/cda:observation/cda:entryRelationship/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.38&#34;]"
                 priority="1000"
                 mode="M56">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;]/cda:entryRelationship[@typeCode=&#34;CAUS&#34;]/cda:observation/cda:entryRelationship/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.38&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.3&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.3&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Condition Age (at death) SHALL declare conformance to the IHE Family History
      Observation entry by including a templateId element with the root attribute set to the value
      1.3.6.1.4.1.19376.1.5.3.1.4.13.3.
      See HITSP/C83 Table 2-11, Data Element 7.08 and Section 2.2.2.18.11, rule C83-[DE-18.13-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M56"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M56"/>
   <xsl:template match="@*|node()" priority="-2" mode="M56">
      <xsl:apply-templates select="@*|*" mode="M56"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.8.1-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.1&#34;]"
                 priority="1000"
                 mode="M59">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="parent::cda:entryRelationship and self::cda:observation"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="parent::cda:entryRelationship and self::cda:observation">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Type of Medication (2.16.840.1.113883.3.88.11.83.8.1) is in the wrong 
      location.  A HITSP/C83 Type of Medication data element shall be represented as an observation element in
      an entryRelationship.
      See HITSP/C83 Section 2.2.2.8.16, rules C83-[DE-8.19-CDA-1], C83-[DE-8.19-CDA-3] and C83-[DE-8.19-CDA-4].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Type of Medication observation SHALL have a code element that represents the kind of 
      medication actually or intended to be administered or supplied.
      See HITSP/C83 Section 2.2.2.8.12 Rule C83-[DE-8.19-CDA-5].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and (@code=&#34;329505003&#34; or @code=&#34;73639000&#34;)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and (@code=&#34;329505003&#34; or @code=&#34;73639000&#34;)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Type of Medication observation code attribute SHALL be coded as specified in HITSP/C80 
      Section 2.2.3.3.5 Medication Type.
      See HITSP/C83 Section 2.2.2.8.12 Rule C154-[DE-8.19-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M59"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M59"/>
   <xsl:template match="@*|node()" priority="-2" mode="M59">
      <xsl:apply-templates select="@*|*" mode="M59"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.8.2-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.2&#34;]"
                 priority="1002"
                 mode="M62">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:manufacturedProduct[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.53&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:manufacturedProduct[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.53&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Medication Information (2.16.840.1.113883.3.88.11.83.8.2) is in the 
      wrong location. A HITSP/C83 Medication Information data element shall be represented as a CCD Manufactured 
      Product (2.16.840.1.113883.10.20.1.53).
      See HITSP/C83 Section 2.2.2.8.10 and rule C83-[DE-8-CDA-5].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication Information data elements SHALL declare conformance to the IHE Product Entry template by
      including a templateId element with the root attribute set to the value 1.3.6.1.4.1.19376.1.5.3.1.4.7.2.
      See HITSP/C83 Section 2.2.2.8.10 rule C83-[DE-8-CDA-4].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M62"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.2&#34;]/cda:manufacturedMaterial/cda:code"
                 priority="1001"
                 mode="M62">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.2&#34;]/cda:manufacturedMaterial/cda:code"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:originalText"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:originalText">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication Information, the product (generic) name SHALL appear in the originalText 
      element beneath the code.
      See HITSP/C83 Table 2-50 Data Element 8.15 and Section 2.2.2.8.13, rule C83-[DE-8.15-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M62"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.2&#34;]/cda:manufacturedMaterial/cda:code/cda:translation"
                 priority="1000"
                 mode="M62">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.2&#34;]/cda:manufacturedMaterial/cda:code/cda:translation"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(@codeSystem) and not(@code))                   or (@codeSystem=&#34;2.16.840.1.113883.6.88&#34; or @codeSystem=&#34;2.16.840.1.113883.6.69&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(@codeSystem) and not(@code)) or (@codeSystem=&#34;2.16.840.1.113883.6.88&#34; or @codeSystem=&#34;2.16.840.1.113883.6.69&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication Information, the coded brand name SHALL be coded as specified
      in HITSP/C80 Section 2.2.3.3.7 Medication Brand Name or Section 2.2.3.3.10 Medication 
      Packaged Product.
      See HITSP/C83 Section 2.2.2.8.12, rule C154-[DE-8.14-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M62"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M62"/>
   <xsl:template match="@*|node()" priority="-2" mode="M62">
      <xsl:apply-templates select="@*|*" mode="M62"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.8.3-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.3&#34;]"
                 priority="1001"
                 mode="M65">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:supply"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:supply">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Medication Order Information (2.16.840.1.113883.3.88.11.83.8.3) is in 
      the wrong location. A HITSP/C83 Order Information data element shall be represented as a CCD supply entry. 
      See HITSP/C83 Section 2.2.2.8.21 and C83-[DE-8-CDA-6].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.3&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.3&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication Order Information data elements SHALL declare conformance to the IHE Supply 
      Entry template by including a templateId element with the root attribute set to the value 
      1.3.6.1.4.1.19376.1.5.3.1.4.7.3.
      See HITSP/C83 Section 2.2.2.8.21, rule C83-[DE-8-CDA-7].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M65"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.3&#34;]/cda:quantity"
                 priority="1000"
                 mode="M65">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.3&#34;]/cda:quantity"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@value"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="@value">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the quantity ordered SHALL be recorded in the value attribute
      of quantity element inside a supply element used to record order information.
      See HITSP/C83 Section 2.2.2.8.23, rule C83-[DE-8.26-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@unit"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="@unit">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication Order Information, in Quantity the unit attribute SHALL be present.
      See HITSP/C83 Section 2.2.2.8.23, rule C83-[DE-8.26-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M65"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M65"/>
   <xsl:template match="@*|node()" priority="-2" mode="M65">
      <xsl:apply-templates select="@*|*" mode="M65"/>
   </xsl:template>

   <!--PATTERN p-2.16.840.1.113883.3.88.11.83.8-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]"
                 priority="1007"
                 mode="M68">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:substanceAdministration[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.24&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:substanceAdministration[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.24&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: The HITSP/C83 templateId for Medications - Administration Information 
      (2.16.840.1.113883.3.88.11.83.8) is in the wrong location. The HITSP/C83 Medications - 
      Administration Information data element shall be represented as a CCD Medication Activity 
      substanceAdministration (2.16.840.1.113883.10.20.1.24).
      See HITSP/C83 Section 2.2.2.8, Section 2.2.2.8.1 rule C83-[DE-8-CDA-1] and Table 2-12.    
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module Substance Administration SHALL also declare conformance to the IHE
      Medications entity by including a templateId element with the root attribute set to the value
      1.3.6.1.4.1.19376.1.5.3.1.4.7.
      See HITSP/C83 Section 2.2.2.8.1, rule C83-[DE-8-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:consumable/cda:manufacturedProduct[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:consumable/cda:manufacturedProduct[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Medication module shall contain a C83 Medication Information element represented 
     as a CCD Manufactured Product (2.16.840.1.113883.10.20.1.53). The HITSP/C83 templateId for Medication 
     Information (2.16.840.1.113883.3.88.11.83.8.2) SHALL be included on the CCD Manufactured Product.
     See HITSP/C83 Table 2-12 and Section 2.2.2.8.10.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:effectiveTime[1]) or cda:effectiveTime[1][@nullFlavor or @xsi:type=&#34;IVL_TS&#34; or @xsi:type=&#34;TS&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:effectiveTime[1]) or cda:effectiveTime[1][@nullFlavor or @xsi:type=&#34;IVL_TS&#34; or @xsi:type=&#34;TS&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the first effectiveTime SHALL use the IVL_TS data type unless
      for a single administration, in which case, it SHALL use the TS data type.
      See HITSP/C83 Section 2.2.2.8.4, rule C83-[DE-8-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:effectiveTime[2]) or cda:effectiveTime[2][@nullFlavor or @xsi:type=&#34;PIVL_TS&#34; or @xsi:type=&#34;EIVL_TS&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:effectiveTime[2]) or cda:effectiveTime[2][@nullFlavor or @xsi:type=&#34;PIVL_TS&#34; or @xsi:type=&#34;EIVL_TS&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the second effectiveTime shall use the PIVL_TS data type to 
      record details about frequency, interval, and duration and shall use the EIVL_TS data type to 
      record administration based on activities of daily living.
      See HITSP/C83 Table 2.2.2.8-2 and Section 2.2.2.8.4, rules C83-[DE-8.03-CDA-1], C83-[DE-8.04-CDA-1],
      and C83-[DE-8.05-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:effectiveTime[2][@xsi:type=&#34;PIVL_TS&#34;]) or cda:effectiveTime[2][@xsi:type=&#34;PIVL_TS&#34; and @institutionSpecified]/cda:period"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:effectiveTime[2][@xsi:type=&#34;PIVL_TS&#34;]) or cda:effectiveTime[2][@xsi:type=&#34;PIVL_TS&#34; and @institutionSpecified]/cda:period">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the second effectiveTime shall use the PIVL_TS data type to 
      record details about frequency, interval, and duration, shall use the institutionSpecified attribute 
      to distinguish between interval and frequency (true is frequency and false is interval), and shall 
      contain a period element to provide the timing of the interval or frequency.
      See HITSP/C83 Table 2.2.2.8-2 and Section 2.2.2.8.4, rules C83-[DE-8.03-CDA-1], C83-[DE-8.04-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:effectiveTime[2][@xsi:type=&#34;EIVL_TS&#34;]) or cda:effectiveTime[2][@xsi:type=&#34;EIVL_TS&#34;]/cda:event"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:effectiveTime[2][@xsi:type=&#34;EIVL_TS&#34;]) or cda:effectiveTime[2][@xsi:type=&#34;EIVL_TS&#34;]/cda:event">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the second effectiveTime shall use the EIVL_TS data type to 
      indicate administration based on activities of daily living and shall identify the events which 
      trigger administration in a cda:event element beneath the effectiveTime element.
      See HITSP/C83 Table 2.2.2.8-2 and Section 2.2.2.8.4, rule C83-[DE-8.05-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:routeCode[@code and @codeSystem]) or cda:routeCode[@code and @codeSystem=&#34;2.16.840.1.113883.3.26.1.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:routeCode[@code and @codeSystem]) or cda:routeCode[@code and @codeSystem=&#34;2.16.840.1.113883.3.26.1.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, Route of Administration SHALL be coded as specified in
      HITSP/C80 Section 2.2.3.3.4.1 Medication Route FDA.
      See HITSP/C83 Section 2.2.2.8.5, rule C83-[DE-8.07-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:approachSiteCode[@code and @codeSystem]) or cda:approachSiteCode[@code and @codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:approachSiteCode[@code and @codeSystem]) or cda:approachSiteCode[@code and @codeSystem=&#34;2.16.840.1.113883.6.96&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the Site SHALL be coded as specified in HITSP/C80 Section
      2.2.3.2.1 Body Site.
      See HITSP/C83 Section 2.2.2.8.7, rule C154-[DE-8.09-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:administrationUnitCode[@code and @codeSystem]) or cda:administrationUnitCode[@code and @codeSystem=&#34;2.16.840.1.113883.3.26.1.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:administrationUnitCode[@code and @codeSystem]) or cda:administrationUnitCode[@code and @codeSystem=&#34;2.16.840.1.113883.3.26.1.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the Product Form SHALL be coded as specified in HITSP/C80 Section
      2.2.3.3.3 Medication Product Form.
      See HITSP/C83 Section 2.2.2.8.8, rule C154-[DE-8.11-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship[@typeCode=&#34;RSON&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.28&#34;]"
                 priority="1006"
                 mode="M68">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship[@typeCode=&#34;RSON&#34;]/cda:observation[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.28&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference/@value"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference/@value">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the indication observation SHALL contain a text element
      that includes a reference element whose value attribute points to the narrative text that is 
      the indication for the medication
      See HITSP/C83 Section 2.2.2.8.18, rule C83-[DE-8.20-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and @code]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.96&#34; and @code]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, the indication SHALL be coded as specified in HITSP/C80 
      Section 2.2.3.1.1 Problem.
      See HITSP/C83 Section 2.2.2.8.18, rule C154-[DE-8.20-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.49&#34;]"
                 priority="1005"
                 mode="M68">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:act[cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.49&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, Medication Information data elements SHALL declare conformance 
      to the IHE Patient Medication Instructions template by including a templateId element with the root 
      attribute set to the value 1.3.6.1.4.1.19376.1.5.3.1.4.3.
      See HITSP/C83 Section 2.2.2.8.1, rule C83-[DE-8.22-CDA-1].

   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:participant/cda:participantRole[cda:code/@code=&#34;412307009&#34; and cda:code/@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"
                 priority="1004"
                 mode="M68">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:participant/cda:participantRole[cda:code/@code=&#34;412307009&#34; and cda:code/@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="parent::cda:participant[@typeCode=&#34;CSM&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="parent::cda:participant[@typeCode=&#34;CSM&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, Vehicle, the typeCode attribute of the participant element SHALL
      be CSM.
      See HITSP/C83 Section 2.2.2.8.20, rule C83-[DE-8.24-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:participantRole[@classCode=&#34;MANU&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:participantRole[@classCode=&#34;MANU&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, Vehicle, the classCode of the participantRole SHALL be MANU.
      See HITSP/C83 Section 2.2.2.8.20, rule C83-[DE-8.24-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:playingEntity/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:playingEntity/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, Vehicle, the name element in the playingEntity element SHALL 
      record the name of the drug vehicle.
      See HITSP/C83 Section 2.2.2.8.20, rule C83-[DE-8.24-CDA-5].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:act[cda:templateId/@root=&#34;2.16.840.1.113883&#34;]"
                 priority="1003"
                 mode="M68">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:act[cda:templateId/@root=&#34;2.16.840.1.113883&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, Fulfillment instructions data elements SHALL declare conformance 
      to the IHE Medication Fulfillment Instructions template by including a templateId element with the root
      attribute set to the value 1.3.6.1.4.1.19376.1.5.3.1.4.3.1.
      See HITSP/C83 Section 2.2.2.8.24, rule C83-[DE-8.32-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:supply[@moodCode=&#34;EVN&#34;]/cda:id"
                 priority="1002"
                 mode="M68">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:supply[@moodCode=&#34;EVN&#34;]/cda:id"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@extension"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="@extension">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, Fulfillment History prescription number SHALL be recorded in the 
      extension attribute of the id element within a supply element having a moodCode attribute of EVN.
      See HITSP/C83 Section 2.2.2.8.25, rule C83-[DE-8.34.CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:supply[@moodCode=&#34;EVN&#34;]/cda:performer/cda:assignedEntity"
                 priority="1001"
                 mode="M68">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:supply[@moodCode=&#34;EVN&#34;]/cda:performer/cda:assignedEntity"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedPerson or cda:representedOrganization"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:assignedPerson or cda:representedOrganization">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, in Fulfillment History Provider at least one of assignedPerson
      or representedOrganization elements SHALL appear inside the assignedEntity to indicate the name of
      the person or the organization fulfilling the prescription.
      See HITSP/C83 Section 2.2.2.8.22, rule C83-[DE-8.35-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:assignedPerson) or cda:assignedPerson/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:assignedPerson) or cda:assignedPerson/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, in Fulfillment History Provider the name of the person SHALL 
      appear in the name element of the assignedPerson element beneath the assignedEntity element.
      See HITSP/C83 Section 2.2.2.8.22, rule C83-[DE-8.35-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:representedOrganization) or cda:representedOrganization/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:representedOrganization) or cda:representedOrganization/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, in Fulfillment History Provider the name of the organization 
      SHALL appear in the name element of the representedOrganization element beneath the assignedEntity
      element.
      See HITSP/C83 Section 2.2.2.8.22 Rule C83-[DE-8.35-CDA-4].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:supply[@moodCode=&#34;EVN&#34;]/cda:statusCode"
                 priority="1000"
                 mode="M68">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;]/cda:entryRelationship/cda:supply[@moodCode=&#34;EVN&#34;]/cda:statusCode"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@code=&#34;completed&#34; or @code=&#34;aborted&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@code=&#34;completed&#34; or @code=&#34;aborted&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Medication module, in Fill Status the statusCode attribute SHALL contain be coded 
      as specified in HITSP/C80 Section 2.2.3.3.1 Medication Fill Status (completed or aborted ONLY).
      See HITSP/C83 Section 2.2.2.8.25 Rule C83-[DE-8.40-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M68"/>
   <xsl:template match="@*|node()" priority="-2" mode="M68">
      <xsl:apply-templates select="@*|*" mode="M68"/>
   </xsl:template>

   <!--PATTERN p-C83_2.2.1-errorsC83 Section 2.2.1-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">C83 Section 2.2.1</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.101&#34;]"
                 priority="1027"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.101&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Payer section SHALL conform to the IHE Payers Section
          template, and SHALL contain a templateId element whose root attribute is 
          1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7.
          See HITSP/C83 Section 2.2.1.1, rule C83-[CT-101-1]. 
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.102&#34;]"
                 priority="1026"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.102&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.6&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, an Allergies and Other Adverse Reactions Section SHALL include
          entries from the Allergy/Drug Sensitivity module (2.16.840.1.113883.3.88.11.83.6).
          See HITSP/C83 Section 2.2.1.2, rule C83-[CT-102-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.13&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.13&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, an Allergies and Other Adverse Reactions Section SHALL conform 
          to the IHE Allergies and Other Adverse Reactions Section template, and SHALL contain a
          templateId element whose root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.13.
          See HITSP/C83 Section 2.2.1.2, rule C83-[CT-102-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.103&#34;]"
                 priority="1025"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.103&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Problem List section SHALL include entries from 
          the Condition module.
          See HITSP/C83 Section 2.2.1.3, rule C83-[CT-103-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.6&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.6&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Problem List section SHALL conform to the IHE Active 
          Problems Section template, and SHALL contain a templateId element whose
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.6.
          See HITSP/C83 Section 2.2.1.3, rule C83-[CT-103-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.104&#34;]"
                 priority="1024"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.104&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the History of Past Illness section SHALL include entries from
          the Condition module.
          See HITSP/C83 Section 2.2.1.4, rule C83-[CT-104-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.8&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.8&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the History of Past Illness section SHALL conform to the IHE History
          of Past Illness Section template, and SHALL contain a templateId element whose
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.8.
          See HITSP/C83 Section 2.2.1.4, rule C83-[CT-104-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.9&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.9&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the History of Past Illness section SHALL conform to the HL7 
          History and Physical Note and HL7 Consultation Note implementation guide requirements for this 
          section, and SHALL contain a templateId element whose root attribute is 2.16.840.1.113883.10.20.2.9.
          See HITSP/C83 Section 2.2.1.4, rule C83-[CT-104-3].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.105&#34;]"
                 priority="1023"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.105&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Chief Complaint section SHALL conform to the IHE Chief
          Complaint Section template, and SHALL contain a templateId element whose
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1.
          See HITSP/C83 Section 2.2.1.5, rule C83-[CT-105-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.8&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.8&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Chief Complaint section SHALL conform to the HL7 History and 
          Physical Note requirements for this section, and SHALL contain a templateId element whose root attribute 
          is 2.16.840.1.113883.10.20.2.8.
          See HITSP/C83 Section 2.2.1.5, rule C83-[CT-105-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.106&#34;]"
                 priority="1022"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.106&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.1&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.1&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Reason for Referral section SHALL conform to the IHE Reason
          for Referral Section template, and SHALL contain a templateId element whose
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.1.
          See HITSP/C83 Section 2.2.1.6, rule C83-[CT-106-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.4.8&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.4.8&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Reason For Referral section SHALL conform to the HL7 Consultation 
          Note requirements for this section, and SHALL contain a templateId element whose root attribute is
          2.16.840.1.113883.10.20.4.8.
          See HITSP/C83 Section 2.2.1.6, rule C83-[CT-106-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.107&#34;]"
                 priority="1021"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.107&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.4&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.4&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the History of Present Illness section SHALL conform to the IHE History
          of Present Illness Section template, and SHALL contain a templateId element whose
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.4.
          See HITSP/C83 Section 2.2.1.7, rule C83-[CT-107-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.108&#34;]"
                 priority="1020"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.108&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.12&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.12&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the List of Surgeries section SHALL conform to the IHE Coded
          List of Surgeries template, and SHALL contain a templateId element whose
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.12
          See HITSP/C83 Section 2.2.1.8, rule C83-[CT-108-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.17&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.17&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the List of Surgeries section SHALL include entries from
          the Procedure module.
          See HITSP/C83 Section 2.2.1.8, rule C83-[CT-108-2].   
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.109&#34;]"
                 priority="1019"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.109&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.5&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.5&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Functional Status section SHALL conform to the 
          Continuity of Care Document Functional Status section described in section 3.4 of the CCD
          specification and, SHALL contain a templateId element whose root attribute is
          2.16.840.1.113883.10.20.1.5.
          See HITSP/C83 Section 2.2.1.9, rule C83-[CT-109-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.110&#34;]"
                 priority="1018"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.110&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.3&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.3&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Hospital Admisstion Diagnosis section SHALL conform 
          to the IHE Hospital Admission Diagnosis section and SHALL contain a templateId element whose 
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.3.
          See HITSP/C83 Section 2.2.1.10, rule C83-[CT-110-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Hospital Admission Diagnosis section SHALL include an entry from the 
          Condition module to provide the admission diagnosis in coded form.
          See HITSP/C83 Section 2.2.1.10, rule C83-[CT-110-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.111&#34;]"
                 priority="1017"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.111&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Discharge Diagnosis section SHALL conform to the
          IHE Hospital Discharge Diagnosis section and SHALL contain a templateId element whose
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.7.
          See HITSP/C83 Section 2.2.1.11, rule C83-[CT-111-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Discharge Diagnosis section SHALL include entries from the Condition 
          module to provide the discharge diagnosis in coded form. 
          See HITSP/C83 Section 2.2.1.11 Rule C83-[CT-111-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.112&#34;]"
                 priority="1016"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.112&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.19&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.19&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Medications section SHALL conform to the IHE Medications
          section, and SHALL contain a templateId element whose root attribute is
          1.3.6.1.4.1.19376.1.5.3.1.3.19.
          See HITSP/C83 Section 2.2.1.12, rule C83-[CT-112-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Medications section SHALL include entries from the
          Medication module to provide the relevant medications in coded form.
          See HITSP/C83 Section 2.2.1.12, rule C83-[CT-112-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.113&#34;]"
                 priority="1015"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.113&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.20&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.20&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Admission Medications History section SHALL conform to the 
          IHE Medications section, and SHALL contain a templateId element whose root attribute is
          1.3.6.1.4.1.19376.1.5.3.1.3.20.
          See HITSP/C83 Section 2.2.1.13, rule C83-[CT-113-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Admission Medications History section SHALL include entries from the 
          Medication module to provide the relevant medications of a patient prior to admission in coded form.
          See HITSP/C83 Section 2.2.1.13, rule C83-[CT-113-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.114&#34;]"
                 priority="1014"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.114&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.22&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.22&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Hospital Discharge Medications section SHALL conform to the
          IHE Hospital Discharge Medications section, and SHALL contain a templateId element whose root attribute is
          1.3.6.1.4.1.19376.1.5.3.1.3.22.
          See HITSP/C83 Section 2.2.1.14, rule C83-[CT-114-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the hospital discharge medications history section SHALL include entries from the
          Medication module to provide the relevant medications of a patient for use after discharge in coded form.
          See HITSP/C83 Section 2.2.1.14, rule C83-[CT-114-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.115&#34;]"
                 priority="1013"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.115&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.21&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.21&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Medications Administered section SHALL conform to the
          IHE Medications Administered section, and SHALL contain a templateId element whose root attribute is
          1.3.6.1.4.1.19376.1.5.3.1.3.21.
          See HITSP/C83 Section 2.2.1.15, rule C83-[CT-115-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.8&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the medications administered section SHALL include entries from the
          Medication module to provide the relevant medications administered to a patient in coded form.
          See HITSP/C83 Section 2.2.1.15, rule C83-[CT-115-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.116&#34;]"
                 priority="1012"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.116&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.35&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.35&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Advance Directives section SHALL conform to the 
          IHE Coded Advance Directives section, and SHALL contain a templateId element whose
          root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.35.
          See HITSP/C83 Section 2.2.1.16, rule C83-[CT-116-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.12&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.12&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Advance Directives section SHALL include entries 
          from the Advance Directive module.
          See HITSP/C83 Section 2.2.1.16, rule C83-[CT-116-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.117&#34;]"
                 priority="1011"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.117&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.23&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.23&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Immunizations section SHALL conform to the IHE Immunizations
          section, and SHALL contain a templateId element whose root attribute
          is 1.3.6.1.4.1.19376.1.5.3.1.3.23.
          See HITSP/C83 Section 2.2.1.17, rule C83-[CT-117-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.13&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.13&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Immunizations section SHALL include entries from the 
          Immunization module.
          See HITSP/C83 Section 2.2.1.17, rule C83-[CT-117-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.118&#34;]"
                 priority="1010"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.118&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.15&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.15&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Physical Examination section SHALL conform to the IHE Physical
          Examination section, and SHALL contain a templateId element whose root attribute
          is 1.3.6.1.4.1.19376.1.5.3.1.1.9.15.
          See HITSP/C83 Section 2.2.1.18, rule C83-[CT-118-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.10&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.10&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Physical Examination section SHALL conform to the HL7 History and Physical 
          Note and HL7 Consultation Note requirements for this section, and SHALL contain a templateId element whose root 
          attribute is 2.16.840.1.113883.10.20.2.10.
          See HITSP/C83 Section 2.2.1.18, rule C83-[CT-118-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.119&#34;]"
                 priority="1009"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.119&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Vital Signs section SHALL conform to the IHE Coded Vital Signs
          section, and SHALL contain a templateId element whose root
          attribute is 1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2.
          See HITSP/C83 Section 2.2.1.19, rule C83-[CT-119-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.14&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.14&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Vital Signs section SHALL contain entries conforming to
          the Vital Sign module.
          See HITSP/C83 Section 2.2.1.19, rule C83-[CT-119-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.120&#34;]"
                 priority="1008"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.120&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.18&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.18&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Review of Systems section SHALL conform to the IHE Review
          of Systems section, and SHALL contain a templateId element whose root
          attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.18.
          See HITSP/C83 Section 2.2.1.20, rule C83-[CT-120-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.4.10&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.4.10&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Review of Systems section SHALL conform to the HL7 Consultation Note 
          requirements for this section, and SHALL contain a templateId element whose root attribute is 
          2.16.840.1.113883.10.20.4.10.
          See HITSP/C83 Section 2.2.1.20, rule C83-[CT-120-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.121&#34;]"
                 priority="1007"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.121&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.5&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.5&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Hospital Course section SHALL conform to the IHE Hospital
          Course section, and SHALL contain a templateId element whose root
          attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.5.
          See HITSP/C83 Section 2.2.1.21, rule C83-[CT-121-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.122&#34;]"
                 priority="1006"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.122&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.28&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.28&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Diagnostic Results section SHALL conform to the IHE 
          Coded Results section, and SHALL contain a templateId element whose root
          attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.28.
          See HITSP/C83 Section 2.2.1.22, rule C83-[CT-122-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.17&#34; and                      .//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.15.1&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.17&#34; and .//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.15.1&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Diagnostic Results section SHALL include entries from the Procedure 
          module to indicate the diagnostic procedure, and the Result module to provide the results of that procedure.
          See HITSP/C83 Section 2.2.1.22, rule C83-[CT-122-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.123&#34;]"
                 priority="1005"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.123&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Assessment and Plan section SHALL conform to the IHE Assessment
          and Plan section, and SHALL contain a templateId element whose root attribute is 
          1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5.
          See HITSP/C83 Section 2.2.1.23, rule C83-[CT-123-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Assessment and Plan section SHALL conform to the HL7 History and Physical
          Note and HL7 Consultation Node requirements for this section amd SHALL contain a templateId element whose root
          attribute is 2.16.840.1.113883.10.20.2.7
          See HITSP/C83 Section 2.2.1.23, rule C83-[CT-123-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.124&#34;]"
                 priority="1004"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.124&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.31&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.31&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Plan of Care section SHALL conform to the IHE Care Plan section,
          and SHALL contain a templateId element whose root attribute is
          1.3.6.1.4.1.19376.1.5.3.1.3.31.
          See HITSP/C83 Section 2.2.1.24, rule C83-[CT-124-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.2.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Plan of Care section SHALL conform to the HL7 History and Physical
          Note and HL7 Consultation Note requirements for this section, and
          SHALL contain a templateId element whose root attribute is 2.16.840.1.113883.10.20.2.7
          See HITSP/C83 Section 2.2.1.24, rule C83-[CT-124-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.125&#34;]"
                 priority="1003"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.125&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.14&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.14&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Family History section SHALL conform to the IHE Family Medical
          History section, and SHALL contain a templateId element whose root attribute is 
          1.3.6.1.4.1.19376.1.5.3.1.3.14.
          See HITSP/C83 Section 2.2.1.25, rule C83-[CT-125-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.126&#34;]"
                 priority="1002"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.126&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.16&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.16&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Social History section SHALL conform to the IHE Social History 
          section, and SHALL contain a templateId element whose root attribute is 1.3.6.1.4.1.19376.1.5.3.1.3.16.
          See HITSP/C83 Section 2.2.1.26, Rule C83-[CT-126-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.127&#34;]"
                 priority="1001"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.127&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Encounters section SHALL conform to the IHE Encounters History
          section, and SHALL contain a templateId element whose root
          attribute is 1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3.
          See HITSP/C83 Section 2.2.1.27, rule C83-[CT-127-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.16&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.16&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Encounters section SHALL contain entries conforming to the
          Encounter module.
          See HITSP/C83 Section 2.2.1.27, rule C83-[CT-127-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.128&#34;]"
                 priority="1000"
                 mode="M71">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;2.16.840.1.113883.3.88.11.83.128&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.7&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;2.16.840.1.113883.10.20.1.7&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Medical Equipment section SHALL conform to the HL7 CCD Section,
          and SHALL contain a templateId element whose root attribute is 2.16.840.1.113883.10.20.1.7.
          See HITSP/C83 Section 2.2.1.28, rule C83-[CT-128-1].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: HITSP/C83 Clinical Document, the Medical Equipment Section SHALL conform to the IHE Medical 
          Devices Section, and SHALL contain a templateId element whose root attribute is 
          1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5.
          See HITSP/C83 Section 2.2.1.28, rule C83-[CT-128-2].
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M71"/>
   <xsl:template match="@*|node()" priority="-2" mode="M71">
      <xsl:apply-templates select="@*|*" mode="M71"/>
   </xsl:template>

   <!--PATTERN p-C83_2.2.2.10-errors-->


	<!--RULE -->
<xsl:template match="cda:ClinicalDocument/cda:author[1] |                 //cda:encounter/cda:author[1] |                 //cda:observation/cda:author[1] |                 //cda:organizer/cda:author[1] |                 //cda:procedure/cda:author[1] |                 //cda:section/cda:author[1] |                 //cda:substanceAdministration/cda:author[1] |                 //cda:supply/cda:author[1]"
                 priority="1002"
                 mode="M74">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="cda:ClinicalDocument/cda:author[1] |                 //cda:encounter/cda:author[1] |                 //cda:observation/cda:author[1] |                 //cda:organizer/cda:author[1] |                 //cda:procedure/cda:author[1] |                 //cda:section/cda:author[1] |                 //cda:substanceAdministration/cda:author[1] |                 //cda:supply/cda:author[1]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:time) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:time) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Information Source, Author Time is a required, non-repeating data element.
      See HITSP/C83 Table 2-52, Data Element 10.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:assignedAuthor/cda:assignedPerson/cda:name) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:assignedAuthor/cda:assignedPerson/cda:name) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Information Source, Author Name is a required, non-repeating data element.
      See HITSP/C83 Table 2-52, Data Element 10.02.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M74"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:externalDocument][parent::cda:reference]" priority="1001"
                 mode="M74">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[self::cda:externalDocument][parent::cda:reference]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:id) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:id) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Information Source, Reference Document ID is a required, non-repeating data element.
      See HITSP/C83 Table 2-52, Data Element 10.04.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M74"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[self::cda:informant]" priority="1000" mode="M74">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="*[self::cda:informant]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedEntity/cda:assignedPerson/cda:name or                  cda:assignedEntity/cda:representedOrganization/cda:name or                   cda:relatedEntity/cda:relatedPerson/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:assignedEntity/cda:assignedPerson/cda:name or cda:assignedEntity/cda:representedOrganization/cda:name or cda:relatedEntity/cda:relatedPerson/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Information Source, Information Source Name is a required, non-repeating data element.
      See HITSP/C83 Table 2-52, Data Element 10.06 and Section 2.2.2.10.1 rules C83-[DE-10.02-CDA-1] and
      C83-[DE-10.02-CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M74"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M74"/>
   <xsl:template match="@*|node()" priority="-2" mode="M74">
      <xsl:apply-templates select="@*|*" mode="M74"/>
   </xsl:template>

   <!--PATTERN p-C83_2.2.2.1-errors-->


	<!--RULE -->
<xsl:template match="/cda:ClinicalDocument" priority="1009" mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="/cda:ClinicalDocument"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:effectiveTime) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:effectiveTime) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information shall contain a single, non-repeating Document Timestamp.
      See Table 2-5, Data Element 1.01.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:recordTarget/cda:patientRole) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:recordTarget/cda:patientRole) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information shall contain a single, non-repeating Patient Information
      Entry.
      See Table 2-5.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole" priority="1008"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:id) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:id) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information -- Patient Information Entry shall contain a
      single non-repeating Person ID.
      See Table 2-5, Data Element 1.02.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:addr"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:addr">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information -- Patient Information Entry shall contain one
      or more Person Address.
      See Table 2-5, Data Element 1.03.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:telecom"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:telecom">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information -- Patient Information Entry shall contain one
      or more Person Phone / Email / URL.
      See Table 2-5, Data Element 1.04.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient"
                 priority="1007"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information shall contain one or more Person Name.
      See Table 2-5, Data Element 1.05.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:administrativeGenderCode/@code) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:administrativeGenderCode/@code) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information shall contain a single, non-repeating Gender.
      See Table 2-5, Data Element 1.06.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:birthTime) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:birthTime) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information shall contain a single, non-repeating Person
      Date of Birth.
      See Table 2-5, Data Element 1.07.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:addr[@use=&#34;HP&#34;]) &lt; 2"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:addr[@use=&#34;HP&#34;]) &lt; 2">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, at most one address for a person SHALL have a use
      attribute with a value containing "HP".
      See Section 2-5, rule C83-[DE-1.03-CDA-5].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:name[@use=&#34;L&#34;]) &lt; 2"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:name[@use=&#34;L&#34;]) &lt; 2">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, at most one name tag shall have a use attribute
      containing the value "L", indicating that it is the legal name of the patient.
      See Section 2.2.2.1.1, rule C83-[DE-1.05-CDA-5].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:addr"
                 priority="1006"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:addr"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@nullFlavor or (cda:country | cda:state | cda:city | cda:streetAddressLine | cda:postalCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@nullFlavor or (cda:country | cda:state | cda:city | cda:streetAddressLine | cda:postalCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, for the address parts that are known, they shall be identified using the 
      streetAddressLine, city, state, postalCode and country tags.
      See Section 2.2.2.1.2 rule C83-[DE-1.03-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:streetAddressLine) &lt; 5"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:streetAddressLine) &lt; 5">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, patient address shall contain no more than 4 
      streetAddressLine elements.
      See Section 2.2.2.1.2 rule C83-[DE-1.03-CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:name"
                 priority="1005"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:name"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@nullFlavor or cda:given or cda:family or cda:prefix or cda:suffix"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@nullFlavor or cda:given or cda:family or cda:prefix or cda:suffix">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, for patient person name each name part SHALL be identified
      using one of the tags: given, family, prefix or suffix.
      See Section 2.2.2.1.1, rule C83-[DE-1.05-CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:administrativeGenderCode"
                 priority="1004"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:administrativeGenderCode"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(@codeSystem=&#34;2.16.840.1.113883.5.1&#34; and (@code=&#34;F&#34; or @code=&#34;M&#34; or @code=&#34;UN&#34;))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(@codeSystem=&#34;2.16.840.1.113883.5.1&#34; and (@code=&#34;F&#34; or @code=&#34;M&#34; or @code=&#34;UN&#34;))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: HITSP/C83 Personal Information, Gender SHALL be coded as specified in HITSP/C80 
     Section 2.2.1.2.1.2 V3 Administrative Gender.
     See Section 2.2.2.1.4, rule C83-[DE-1.06-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:maritalStatusCode"
                 priority="1003"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:maritalStatusCode"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(@codeSystem) and not(@code)) or                  (@codeSystem=&#34;2.16.840.1.113883.5.2&#34; and                    (@code=&#34;A&#34; or                    @code=&#34;D&#34; or                    @code=&#34;I&#34; or                    @code=&#34;L&#34; or                    @code=&#34;M&#34; or                    @code=&#34;P&#34; or                    @code=&#34;S&#34; or                    @code=&#34;T&#34; or                    @code=&#34;W&#34;))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(@codeSystem) and not(@code)) or (@codeSystem=&#34;2.16.840.1.113883.5.2&#34; and (@code=&#34;A&#34; or @code=&#34;D&#34; or @code=&#34;I&#34; or @code=&#34;L&#34; or @code=&#34;M&#34; or @code=&#34;P&#34; or @code=&#34;S&#34; or @code=&#34;T&#34; or @code=&#34;W&#34;))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, Marital Status SHALL be coded as specified in 
      HITSP/C80 Section 2.2.1.2.3.2 Marital Status CDA and HLV3.
      See Section 2.2.2.1.5, rule C83-[DE-1.08-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:religiousAffiliationCode"
                 priority="1002"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:religiousAffiliationCode"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(@codeSystem) and not(@code)) or                  (@codeSystem=&#34;2.16.840.1.113883.5.1076&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(@codeSystem) and not(@code)) or (@codeSystem=&#34;2.16.840.1.113883.5.1076&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, Religious affiliation SHALL be coded as 
      specified in HITSP/C80 Section 2.2.1.2.8 Religious Affiliation.
      See Section 2.2.2.1.8, rule C83-[DE-1.10--1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:raceCode |                 /cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/sdtc:raceCode"
                 priority="1001"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:raceCode |                 /cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/sdtc:raceCode"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(@codeSystem) and not(@code)) or                  (@codeSystem=&#34;2.16.840.1.113883.6.238&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(@codeSystem) and not(@code)) or (@codeSystem=&#34;2.16.840.1.113883.6.238&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, Race SHALL be coded as specified in HITSP/C80
      Section 2.2.1.2.7 Race.
      See Section 2.2.2.1.6, rule C83-[DE-1.09-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:ethnicGroupCode"
                 priority="1000"
                 mode="M77">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="/cda:ClinicalDocument/cda:recordTarget/cda:patientRole/cda:patient/cda:ethnicGroupCode"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(@codeSystem) and not(@code)) or                  (@codeSystem=&#34;2.16.840.1.113883.6.238&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(@codeSystem) and not(@code)) or (@codeSystem=&#34;2.16.840.1.113883.6.238&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Personal Information, Ethnicity SHALL be coded as specified in
      HITSP/C80 Section 2.2.1.2.2 Ethnicity.
      See Section 2.2.2.1.7, rule C83-[DE-1.11-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M77"/>
   <xsl:template match="@*|node()" priority="-2" mode="M77">
      <xsl:apply-templates select="@*|*" mode="M77"/>
   </xsl:template>

   <!--PATTERN p-C83_2.2-errors-->


	<!--RULE -->
<xsl:template match="/cda:ClinicalDocument" priority="1000" mode="M80">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="/cda:ClinicalDocument"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:ClinicalDocument"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:ClinicalDocument">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Clinical Document, the top-level element SHALL be a ClinicalDocument element
      in accordance with CDA R2 specification.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:realmCode/@code=&#34;US&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:realmCode/@code=&#34;US&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Clinical Document: A clinical document created using this specification SHALL
      contain a realmCode element with a value of US in the code attribute indicating that it conforms 
      to US realm requirements.
      See HITSP/C83 Section 2.2 Rule C83-[CDA-1].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.1&#34; and not(@extension)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.1&#34; and not(@extension)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Clinical Document: A clinical document created using this specification SHALL 
      contain the templateId element with a value of 1.3.6.1.4.1.19376.1.5.3.1.1.1 in the root 
      attribute and no extension attribute indicating that it conforms to the IHE PCC Medical 
      Documents specification.
      See HITSP/C83 Section 2.2 Rule C83-[CDA-2].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.3&#34; and not(@extension)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.3&#34; and not(@extension)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: HITSP/C83 Clinical Document: A clinical document created using this specification SHALL 
      contain the templateId element with a value of 2.16.840.1.113883.10.20.3 in the root attribute 
      and no extension attribute, indicating that it conforms to the HL7 General Header constraints 
      defined in the HL7 Implementation Guide for History and Physical Notes.
      See HITSP/C83 Section 2.2 Rule C83-[CDA-3].
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M80"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M80"/>
   <xsl:template match="@*|node()" priority="-2" mode="M80">
      <xsl:apply-templates select="@*|*" mode="M80"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2-errorsIHE PCC Transport Mode - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Transport Mode - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2&#34;]"
                 priority="1000"
                 mode="M83">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Transport Mode (1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2), the Transport Mode can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11459-5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11459-5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Transport Mode (1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2), the section type code of a Transport Mode must be 11459-5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Transport Mode (1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Transport Mode (1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2), a Transport Mode must contain a Transport Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.10.3.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M83"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M83"/>
   <xsl:template match="@*|node()" priority="-2" mode="M83">
      <xsl:apply-templates select="@*|*" mode="M83"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1-errorsIHE PCC Transport - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Transport - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1&#34;]"
                 priority="1000"
                 mode="M85">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Transport Entry (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1), the Transport entry must have an identifier 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Transport Entry (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1), the effectiveTime element shall be sent. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:low"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime/cda:low">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Transport Entry (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1), the effectiveTime/low element shall be sent using the TS
       data type.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:high[@value or @nullFlavor]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:effectiveTime/cda:high[@value or @nullFlavor]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Transport Entry (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.1), the effectiveTime/high element records the time of
      arrival. If unknown, it must be recorded using a flavor of null. This element shall be sent using the TS data type.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M85"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M85"/>
   <xsl:template match="@*|node()" priority="-2" mode="M85">
      <xsl:apply-templates select="@*|*" mode="M85"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2-errorsIHE PCC Encounter Disposition - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Encounter Disposition - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2&#34;]"
                 priority="1000"
                 mode="M87">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2), &lt;id&gt; element is required.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2),  the required &lt;code&gt; element indicates the
       disposition of the patient.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2), the &lt;text&gt; element shall contain a
       reference to the narrative text describing the disposition of the patient.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(./@moodCode=&#34;EVN&#34;) or cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(./@moodCode=&#34;EVN&#34;) or cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2), when the disposition act has occurred 
       (moodCode='EVN'), the statusCode element shall be present, and shall contain the value 'completed'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(./@moodCode=&#34;INT&#34;) or cda:statusCode[@code=&#34;normal&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(./@moodCode=&#34;INT&#34;) or cda:statusCode[@code=&#34;normal&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2), when the disposition act is intended
       (moodCode='INT') the statusCode element shall contain the value 'normal'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(./@moodCode=&#34;EVN&#34;) or cda:effectiveTime"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(./@moodCode=&#34;EVN&#34;) or cda:effectiveTime">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2), when the disposition has occurred 
       effectiveTime shall be sent, and indicates the effective time for the disposition process.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(./@moodCode=&#34;EVN&#34;) or cda:performer"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(./@moodCode=&#34;EVN&#34;) or cda:performer">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2), when the disposition is in event mood,
       the performer element is required.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(./@moodCode=&#34;EVN&#34;) or cda:performer/cda:assignedEntity/cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(./@moodCode=&#34;EVN&#34;) or cda:performer/cda:assignedEntity/cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2), the &lt;id&gt; element of the
       assignedEntity of the performer shall be sent when the disponsition
       has occurred, and identifies the performer of the act.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:performer/cda:assignedEntity) or cda:performer/cda:assignedEntity/cda:assignedPerson"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:performer/cda:assignedEntity) or cda:performer/cda:assignedEntity/cda:assignedPerson">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounter Disposition (1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2), the &lt;assignedPerson&gt; element of
       an assignedPerson of the performer shall be sent to identify the
       person who performed the disposition of the patient. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M87"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M87"/>
   <xsl:template match="@*|node()" priority="-2" mode="M87">
      <xsl:apply-templates select="@*|*" mode="M87"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1&#34;]"
                 priority="1000"
                 mode="M89">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Estimated Due Dates Section (1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1), the Estimated Due Dates 
      Section can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;(xx-edd-section)&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code = &#34;(xx-edd-section)&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Estimated Due Dates Section (1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1), the section type code of a 
      Estimated Due Dates Section must be (xx-edd-section) 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Estimated Due Dates Section (1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Estimated Due Dates Section (1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1), an Estimated Due Dates Section 
      must contain Estimated Due Date Observation.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.1 
      This is a simple observation to represent the estimated due date with a supporting 
      observation or observations that state the method used and date implied by that method. 
      If one observation is present, then it is to be interpreted as the initial EDD. If the 
      initial observation dates indicate the EDD is within  the 18 to 20 weeks completed gestation, 
      that observation will also populate the 18-20 week update.  If the initial observation 
      indicates an EDD of more than 20 weeks EGA, then no value will be placed in the 18-20 week update field.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M89"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M89"/>
   <xsl:template match="@*|node()" priority="-2" mode="M89">
      <xsl:apply-templates select="@*|*" mode="M89"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2&#34;]"
                 priority="1000"
                 mode="M92">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Visit Summary (1.3.6.1.4.1.19376.1.5.3.1.11.2.2.2), the Visit Summary can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;(xx-acog-visit-sum-section)&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code = &#34;(xx-acog-visit-sum-section)&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Visit Summary (1.3.6.1.4.1.19376.1.5.3.1.11.2.2.2), the section type code of a Visit Summary must be 
     (xx-acog-visit-sum-section). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Visit Summary (1.3.6.1.4.1.19376.1.5.3.1.11.2.2.2), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC Visit Summary (1.3.6.1.4.1.19376.1.5.3.1.11.2.2.2), a(n) Visit Summary must contain Simple Observation.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2 
     The flowsheet contains one simple observation to represent the Prepregancy Weight.  This observation SHALL be valued with the LOINC code 8348-5, BODY WEIGHT^PRE PREGNANCY-MASS-PT-QN-MEASURED.  The value SHALL be of type PQ.  The units may be either "lb_av" or "kg".
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC Visit Summary (1.3.6.1.4.1.19376.1.5.3.1.11.2.2.2), a(n) Visit Summary must contain Antepartum Flowsheet Panel.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2 
     Other entries on the flowsheet are "batteries" which represent a single visit.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:observation/cda:code[@code=&#34;8348-5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:observation/cda:code[@code=&#34;8348-5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: In IHE PCC Visit Summary (1.3.6.1.4.1.19376.1.5.3.1.11.2.2.2), the Visit Summary must have at least one simple 
     observation with the LOINC code 8348-5 to represent the prepregnancy weight.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:observation[cda:code/@code='8348-5']/cda:value[@unit='kg' or @unit='lb_av']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:observation[cda:code/@code='8348-5']/cda:value[@unit='kg' or @unit='lb_av']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: In IHE PCC Visit Summary (1.3.6.1.4.1.19376.1.5.3.1.11.2.2.2), the prepregnancy weight shall record the units in kg or lbs
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.11.2.2.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M92"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M92"/>
   <xsl:template match="@*|node()" priority="-2" mode="M92">
      <xsl:apply-templates select="@*|*" mode="M92"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.1-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.1&#34;]"
                 priority="1000"
                 mode="M95">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), EDD observation SHALL comply with the 
     restrictions of the Simple Observation entry. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:repeatNumber) and not(cda:interpretationCode) and not(cda:methodCode) and                  not(cda:targetSiteCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:repeatNumber) and not(cda:interpretationCode) and not(cda:methodCode) and not(cda:targetSiteCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), the EDD observation SHALL NOT include 
     repeatNumber, interpretationCode, methodCode, or targetSiteCode.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;11778-8&#34; and @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;11778-8&#34; and @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), the &lt;code&gt; element indicates that this is a
     "clinically estimated" estimated delivery date (for example, this code is used 
     to represent the field on the last line of the EDD section of the ACOG form). 
     This code SHALL be the LOINC code 11778-8.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@xsi:type=&#34;TS&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value[@xsi:type=&#34;TS&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), the value of the EDD SHALL be represented as a 
     point in time. (xsi:type='TS').
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:author/cda:assignedAuthor/cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:author/cda:assignedAuthor/cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), there may be multiple clinicians following the 
     patient and authoring the overall document, however the EDD observation has an individual author. For CDA based content, 
     this author SHALL be listed in the CDA header and referenced from the entry by including the id element of the assignedAuthor. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:author/cda:time[@value or @nullFlavor]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:author/cda:time[@value or @nullFlavor]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), the author.time is used to record the time that the 
       author recorded the EDD observation. It SHALL be included.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), each observation measurement entry may contain a 
       &lt;text&gt; element providing the free text that provides the same information as the observation within the narrative
       portion of the document with a &lt;text&gt; element. For CDA based uses of EDD Observations, this element SHALL be 
       present, and SHALL contain a &lt;reference&gt; element that points to the related string in the narrative portion of 
       the document. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation) or                  cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;11779-6&#34;] or                  cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;(xx-EDD-by-PE)&#34;] or                  cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;11781-2&#34;] or                  cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;(xx-EDD-by-Qck)&#34;] or                  cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;(xx-EDD-by-Fund)&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation) or cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;11779-6&#34;] or cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;(xx-EDD-by-PE)&#34;] or cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;11781-2&#34;] or cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;(xx-EDD-by-Qck)&#34;] or cda:entryRelationship[@typeCode=&#34;SPRT&#34;]/cda:observation/cda:code[@code=&#34;(xx-EDD-by-Fund)&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), supporting observations SHALL include a specific 
      LOINC value to indicate the method used to calculate the EDD.  
      See table at: http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:entryRelationship[@typeCode=&#34;SPRT&#34;] or not(cda:entryRelationship)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:entryRelationship[@typeCode=&#34;SPRT&#34;] or not(cda:entryRelationship)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC EDD Observation (1.3.6.1.4.1.19376.1.5.3.1.11.2.3.1), the &lt;entryRelationship&gt; element binds the 
      clinicians estimated EDD to supporting observations by different methods.  Supporting observations SHOULD be included. 
      If included, the typeCode SHALL be 'SPRT'. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M95"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M95"/>
   <xsl:template match="@*|node()" priority="-2" mode="M95">
      <xsl:apply-templates select="@*|*" mode="M95"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2-errorsIHE PCC Antepartum Visit Summary Battery - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Antepartum Visit Summary Battery - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2&#34;]"
                 priority="1000"
                 mode="M98">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:organizer[@classCode=&#34;BATTERY&#34; and @moodCode=&#34;EVN&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:organizer[@classCode=&#34;BATTERY&#34; and @moodCode=&#34;EVN&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	Error: In IHE PCC Antepartum Visit Summary Battery (1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2), each row in the visit Summary 
        flowsheet of the Antepartum Summary SHALL be represented by an organizer 
        with the classCode of 'BATTERY' and the moodCode of 'EVN'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
        Error: In IHE PCC Antepartum Visit Summary Battery (1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2), each battery SHALL have a
        globally unique identifier.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;(xx-acog-battery)&#34; and @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;(xx-acog-battery)&#34; and @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	Error: In IHE PCC Antepartum Visit Summary Battery (1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2), the &lt;code&gt; element 
        specifies the loinc code that represents the content of the battery. The codeSystem attribute SHALL contain the 
        value '2.16.840.1.113883.6.1'. The code attribute SHALL contain the value='(xx-acog-battery)'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
        Error: In IHE PCC Antepartum Visit Summary Battery (1.3.6.1.4.1.19376.1.5.3.1.1.11.2.3.2), the status code for all 
        batteries SHALL be 'completed'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M98"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M98"/>
   <xsl:template match="@*|node()" priority="-2" mode="M98">
      <xsl:apply-templates select="@*|*" mode="M98"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1&#34;]"
                 priority="1000"
                 mode="M100">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: The Coded Functional Status Assessment can only be used on sections. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.17&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.17&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The parent template identifier for Coded Functional Status Assessment is not present. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;47420-5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;47420-5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code of a Coded Functional Status Assessment must be 47420-5.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code must come from the LOINC code system (2.16.840.1.113883.6.1). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: A Coded Functional Status Assessment must contain a Pain Scale Assessment.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="./cda:component/cda:section/cda:templateId[                    @root = '1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3' or                    @root = '1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4' or                    @root = '1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5']"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="./cda:component/cda:section/cda:templateId[ @root = '1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3' or @root = '1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4' or @root = '1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5']">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: At least one of the optional subsections must be in a coded functional assessment.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M100"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M100"/>
   <xsl:template match="@*|node()" priority="-2" mode="M100">
      <xsl:apply-templates select="@*|*" mode="M100"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2&#34;]"
                 priority="1000"
                 mode="M103">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: The Pain Scale Assessment can only be used on sections. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;38208-5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;38208-5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code of a Pain Scale Assessment must be 38208-5.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code must come from the LOINC code system (2.16.840.1.113883.6.1). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: A(n) Pain Scale Assessment must contain Pain Score Observation.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M103"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M103"/>
   <xsl:template match="@*|node()" priority="-2" mode="M103">
      <xsl:apply-templates select="@*|*" mode="M103"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3&#34;]"
                 priority="1000"
                 mode="M106">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: The Braden Score can only be used on sections. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;38228-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;38228-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code of a Braden Score must be 38228-3. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code must come from the LOINC code system (2.16.840.1.113883.6.1). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: A Braden Score must contain a Braden Score Observation. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M106"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M106"/>
   <xsl:template match="@*|node()" priority="-2" mode="M106">
      <xsl:apply-templates select="@*|*" mode="M106"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4&#34;]"
                 priority="1000"
                 mode="M109">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: The Geriatric Depression Scale can only be used on sections. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;48542-5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;48542-5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code of a Geriatric Depression Scale must be 48542-5. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code must come from the LOINC code system (2.16.840.1.113883.6.1). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: A Geriatric Depression Scale must contain a Geriatric Depression Score Observation. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M109"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M109"/>
   <xsl:template match="@*|node()" priority="-2" mode="M109">
      <xsl:apply-templates select="@*|*" mode="M109"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5&#34;]"
                 priority="1000"
                 mode="M112">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The Physical Function templateId can only be used on sections. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;46006-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;46006-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code of a Physical Function must be 46006-3. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: The section type code must come from the LOINC code system (2.16.840.1.113883.6.1). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6&#34;] or                   .//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6&#34;] or .//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: A Physical Function shall contain at least one Survey Panel or Survey Observation. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M112"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M112"/>
   <xsl:template match="@*|node()" priority="-2" mode="M112">
      <xsl:apply-templates select="@*|*" mode="M112"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1&#34;]"
                 priority="1001"
                 mode="M115">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:observation">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Pain Score Observation shall be a CDA Observation element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Pain Score Observation shall be an IHE Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;38208-5&#34; and @codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code = &#34;38208-5&#34; and @codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Pain Score Observation shall have code taken from the LOINC code system (2.16.840.1.113883.6.1) with code value 38208-5. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode) or cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode) or cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Pain Score Observation has an interpretationCode element, then its code element shall contain a SNOMED CT translation element.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value/@xsi:type = &#34;CO&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value/@xsi:type = &#34;CO&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Pain Score Observation shall have a value element with data type CO.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@code = &#34;0&#34; or @code = &#34;1&#34; or @code = &#34;2&#34; or @code = &#34;3&#34; or @code = &#34;4&#34;           or @code = &#34;5&#34; or @code = &#34;6&#34; or @code = &#34;7&#34; or @code = &#34;8&#34; or @code = &#34;9&#34; or @code = &#34;10&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@code = &#34;0&#34; or @code = &#34;1&#34; or @code = &#34;2&#34; or @code = &#34;3&#34; or @code = &#34;4&#34; or @code = &#34;5&#34; or @code = &#34;6&#34; or @code = &#34;7&#34; or @code = &#34;8&#34; or @code = &#34;9&#34; or @code = &#34;10&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The value element of an FSA Pain Score Observation shall contain a coded value that is an ordinal number between 0 and 10, inclusive.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode)                   or cda:interpretationCode[@code = &#34;301379001&#34; or @code = &#34;40196000&#34;                    or @code = &#34;50415004&#34; or @code = &#34;76948002&#34; or @code = &#34;67849003&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode) or cda:interpretationCode[@code = &#34;301379001&#34; or @code = &#34;40196000&#34; or @code = &#34;50415004&#34; or @code = &#34;76948002&#34; or @code = &#34;67849003&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Pain Score Observation contains an interpretationCode element, then its coded value shall be one of the following SNOMED CT codes: 301379001 (No present pain), 40196000 (Mild pain), 50415004 (Moderate pain), 76948002 (Severe pain), or 67849003 (Excruciating pain).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;0&#34;])                  or cda:interpretationCode/@code = &#34;301379001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;0&#34;]) or cda:interpretationCode/@code = &#34;301379001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Pain Score value is 0 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 301379001 (No present pain).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34;])                  or cda:interpretationCode/@code = &#34;40196000&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34;]) or cda:interpretationCode/@code = &#34;40196000&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Pain Score value is 1, 2, or 3 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 40196000 (Mild pain).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;4&#34; or @code=&#34;5&#34; or @code=&#34;6&#34;])                  or cda:interpretationCode/@code = &#34;50415004&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;4&#34; or @code=&#34;5&#34; or @code=&#34;6&#34;]) or cda:interpretationCode/@code = &#34;50415004&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Pain Score value is 4, 5, or 6 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 50415004 (Moderate pain).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;7&#34; or @code=&#34;8&#34; or @code=&#34;9&#34;])                  or cda:interpretationCode/@code = &#34;76948002&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;7&#34; or @code=&#34;8&#34; or @code=&#34;9&#34;]) or cda:interpretationCode/@code = &#34;76948002&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Pain Score value is 7, 8, or 9 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 76948002 (Severe pain).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;10&#34;])                  or cda:interpretationCode/@code = &#34;67849003&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;10&#34;]) or cda:interpretationCode/@code = &#34;67849003&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Pain Score value is 10 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 67849003 (Excruciating pain).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M115"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1&#34;]/cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"
                 priority="1000"
                 mode="M115">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1&#34;]/cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(@code=&#34;406127006&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="(@code=&#34;406127006&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Braden Score Observation contains a SNOMED CT translation element, then the code value shall be  406127006 (Pain intensity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M115"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M115"/>
   <xsl:template match="@*|node()" priority="-2" mode="M115">
      <xsl:apply-templates select="@*|*" mode="M115"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2&#34;]"
                 priority="1001"
                 mode="M118">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:observation">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Braden Score Observation shall be a CDA Observation element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Braden Score Observation shall be an IHE Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;38227-5&#34; and @codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code = &#34;38227-5&#34; and @codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Braden Score Observation shall have code taken from the LOINC code system (2.16.840.1.113883.6.1) with code value 38227-5, to indicate Braden scale - total score. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode) or cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode) or cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Score Observation has an interpretationCode element, then its code element shall contain a SNOMED CT translation element.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value/@xsi:type = &#34;INT&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value/@xsi:type = &#34;INT&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Braden Score Observation shall have a value element with data type INT (Integer).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@value &gt; &#34;5&#34; and @value &lt; &#34;24&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@value &gt; &#34;5&#34; and @value &lt; &#34;24&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The value element of an FSA Braden Score Observation shall be an integer within the range of 6 to 23 inclusive.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value/@value = sum(cda:entryRelationship[@typeCode=&#34;COMP&#34;]/cda:observation/cda:value/@value)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value/@value = sum(cda:entryRelationship[@typeCode=&#34;COMP&#34;]/cda:observation/cda:value/@value)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The value element of an FSA Braden Score Observation shall be equal to the sum of the values of the 6 component scores.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode)                   or cda:interpretationCode[@code = &#34;260413007&#34; or @code = &#34;30207005&#34;                    or @code = &#34;25594002&#34; or @code = &#34;15508007&#34; or @code = &#34;NotAvailableYet&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode) or cda:interpretationCode[@code = &#34;260413007&#34; or @code = &#34;30207005&#34; or @code = &#34;25594002&#34; or @code = &#34;15508007&#34; or @code = &#34;NotAvailableYet&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Score Observation contains an interpretationCode element, then its coded value shall be one of the following SNOMED CT codes: 260413007 (No risk of pressure sores), 30207005 (Risk of pressure sores), 25594002 (Moderate risk of pressure sores), 15508007 (High risk of pressure sores), or CodeNotAvailableYet (Very high risk of pressure sores).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;19&#34; or @code=&#34;20&#34; or @code=&#34;21&#34; or @code=&#34;22&#34; or @code=&#34;23&#34;])                  or cda:interpretationCode/@code = &#34;260413007&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;19&#34; or @code=&#34;20&#34; or @code=&#34;21&#34; or @code=&#34;22&#34; or @code=&#34;23&#34;]) or cda:interpretationCode/@code = &#34;260413007&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Score value is 19 to 23 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 260413007 (No risk of pressure sores).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;15&#34; or @code=&#34;16&#34; or @code=&#34;17&#34; or @code=&#34;18&#34;])                  or cda:interpretationCode/@code = &#34;30207005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;15&#34; or @code=&#34;16&#34; or @code=&#34;17&#34; or @code=&#34;18&#34;]) or cda:interpretationCode/@code = &#34;30207005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Score value is 15 to 18 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 30207005 (Risk of pressure sores).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;13&#34; or @code=&#34;14&#34;])                  or cda:interpretationCode/@code = &#34;25594002&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;13&#34; or @code=&#34;14&#34;]) or cda:interpretationCode/@code = &#34;25594002&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Score value is 13 or 14 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 25594002 (Moderate risk of pressure sores).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@code=&#34;10&#34; or @code=&#34;11&#34; or @code=&#34;12&#34;])                  or cda:interpretationCode/@code = &#34;15508007&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@code=&#34;10&#34; or @code=&#34;11&#34; or @code=&#34;12&#34;]) or cda:interpretationCode/@code = &#34;15508007&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Score value is 10 to 12 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 15508007 (High risk of pressure sores).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(//cda:observation[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3&#34;]) = 6"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(//cda:observation[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3&#34;]) = 6">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Braden Score Observation shall contain exactly 6 Braden Score Component Observations, one for each required component observation.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M118"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2&#34;]/cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"
                 priority="1000"
                 mode="M118">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2&#34;]/cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(@code=&#34;225392000&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="(@code=&#34;225392000&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Braden Score Observation contains a SNOMED CT translation element, then the code value shall be  225392000 (Pressure sore risk assessment). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M118"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M118"/>
   <xsl:template match="@*|node()" priority="-2" mode="M118">
      <xsl:apply-templates select="@*|*" mode="M118"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3&#34;]"
                 priority="1001"
                 mode="M121">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:observation">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Braden Score Component shall be a CDA Observation element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Braden Score Component shall be an IHE Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;                   and (@code=&#34;38222-6&#34; or @code=&#34;38229-1&#34; or @code=&#34;38224-2&#34;                     or @code=&#34;38223-4&#34; or @code=&#34;38225-9&#34; or @code=&#34;38226-7&#34;)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34; and (@code=&#34;38222-6&#34; or @code=&#34;38229-1&#34; or @code=&#34;38224-2&#34; or @code=&#34;38223-4&#34; or @code=&#34;38225-9&#34; or @code=&#34;38226-7&#34;)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Braden Score Component shall have code taken from the LOINC code system (2.16.840.1.113883.6.1) with code value one of the folllowing: 38222-6 (Sensory Perception), 38229-1 (Moisture Exposure), 38224-2 (Physical Mobility), 38223-4 (Physical Activity), 38225-9 (Nutrition Intake Pattern), or 38226-7 (Friction and Shear). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode) or cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode) or cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Score Component has an interpretationCode element, then its code element shall contain a SNOMED CT translation element.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value/@xsi:type = &#34;INT&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value/@xsi:type = &#34;INT&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Braden Score Component shall have a value element with data type INT (Integer).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@value &gt; &#34;0&#34; and @value &lt; &#34;5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@value &gt; &#34;0&#34; and @value &lt; &#34;5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The value element of an FSA Braden Score Component shall be an integer within the range of 1 to 4 inclusive.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38226-7&#34;) or cda:value[@value &gt; &#34;0&#34; and @value &lt; &#34;4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38226-7&#34;) or cda:value[@value &gt; &#34;0&#34; and @value &lt; &#34;4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The value element of a Friction and Shear Braden Score Component (38226-7) shall be an integer within the range of 1 to 3 inclusive.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38222-6&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;42341009&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38222-6&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;42341009&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Sensory Perception score is 1, then the interpretation code, if present, shall be 42341009 (Agnosia).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38222-6&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;425403003&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38222-6&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;425403003&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Sensory Perception score is 2, then the interpretation code, if present, shall be 425403003 (Limited sensory perception).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38222-6&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;425403003&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38222-6&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;425403003&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Sensory Perception score is 3, then the interpretation code, if present, shall be 425403003 (Limited sensory perception).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38222-6&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;247700009&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38222-6&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;247700009&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Sensory Perception score is 4, then the interpretation code, if present, shall be 247700009 (Normal perception).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38229-1&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;255238004&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38229-1&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;255238004&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Moisture Exposure score is 1, then the interpretation code, if present, shall be 255238004 (Continuous).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38229-1&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;70232002&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38229-1&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;70232002&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Moisture Exposure score is 2, then the interpretation code, if present, shall be 70232002 (Frequent).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38229-1&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;84638005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38229-1&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;84638005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Moisture Exposure score is 3, then the interpretation code, if present, shall be 84638005 (Occasional).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38229-1&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;89292003&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38229-1&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;89292003&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Moisture Exposure score is 4, then the interpretation code, if present, shall be 89292003 (Rare).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38224-2&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;302045007&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38224-2&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;302045007&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Physical Mobility score is 1, then the interpretation code, if present, shall be 302045007 (Does not mobilize).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38224-2&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;160692006&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38224-2&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;160692006&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Physical Mobility score is 2, then the interpretation code, if present, shall be 160692006 (Mobility very poor).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38224-2&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;8510008&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38224-2&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;8510008&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Physical Mobility score is 3, then the interpretation code, if present, shall be 8510008 (Reduced mobility).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38224-2&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;302042005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38224-2&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;302042005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Physical Mobility score is 4, then the interpretation code, if present, shall be 302042005 (Able to mobilize).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38223-4&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;160685001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38223-4&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;160685001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Physical Activity score is 1, then the interpretation code, if present, shall be 160685001 (Bed-ridden).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38223-4&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;160684002&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38223-4&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;160684002&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Physical Activity score is 2, then the interpretation code, if present, shall be 160684002 (Confined to chair).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38223-4&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;84638005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38223-4&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;84638005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Physical Activity score is 3, then the interpretation code, if present, shall be 84638005 (Occasional).  Note that Frequent and Occasional are reversed in the profile table 6.4-9.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38223-4&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;70232002&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38223-4&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;70232002&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Physical Activity score is 4, then the interpretation code, if present, shall be 70232002 (Frequent). Note that Frequent and Occasional are reversed in the profile table 6.4-9.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38225-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;255351007&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38225-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;255351007&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Nutrition Intake Pattern score is 1, then the interpretation code, if present, shall be 255351007 (Poor).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38225-9&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;71978007&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38225-9&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;71978007&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Nutrition Intake Pattern score is 2, then the interpretation code, if present, shall be 71978007 (Inadequate).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38225-9&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;88323005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38225-9&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;88323005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Nutrition Intake Pattern score is 3, then the interpretation code, if present, shall be 88323005 (Adequate).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38225-9&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;425405005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38225-9&#34; and cda:value/@value=&#34;4&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;425405005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Nutrition Intake Pattern score is 4, then the interpretation code, if present, shall be 425405005 (Excellent).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38226-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;301684000&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38226-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;301684000&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Friction and Shear score is 1, then the interpretation code, if present, shall be 301684000 (Does not move in bed).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38226-7&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;301697003&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38226-7&#34; and cda:value/@value=&#34;2&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;301697003&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Friction and Shear score is 2, then the interpretation code, if present, shall be 301697003 (Difficulty moving up and down bed).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;38226-7&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode)                  or cda:interpretationCode/@code = &#34;301693004&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;38226-7&#34; and cda:value/@value=&#34;3&#34; and cda:interpretationCode) or cda:interpretationCode/@code = &#34;301693004&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Braden Friction and Shear score is 3, then the interpretation code, if present, shall be 301693004 (Able to move up and down bed).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:methodCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:methodCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Braden Score Component shall not contain a methodCode element since the method is implicit in the observation code.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:targetSiteCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:targetSiteCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Braden Score Component shall not contain a targetSiteCode element since the target site is either implicit in the observation code or is irrelevant.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M121"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3&#34;]/cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"
                 priority="1000"
                 mode="M121">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3&#34;]/cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(@code=&#34;248240001&#34; or @code=&#34;364532007&#34; or @code=&#34;249864002&#34;                       or @code=&#34;68130003&#34; or @code=&#34;87276001&#34; or @code=&#34;301438001&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(@code=&#34;248240001&#34; or @code=&#34;364532007&#34; or @code=&#34;249864002&#34; or @code=&#34;68130003&#34; or @code=&#34;87276001&#34; or @code=&#34;301438001&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Braden Score Component contains a SNOMED CT translation (2.16.840.1.113883.6.96), then the code value of the translation shall be one of the following: 248240001 (response to pain), 364532007 (moistness of skin), 249864002 (ability to assume and maintain position), 68130003 (physical activity), 87276001 (nutritional status), or 301438001 (ability to mobilize). These codes provide a translation of the measurement to the SNOMED CT code system.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(@code=&#34;248240001&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38222-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(@code=&#34;248240001&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38222-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If the code element of an FSA Braden Score Component has a SNOMED translation of 248240001 (response to pain), then the parent LOINC code shall be 38222-6 (Sensory Perception).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(@code=&#34;364532007&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38229-1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(@code=&#34;364532007&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38229-1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If the code element of an FSA Braden Score Component has a SNOMED translation of 364532007 (moistness of skin), then the parent LOINC code shall be 38229-1 (Moisture Exposure).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(@code=&#34;249864002&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38224-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(@code=&#34;249864002&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38224-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If the code element of an FSA Braden Score Component has a SNOMED translation of 249864002 (ability to assume and maintain position), then the parent LOINC code shall be 38224-2 (Physical mobility).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(@code=&#34;68130003&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38223-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(@code=&#34;68130003&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38223-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If the code element of an FSA Braden Score Component has a SNOMED translation of 68130003 (physical activity), then the parent LOINC code shall be 38223-4 (Physical Activity).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(@code=&#34;87276001&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38225-9&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(@code=&#34;87276001&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38225-9&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If the code element of an FSA Braden Score Component has a SNOMED translation of 87276001 (nutritional status), then the parent LOINC code shall be 38225-9 (Nutrition Intake Pattern).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(@code=&#34;301438001&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38226-7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(@code=&#34;301438001&#34;) or parent::cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and @code=&#34;38226-7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If the code element of an FSA Braden Score Component has a SNOMED translation of 301438001 (ability to mobilize), then the parent LOINC code shall be 38226-7 (Friction and Shear).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M121"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M121"/>
   <xsl:template match="@*|node()" priority="-2" mode="M121">
      <xsl:apply-templates select="@*|*" mode="M121"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4&#34;]"
                 priority="1000"
                 mode="M124">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:observation">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Geriatric Depression Score Observation shall be a CDA Observation element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Geriatric Depression Score Observation shall be an IHE Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;48544-1&#34; and @codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code = &#34;48544-1&#34; and @codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Geriatric Depression Score Observation shall have code taken from the LOINC code system (2.16.840.1.113883.6.1) with code value 48544-1, to indicate Geriatric Depression scale - total score. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode) or cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode) or cda:code/cda:translation[@codeSystem=&#34;2.16.840.1.113883.6.96&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Geriatric Depression Score Observation has an interpretationCode element, then its code element shall contain a SNOMED CT translation element.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value/@xsi:type = &#34;INT&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value/@xsi:type = &#34;INT&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Geriatric Depression Score Observation shall have a value element with data type INT (Integer).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@value &gt;= &#34;0&#34; and @value &lt;= &#34;30&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@value &gt;= &#34;0&#34; and @value &lt;= &#34;30&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The value element of an FSA Geriatric Depression Score Observation shall be an integer within the range of 0 to 30 inclusive.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value/@value = sum(cda:entryRelationship[@typeCode=&#34;COMP&#34;]/cda:observation/cda:value/@value)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value/@value = sum(cda:entryRelationship[@typeCode=&#34;COMP&#34;]/cda:observation/cda:value/@value)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The value attribute of an FSA Geriatric Depression Score Observation shall be equal to the sum of the values of the 0 to 30 component scores.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode)                   or cda:interpretationCode[@code = &#34;134417007&#34; or @code = &#34;310496002&#34; or @code = &#34;310497006&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode) or cda:interpretationCode[@code = &#34;134417007&#34; or @code = &#34;310496002&#34; or @code = &#34;310497006&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Geriatric Depression Score Observation contains an interpretationCode element, then its coded value shall be one of the following SNOMED CT codes: 134417007 (Level of mood - normal), 310496002 (Moderate depression), or 310497006 (Severe depression).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@value=&#34;0&#34; or (@value &gt; &#34;0&#34; and @value &lt; &#34;9&#34;)])                  or cda:interpretationCode/@code = &#34;134417007&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@value=&#34;0&#34; or (@value &gt; &#34;0&#34; and @value &lt; &#34;9&#34;)]) or cda:interpretationCode/@code = &#34;134417007&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Geriatric Depression Score value is 0 to 9 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 134417007 (Level of mood - normal).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@value &gt; &#34;9&#34; and @value &lt; &#34;20&#34;])                  or cda:interpretationCode/@code = &#34;310496002&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@value &gt; &#34;9&#34; and @value &lt; &#34;20&#34;]) or cda:interpretationCode/@code = &#34;310496002&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Geriatric Depression Score value is 10 to 19 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 310496002 (Moderate depression).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:interpretationCode and cda:value[@value &gt; &#34;19&#34; and @value &lt; &#34;31&#34;])                  or cda:interpretationCode/@code = &#34;310497006&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:interpretationCode and cda:value[@value &gt; &#34;19&#34; and @value &lt; &#34;31&#34;]) or cda:interpretationCode/@code = &#34;310497006&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Geriatric Depression Score value is 20 to 30 and the observation contains an interpretationCode element, then the interpretation code shall be equal to 310497006 (Severe depression).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:methodCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:methodCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Geriatric Depression Score Observation shall not contain a methodCode element since the method is implicit in the observation code.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:targetSiteCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:targetSiteCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Geriatric Depression Score observation shall not contain a targetSiteCode element since the target site is either implicit in the observation code or is irrelevant.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M124"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M124"/>
   <xsl:template match="@*|node()" priority="-2" mode="M124">
      <xsl:apply-templates select="@*|*" mode="M124"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5&#34;]"
                 priority="1000"
                 mode="M127">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:observation">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Geriatric Depression Score Component shall be a CDA Observation element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Geriatric Depression Score Component shall be an IHE Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and (@code=&#34;48512-8&#34; or @code=&#34;48513-6&#34;                     or @code=&#34;48514-4&#34; or @code=&#34;48515-1&#34; or @code=&#34;48516-9&#34; or @code=&#34;48517-7&#34;                     or @code=&#34;48518-5&#34; or @code=&#34;48519-3&#34; or @code=&#34;48520-1&#34; or @code=&#34;48521-9&#34;                     or @code=&#34;48522-7&#34; or @code=&#34;48523-5&#34; or @code=&#34;48524-3&#34; or @code=&#34;48525-0&#34;                    or @code=&#34;48526-8&#34; or @code=&#34;48527-6&#34; or @code=&#34;48528-4&#34; or @code=&#34;48529-2&#34;                     or @code=&#34;48530-0&#34; or @code=&#34;48531-8&#34; or @code=&#34;48532-6&#34; or @code=&#34;48533-4&#34;                     or @code=&#34;48534-2&#34; or @code=&#34;48535-9&#34; or @code=&#34;48536-7&#34; or @code=&#34;48537-5&#34;                    or @code=&#34;48538-3&#34; or @code=&#34;48539-1&#34; or @code=&#34;48540-9&#34; or @code=&#34;48541-7&#34;)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34; and (@code=&#34;48512-8&#34; or @code=&#34;48513-6&#34; or @code=&#34;48514-4&#34; or @code=&#34;48515-1&#34; or @code=&#34;48516-9&#34; or @code=&#34;48517-7&#34; or @code=&#34;48518-5&#34; or @code=&#34;48519-3&#34; or @code=&#34;48520-1&#34; or @code=&#34;48521-9&#34; or @code=&#34;48522-7&#34; or @code=&#34;48523-5&#34; or @code=&#34;48524-3&#34; or @code=&#34;48525-0&#34; or @code=&#34;48526-8&#34; or @code=&#34;48527-6&#34; or @code=&#34;48528-4&#34; or @code=&#34;48529-2&#34; or @code=&#34;48530-0&#34; or @code=&#34;48531-8&#34; or @code=&#34;48532-6&#34; or @code=&#34;48533-4&#34; or @code=&#34;48534-2&#34; or @code=&#34;48535-9&#34; or @code=&#34;48536-7&#34; or @code=&#34;48537-5&#34; or @code=&#34;48538-3&#34; or @code=&#34;48539-1&#34; or @code=&#34;48540-9&#34; or @code=&#34;48541-7&#34;)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Geriatric Depression Score Component shall have code taken from the LOINC code system (2.16.840.1.113883.6.1) with one of thirty specified codes to represent a specific yes/no question that could be asked. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value/@xsi:type = &#34;INT&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value/@xsi:type = &#34;INT&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Geriatric Depression Score Component shall have a value element with data type INT (Integer).
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@value=&#34;0&#34; or @value=&#34;1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@value=&#34;0&#34; or @value=&#34;1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The value element of an FSA Geriatric Depression Score Component shall be an integer with a value of 0 or 1. Depending on the question, this value represents either a Yes or a No response. The interpretationCode, if present, indicates if the value is Yes or No.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48512-8&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48512-8&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48512-8 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48512-8&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48512-8&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48512-8 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48513-6&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48513-6&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48513-6 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48513-6&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48513-6&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48513-6 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48514-4&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48514-4&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48514-4 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48514-4&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48514-4&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48514-4 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48515-1&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48515-1&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48515-1 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48515-1&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48515-1&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48515-1 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48516-9&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48516-9&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48516-9 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48516-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48516-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48516-9 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48517-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48517-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48517-7 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48517-7&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48517-7&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48517-7 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48518-5&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48518-5&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48518-5 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48518-5&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48518-5&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48518-5 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48519-3&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48519-3&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48519-3 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48519-3&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48519-3&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48519-3 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48520-1&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48520-1&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48520-1 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48520-1&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48520-1&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48520-1 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48521-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48521-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48521-9 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48521-9&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48521-9&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48521-9 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48522-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48522-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48522-7 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48522-7&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48522-7&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48522-7 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48523-5&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48523-5&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48523-5 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48523-5&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48523-5&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48523-5 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48524-3&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48524-3&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48524-3 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48524-3&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48524-3&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48524-3 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48525-0&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48525-0&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48525-0 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48525-0&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48525-0&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48525-0 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48526-8&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48526-8&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48526-8 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48526-8&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48526-8&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48526-8 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48527-6&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48527-6&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48527-6 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48527-6&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48527-6&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48527-6 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48528-4&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48528-4&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48528-4 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48528-4&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48528-4&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48528-4 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48529-2&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48529-2&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48529-2 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48529-2&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48529-2&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48529-2 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48530-0&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48530-0&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48530-0 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48530-0&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48530-0&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48530-0 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48531-8&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48531-8&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48531-8 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48531-8&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48531-8&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48531-8 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48532-6&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48532-6&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48532-6 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48532-6&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48532-6&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48532-6 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48533-4&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48533-4&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48533-4 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48533-4&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48533-4&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48533-4 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48534-2&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48534-2&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48534-2 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48534-2&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48534-2&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48534-2 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48535-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48535-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48535-9 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48535-9&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48535-9&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48535-9 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48536-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48536-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48536-7 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48536-7&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48536-7&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48536-7 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48537-5&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48537-5&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48537-5 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48537-5&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48537-5&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48537-5 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48538-3&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48538-3&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48538-3 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48538-3&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48538-3&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48538-3 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48539-1&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48539-1&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48539-1 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48539-1&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48539-1&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48539-1 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48540-9&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48540-9&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48540-9 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48540-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48540-9&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48540-9 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48541-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373066001&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48541-7&#34; and cda:value/@value=&#34;1&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373066001&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48541-7 and the value is 1, then the SNOMED CT interpretationCode, if present, shall be 373066001 (Yes).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code/@code=&#34;48541-7&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode)                     or cda:interpretationCode/@code=&#34;373067005&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code/@code=&#34;48541-7&#34; and cda:value/@value=&#34;0&#34; and cda:interpretationCode) or cda:interpretationCode/@code=&#34;373067005&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If the code element of an FSA Geriatric Depression Score Component is 48541-7 and the value is 0, then the SNOMED CT interpretationCode, if present, shall be 373067005 (No).  
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:methodCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:methodCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Geriatric Depression Score Component should not contain a methodCode element since the method is implicit in the observation code.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:targetSiteCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:targetSiteCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Geriatric Depression Score Component should not contain a targetSiteCode element since the target site is either implicit in the observation code or is irrelevant.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.5
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M127"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M127"/>
   <xsl:template match="@*|node()" priority="-2" mode="M127">
      <xsl:apply-templates select="@*|*" mode="M127"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6&#34;]"
                 priority="1009"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:observation">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Observation shall be a CDA Observation element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Observation shall be an IHE Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Observation shall contain a code element to identify the observation made. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value/@xsi:type"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value/@xsi:type">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Observation shall contain a value element. It shall be of an appropriate data type for the survey observation made. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:section[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5&#34;                       and cda:code/@code=&#34;46006-3&#34;])                or not(ancestor::cda:organizer[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7&#34;])                or cda:value/@xsi:type=&#34;CO&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:section[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5&#34; and cda:code/@code=&#34;46006-3&#34;]) or not(ancestor::cda:organizer[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7&#34;]) or cda:value/@xsi:type=&#34;CO&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If an FSA Survey Observation is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7), then it shall contain a value element with data type CO (Coded Ordinal). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:section[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5&#34;                       and cda:code/@code=&#34;46006-3&#34;])               or not(self::cda:observation/cda:code/@code=&#34;45611-1&#34;)                or cda:value[@xsi:type=&#34;CO&#34; and (not(@code) or @code=&#34;0&#34; or @code=&#34;1&#34;)]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:section[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5&#34; and cda:code/@code=&#34;46006-3&#34;]) or not(self::cda:observation/cda:code/@code=&#34;45611-1&#34;) or cda:value[@xsi:type=&#34;CO&#34; and (not(@code) or @code=&#34;0&#34; or @code=&#34;1&#34;)]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: If an FSA Survey Observation has a LOINC code of 45611-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3, then it shall contain a value element with data type CO (Coded Ordinal) and a value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:methodCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:methodCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Survey Observation shall not contain a methodCode element since method is not relevant to survey responses.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:targetSiteCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="not(cda:targetSiteCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: An FSA Survey Observation shall not contain a targetSiteCode element since target site is not relevant to survey responses.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.755&#34;]" priority="1008"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.755&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.755) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2,3,4,8}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.768&#34;]" priority="1007"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.768&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.768) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2,8}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.860&#34;]" priority="1006"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.860&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.860) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2,3,4,8}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.876&#34;]" priority="1005"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.876&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.876) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2,3}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.889&#34;]" priority="1004"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.889&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.889) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.898&#34;]" priority="1003"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.898&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.898) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.117&#34;]" priority="1002"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.117&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[not(@code) or @code=&#34;0&#34; or @code=&#34;1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[not(@code) or @code=&#34;0&#34; or @code=&#34;1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.117) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,missing}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.464&#34;]" priority="1001"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:value/@codeSystem=&#34;1.3.6.1.4.1.19376.6.257.464&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has an observation value taken from vocabulary (1.3.6.1.4.1.19376.6.257.464) of the US HHS CMS Minimum Data Set (MDS), then the code attribute for that value must be in the set {0,1,2}. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6&#34;                   and ancestor::cda:section[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5&#34;                        and cda:code/@code=&#34;46006-3&#34;]                    and ancestor::cda:organizer[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7&#34;]]"
                 priority="1000"
                 mode="M130">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6&#34;                   and ancestor::cda:section[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5&#34;                        and cda:code/@code=&#34;46006-3&#34;]                    and ancestor::cda:organizer[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7&#34;]]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45888-1&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45888-1&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45888-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45590-7&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45590-7&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45590-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45592-3&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45592-3&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45592-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45594-9&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45594-9&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45594-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45596-4&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45596-4&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45596-4 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45598-0&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45598-0&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45598-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45600-4&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45600-4&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45600-4 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45602-0&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45602-0&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45602-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45604-6&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45604-6&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45604-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45606-1&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45606-1&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45606-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.755 (0 is Independent, 1 is Supervision, 2 is Limited Assistance, 3 is Extensive Assistance, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45589-9&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45589-9&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45589-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45591-5&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45591-5&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45591-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45593-1&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45593-1&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45593-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45595-6&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45595-6&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45595-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45597-2&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45597-2&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45597-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45599-8&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45599-8&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45599-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45601-2&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45601-2&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45601-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45603-8&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45603-8&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45603-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45605-3&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45605-3&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45605-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45607-9&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46007-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45607-9&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45607-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46007-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46008-9&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45608-7&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46008-9&#34;) or not(self::cda:observation/cda:code/@code=&#34;45608-7&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34; or @code=&#34;4&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45608-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46008-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.860 (0 is Independent, 1 is Supervision, 2 is Transfer only assistance, 3 is Help with bathing, 4 is Total Dependence, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46008-9&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45609-5&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46008-9&#34;) or not(self::cda:observation/cda:code/@code=&#34;45609-5&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45609-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46008-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.768 (0 is No setup or physical help, 1 is Setup help only, 2 is One person assist, and 8 is No Activity). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46009-7&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45610-3&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46009-7&#34;) or not(self::cda:observation/cda:code/@code=&#34;45610-3&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45610-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46009-7, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.876 (0 is Maintained position, 1 is Unsteady, 2 is Partial physical support, and 3 is Physical help necessary). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46009-7&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45523-8&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46009-7&#34;) or not(self::cda:observation/cda:code/@code=&#34;45523-8&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34; or @code=&#34;3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45523-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46009-7, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.876 (0 is Maintained position, 1 is Unsteady, 2 is Partial physical support, and 3 is Physical help necessary). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45524-6&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45524-6&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45524-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45526-1&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45526-1&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45526-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45528-7&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45528-7&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45528-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45530-3&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45530-3&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45530-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45532-9&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45532-9&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45532-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45534-5&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45534-5&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45534-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.889 (0 is No limitation, 1 is Limitation - one side, and 2 is Limitation - both sides). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45525-3&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45525-3&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45525-3 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45527-9&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45527-9&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45527-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45529-5&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45529-5&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45529-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45531-1&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45531-1&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45531-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45533-7&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45533-7&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45533-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45535-2&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46010-5&#34;) or not(self::cda:observation/cda:code/@code=&#34;45535-2&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45535-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46010-5, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.898 (0 is No loss, 1 is Partial loss, and 2 is Full loss). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45536-0&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;) or not(self::cda:observation/cda:code/@code=&#34;45536-0&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45536-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45537-8&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;) or not(self::cda:observation/cda:code/@code=&#34;45537-8&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45537-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45538-6&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;) or not(self::cda:observation/cda:code/@code=&#34;45538-6&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45538-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45539-4&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;) or not(self::cda:observation/cda:code/@code=&#34;45539-4&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45539-4 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;)                or not(self::cda:observation/cda:code/@code=&#34;455340-2&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46011-3&#34;) or not(self::cda:observation/cda:code/@code=&#34;455340-2&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 455340-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46011-3, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45541-0&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45541-0&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45541-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45542-8&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45542-8&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45542-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45543-6&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45543-6&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45543-6 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45544-4&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45544-4&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45544-4 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45545-1&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45545-1&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45545-1 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45546-9&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46012-1&#34;) or not(self::cda:observation/cda:code/@code=&#34;45546-9&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45546-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46012-1, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45612-9&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;) or not(self::cda:observation/cda:code/@code=&#34;45612-9&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45612-9 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45613-7&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;) or not(self::cda:observation/cda:code/@code=&#34;45613-7&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45613-7 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45614-5&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;) or not(self::cda:observation/cda:code/@code=&#34;45614-5&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45614-5 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45615-2&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;) or not(self::cda:observation/cda:code/@code=&#34;45615-2&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45615-2 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45616-0&#34;)                or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;) or not(self::cda:observation/cda:code/@code=&#34;45616-0&#34;) or cda:value[not(@code) or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45616-0 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.117 (0 is No, 1 is Yes, and no value attribute is Undetermined (UTD)). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;)                or not(self::cda:observation/cda:code/@code=&#34;45617-8&#34;)                or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::cda:organizer/cda:code/@code=&#34;46013-9&#34;) or not(self::cda:observation/cda:code/@code=&#34;45617-8&#34;) or cda:value[@code=&#34;0&#34; or @code=&#34;1&#34; or @code=&#34;2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: If an FSA Survey Observation has a LOINC code of 45617-8 and is contained in an FSA Physical Function section (1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5) with LOINC code 46006-3 and is contained in an FSA survey Panel (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7) with LOINC code 46013-9, then it shall contain a value element with value from vocabulary 1.3.6.1.4.1.19376.6.257.464 (0 is No change, 1 is Improved, and 2 is Deteriorated). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.2.5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M130"/>
   <xsl:template match="@*|node()" priority="-2" mode="M130">
      <xsl:apply-templates select="@*|*" mode="M130"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7&#34;]"
                 priority="1000"
                 mode="M133">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:organizer"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:organizer">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Panel shall be a CDA Organizer element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.32&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.32&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Panel shall carry the CCD organizer templateID (2.16.840.1.113883.10.20.1.32) to indicate that it inherits constraints from the ASTM/HL7 CCD specification for results organizers. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Panel shall have an id element. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Panel shall have a code element to identify a specific survey panel. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode/@code=&#34;completed&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode/@code=&#34;completed&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Panel shall have a statusCode indicating that the panel is completed.. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Panel shall have an effectiveTime element to indicate when the survey panel was taken. 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:component[@typeCode=&#34;COMP&#34;]/cda:observation[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:component[@typeCode=&#34;COMP&#34;]/cda:observation[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: An FSA Survey Panel shall have one or more component elements that are FSA observations with the FSA Survey Observation templateId (1.3.6.1.4.1.19376.1.5.3.1.1.12.3.6). 
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.12.3.7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M133"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M133"/>
   <xsl:template match="@*|node()" priority="-2" mode="M133">
      <xsl:apply-templates select="@*|*" mode="M133"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10-errorsIHE PCC ED Disposition Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC ED Disposition Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10&#34;]"
                 priority="1000"
                 mode="M136">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC ED Disposition Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10), the ED Disposition can only be used 
      on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC ED Disposition Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10), the parent template identifier for ED
     Disposition is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11302-7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11302-7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC ED Disposition Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10), the section type code of a ED Disposition 
     must be 11302-7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC ED Disposition Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10), the section type code must come from the 
     LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root =      &#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.10.4.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC ED Disposition Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10), an ED Disposition must contain Intended 
     Encounter Disposition.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.13.2.10 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M136"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M136"/>
   <xsl:template match="@*|node()" priority="-2" mode="M136">
      <xsl:apply-templates select="@*|*" mode="M136"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1.1-errorsIHE PCC Reason For Visit - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Reason For Visit - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1.1&#34;]"
                 priority="1000"
                 mode="M138">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Reason For Visit (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1.1), the Reason For Visit can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;29299-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;29299-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Reason For Visit (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1.1), the section type code of a Reason For Visit 
     must be 29299-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Reason For Visit (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1.1), the section type code must come from the LOINC code 
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M138"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M138"/>
   <xsl:template match="@*|node()" priority="-2" mode="M138">
      <xsl:apply-templates select="@*|*" mode="M138"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11-errorsIHE PCC Procedures Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Procedures Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11&#34;]"
                 priority="1000"
                 mode="M140">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Procedures Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11), the Procedures can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;X-PROC&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;X-PROC&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Procedures Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11), the section type code of a Procedures must be X-PROC
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Procedures Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC Procedures Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11), a Procedures and Interventions Section must contain a
     Procedures Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.13.2.11
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M140"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M140"/>
   <xsl:template match="@*|node()" priority="-2" mode="M140">
      <xsl:apply-templates select="@*|*" mode="M140"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1-errorsIHE PCC Chief Complaint Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Chief Complaint Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1&#34;]"
                 priority="1000"
                 mode="M142">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1), the Chief Complaint can only be used 
      on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10154-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10154-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1), the section type code of a Chief 
     Complaint must be 10154-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Chief Complaint Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.1), the section type code must come 
     from the LOINC code  system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M142"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M142"/>
   <xsl:template match="@*|node()" priority="-2" mode="M142">
      <xsl:apply-templates select="@*|*" mode="M142"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2-errors-->


	<!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2&#34;]"
                 priority="1000"
                 mode="M144">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Acuity Assessment Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2), the Acuity Assessment can only be used 
      on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;11283-9&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code=&#34;11283-9&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Acuity Assessment Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2), the section type code of a Acuity 
     Assessment must be 11283-9 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Acuity Assessment Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2), the section type code must come from the 
     LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC Acuity Assessment Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2), an Acuity Assessment must contain Acuity.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.13.2.2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M144"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M144"/>
   <xsl:template match="@*|node()" priority="-2" mode="M144">
      <xsl:apply-templates select="@*|*" mode="M144"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.3-errorsIHE PCC Referral Source - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Referral Source - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.3&#34;]"
                 priority="1000"
                 mode="M146">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
                Error: In IHE PCC Referral Source (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.3), the Referral Source can only be used 
                on sections. 
             </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11293-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11293-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
                Error: In IHE PCC Referral Source (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.3), the section type code of a Referral 
                Source must be 11293-8 
             </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
                Error: In IHE PCC Referral Source (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.3), the section type code must come from 
                the LOINC code system (2.16.840.1.113883.6.1). 
             </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M146"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M146"/>
   <xsl:template match="@*|node()" priority="-2" mode="M146">
      <xsl:apply-templates select="@*|*" mode="M146"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.4-errorsIHE PCC Assessments Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Assessments Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.4&#34;]"
                 priority="1000"
                 mode="M148">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Assessments Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.4), the Assessments can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;X-ASSESS&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;X-ASSESS&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Assessments Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.4), the section type code of a Assessments must 
     be X-ASSESS 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Assessments Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.4), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M148"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M148"/>
   <xsl:template match="@*|node()" priority="-2" mode="M148">
      <xsl:apply-templates select="@*|*" mode="M148"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5-errorsIHE PCC Assessment and Plan Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Assessment and Plan Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5&#34;]"
                 priority="1000"
                 mode="M151">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Assessment and Plan Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5), the Assessment and Plan can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;X-AANDP&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;X-AANDP&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Assessment and Plan Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5), the section type code of an Assessment 
     and Plan must be X-AANDP 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Assessment and Plan Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.5), the section type code of Assessment and 
     Plan must come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M151"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M151"/>
   <xsl:template match="@*|node()" priority="-2" mode="M151">
      <xsl:apply-templates select="@*|*" mode="M151"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6-errorsIHE PCC Intravenous Fluids Administered Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Intravenous Fluids Administered Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6&#34;]"
                 priority="1000"
                 mode="M153">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Intravenous Fluids Administered Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6), the Intravenous Fluids 
      Administered can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;XIVFLU-X&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;XIVFLU-X&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Intravenous Fluids Administered Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6), the section type code of a 
     Intravenous Fluids Administered must be XIVFLU-X 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Intravenous Fluids Administered Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6), the section type code must 
     come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC Intravenous Fluids Administered Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6), the Intravenous Fluids 
     Administered Section must contain an Intravenous Fluids Administered Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.13.2.6
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M153"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M153"/>
   <xsl:template match="@*|node()" priority="-2" mode="M153">
      <xsl:apply-templates select="@*|*" mode="M153"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.7-errorsIHE PCC Progress Note Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Progress Note Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.7&#34;]"
                 priority="1000"
                 mode="M155">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.7&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Progress Note Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.7), the Progress Note can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;18733-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;18733-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Progress Note Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.7), the section type code of a Progress Note must 
     be 18733-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Progress Note Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.7), the section type code must come from the 
     LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M155"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M155"/>
   <xsl:template match="@*|node()" priority="-2" mode="M155">
      <xsl:apply-templates select="@*|*" mode="M155"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.8-errorsIHE PCC ED Consultations Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC ED Consultations Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.8&#34;]"
                 priority="1000"
                 mode="M157">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.8&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC ED Consultations Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.8), the ED Consultations can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;18693-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;18693-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC ED Consultations Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.8), the section type code of a ED 
     Consultations must be 18693-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC ED Consultations Section (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.8), the section type code must come 
     from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M157"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M157"/>
   <xsl:template match="@*|node()" priority="-2" mode="M157">
      <xsl:apply-templates select="@*|*" mode="M157"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9-errorsIHE PCC ED Diagnosis - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC ED Diagnosis - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9&#34;]"
                 priority="1000"
                 mode="M159">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC ED Diagnosis (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9), the ED Diagnosis can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11301-9&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11301-9&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC ED Diagnosis (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9), the section type code of a ED Diagnosis must be 11301-9 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC ED Diagnosis (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC ED Diagnosis (1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9), an ED Diagnosis must contain Conditions Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.13.2.9
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M159"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M159"/>
   <xsl:template match="@*|node()" priority="-2" mode="M159">
      <xsl:apply-templates select="@*|*" mode="M159"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1-errorsIHE PCC Acuity - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Acuity - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1&#34;]"
                 priority="1000"
                 mode="M161">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Acuity (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1), the entry shall have an &lt;id&gt; identifier.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Acuity (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1), the &lt;effectiveTime&gt; element shall be sent. It 
         records the interval of time over which triage occurs. The use case for this information requires that the ending
         time of triage be recorded. However, the &lt;low value=' '&gt; element may be sent by systems that capture the 
         beginning and end of the triage process.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:high[@value or @nullFlavor=&#34;UNK&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:effectiveTime/cda:high[@value or @nullFlavor=&#34;UNK&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Acuity (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.1), the use case for this information requires that the 
          ending time of triage be recorded.  This element records the time of completion of triage, and is required. If 
          unknown, it must be recorded using a flavor of null. This element may be sent using the TS data type.  If there
          is uncertainty about the time of completion of triage, the sender may record the time using the IVL_TS data type.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M161"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M161"/>
   <xsl:template match="@*|node()" priority="-2" mode="M161">
      <xsl:apply-templates select="@*|*" mode="M161"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2-errorsIHE PCC Intravenous Fluids - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Intravenous Fluids - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2&#34;]"
                 priority="1000"
                 mode="M163">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.24&#34;] and            cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;] and                   cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.24&#34;] and cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;] and cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Intravenous Fluids (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2), all Intravenous Fluid entries use the 
       &lt;templateId&gt; elements specified to indicate that they are IV fluid administration
       acts. See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:id) = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="count(cda:id) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Intravenous Fluids (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2), the &lt;substanceAdministration&gt; element 
       must be uniquely identified in an Intravenous Fluid. If there is no explicit identifier for this observation in the 
       source EMR system, a GUID may be used for the root attribute, and the extension may be omitted. Although HL7 allows
       for multiple identifiers, this profile requires that one and only one be used.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Intravenous Fluids (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2), the &lt;code&gt; element is required for 
       Intravenous Fluid, and is used to supply a code that describes the act of fluid administration, not the fluid being 
       administered. This may be a procedure code, such as those found in CPT-4 (and often used for billing), or may 
       describe the method of administration, such as by intravenous injection.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:effectiveTime) or     (cda:effectiveTime/cda:low[@value or @nullFlavor=&#34;UNK&#34;] and                   cda:effectiveTime/cda:high[@value or @nullFlavor=&#34;UNK&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:effectiveTime) or (cda:effectiveTime/cda:low[@value or @nullFlavor=&#34;UNK&#34;] and cda:effectiveTime/cda:high[@value or @nullFlavor=&#34;UNK&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Intravenous Fluids (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2), the &lt;low&gt; and &lt;high&gt; values of the
       &lt;effectiveTime&gt; element in Intravenous Fluids represent the start and stop times for the fluid administration. 
       The &lt;low&gt; value represents the start time, and the &lt;high&gt; value represents the stop time. If either the 
       &lt;low&gt; or the &lt;high&gt; value is unknown, this shall be recorded by setting the nullFlavor attribute to UNK.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34; or @code=&#34;active&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34; or @code=&#34;active&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Intravenous Fluids (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2), the status of all 
       &lt;substanceAdministration&gt; elements in Intravenous Fluids must be "completed" or "active". If "completed", then 
       the administration has occurred, or the request or order has been placed. If "active", then at the time recorded, the 
       fluid was still being administered.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:consumable//cda:manufacturedProduct//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:consumable//cda:manufacturedProduct//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Intravenous Fluids (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.2), the &lt;consumable&gt; element shall be 
       present in Intravenous Fluids, and shall contain a &lt;manufacturedProduct&gt; entry conforming to the Product Entry 
       template (1.3.6.1.4.1.19376.1.5.3.1.4.7.2).
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M163"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M163"/>
   <xsl:template match="@*|node()" priority="-2" mode="M163">
      <xsl:apply-templates select="@*|*" mode="M163"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.13.3.4-errorsIHE PCC Nursing Assessments Battery - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Nursing Assessments Battery - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.4&#34;]"
                 priority="1000"
                 mode="M165">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.13.3.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:organizer[@classCode=&#34;BATTERY&#34; and @moodCode=&#34;EVN&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:organizer[@classCode=&#34;BATTERY&#34; and @moodCode=&#34;EVN&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Nursing Assessments Battery (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.4), each row in the Nursing 
       Interventions battery be [sic] represented by an organizer with the classCode of 'BATTERY' and the moodCode of 'EVN'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Nursing Assessments Battery (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.4), each Nursing Assessments 
       battery SHALL have a globally unique identifier. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;X-ASSESS&#34; and @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;X-ASSESS&#34; and @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Nursing Assessments Battery (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.4), the &lt;code&gt; element 
       specifies the Loinc code that represents the content of the Nursing Assessments Battery. The codeSystem 
       attribute SHALL contain the value '2.16.840.1.113883.6.1'. The code attribute SHALL contain the value='X-ASSESS'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Nursing Assessments Battery (1.3.6.1.4.1.19376.1.5.3.1.1.13.3.4), the status code for all Nursing 
       Assessments Batteries SHALL be 'completed'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M165"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M165"/>
   <xsl:template match="@*|node()" priority="-2" mode="M165">
      <xsl:apply-templates select="@*|*" mode="M165"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1.1-errorsIHE PCC History of Infection - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC History of Infection - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1.1&#34;]"
                 priority="1000"
                 mode="M167">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
       Error: In IHE PCC History of Infection (1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1.1), the History of Infection can only be 
       used on sections. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;XX-HistoryOfInfection&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code = &#34;XX-HistoryOfInfection&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
       Error: In IHE PCC History of Infection (1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1.1), the section type code of a History of 
       Infection must be XX-HistoryOfInfection 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
       Error: In IHE PCC History of Infection (1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1.1), the section type code must come from 
       the LOINC code system (2.16.840.1.113883.6.1). 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M167"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M167"/>
   <xsl:template match="@*|node()" priority="-2" mode="M167">
      <xsl:apply-templates select="@*|*" mode="M167"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1-errorsIHE PCC Extremities - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Extremities - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1&#34;]"
                 priority="1000"
                 mode="M169">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
       Error: In IHE PCC Extremities (1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1), the Extremities can only be used on sections. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10196-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10196-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Extremities (1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1), the section type code of a Extremities must be 10196-4 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Extremities (1.3.6.1.4.1.19376.1.5.3.1.1.16.2.1), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M169"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M169"/>
   <xsl:template match="@*|node()" priority="-2" mode="M169">
      <xsl:apply-templates select="@*|*" mode="M169"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.1-errorsIHE PCC Medical Documents Specification - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Medical Documents Specification - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.1&#34;]" priority="1000"
                 mode="M171">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:ClinicalDocument"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:ClinicalDocument">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: IHE PCC Medical Document Specification template ID (1.3.6.1.4.1.19376.1.5.3.1.1.1) is in the
       wrong location.  An IHE PCC Medical Document Specification template ID shall be only used on a 
       ClinicalDocument.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: In IHE PCC Medical Document Specification template ID (1.3.6.1.4.1.19376.1.5.3.1.1.1), the document 
     type code must come from the LOINC code system (2.16.840.1.113883.6.1).
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M171"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M171"/>
   <xsl:template match="@*|node()" priority="-2" mode="M171">
      <xsl:apply-templates select="@*|*" mode="M171"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.2-errorsIHE PCC Medical Summary Specification - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Medical Summary Specification - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.2&#34;]" priority="1000"
                 mode="M173">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:ClinicalDocument"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:ClinicalDocument">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The Medical Summary can only be used on Clinical Documents.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The parent template identifier for Medical Summary is not present.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
     Error: The document type code must come from the LOINC code 
     system (2.16.840.1.113883.6.1).
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: The Medical Summary Document must contain a(n) Problem Concern Entry Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: The Medical Summary Document must contain a(n) Allergy Concern Entry Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: The Medical Summary Document must contain a(n) Medications Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M173"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M173"/>
   <xsl:template match="@*|node()" priority="-2" mode="M173">
      <xsl:apply-templates select="@*|*" mode="M173"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.1-errorsIHE PCC Hazardous Working Conditions - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Hazardous Working Conditions - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.1&#34;]"
                 priority="1000"
                 mode="M176">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hazardous Working Conditions Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.1), the Hazardous 
      Working Conditions can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10161-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10161-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Hazardous Working Conditions Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.1), the section type 
     code of a Hazardous Working Conditions must be 10161-8 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Hazardous Working Conditions Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.1), the section type 
     code must come from the LOINC code  system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M176"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M176"/>
   <xsl:template match="@*|node()" priority="-2" mode="M176">
      <xsl:apply-templates select="@*|*" mode="M176"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2-errorsIHE PCC Coded Vital Signs Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Coded Vital Signs Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2&#34;]"
                 priority="1000"
                 mode="M178">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2), the Coded Vital Signs can only 
      be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.25&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.25&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2), the parent template identifier 
      for Coded Vital Signs is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;8716-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;8716-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2), the section type code of a Coded 
      Vital Signs must be 8716-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2), the section type code must come 
      from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Coded Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2), a Coded Vital Signs must contain 
      Vital Signs Organizer.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.5.3.2
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M178"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M178"/>
   <xsl:template match="@*|node()" priority="-2" mode="M178">
      <xsl:apply-templates select="@*|*" mode="M178"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3-errorsIHE PCC Encounter Histories Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Encounter Histories Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3&#34;]"
                 priority="1000"
                 mode="M180">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Encounter Histories Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3), the Encounter Histories 
      can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Encounter Histories Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3), the parent template 
      identifier for Encounter Histories is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;46240-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;46240-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Encounter Histories Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3), the section type code of an 
      Encounter Histories must be 46240-8 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Encounter Histories Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.14&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.14&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Encounter Histories Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3), a(n) Encounter Histories must 
      contain Encounters.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.5.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M180"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M180"/>
   <xsl:template match="@*|node()" priority="-2" mode="M180">
      <xsl:apply-templates select="@*|*" mode="M180"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4-errorsIHE PCC Pregnancy History Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Pregnancy History Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4&#34;]"
                 priority="1000"
                 mode="M182">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Pregnancy History Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4), the Pregnancy History can only 
      be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10162-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10162-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Pregnancy History Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4), the section type code of a 
      Pregnancy History must be 10162-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Pregnancy History Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Pregnancy History Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4), a Pregnancy History must 
      contain Pregnancy Observation.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.5.3.4
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M182"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M182"/>
   <xsl:template match="@*|node()" priority="-2" mode="M182">
      <xsl:apply-templates select="@*|*" mode="M182"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5-errorsIHE PCC Medical Devices Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Medical Devices Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5&#34;]"
                 priority="1000"
                 mode="M184">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medical Devices Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5), the Medical Devices can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medical Devices Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5), the parent template 
      identifier for Medical Devices is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;46264-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;46264-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medical Devices Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5), the section type code 
      of a Medical Devices must be 46264-8 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medical Devices Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.5), the section type code 
      must come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M184"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M184"/>
   <xsl:template match="@*|node()" priority="-2" mode="M184">
      <xsl:apply-templates select="@*|*" mode="M184"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.6-errorsIHE PCC Foreign Travel Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Foreign Travel Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.6&#34;]"
                 priority="1000"
                 mode="M186">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.6&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Foreign Travel Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.6), the Foreign Travel can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10182-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10182-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Foreign Travel Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.6), the section type code of a 
      Foreign Travel must be 10182-4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Foreign Travel Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.6), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M186"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M186"/>
   <xsl:template match="@*|node()" priority="-2" mode="M186">
      <xsl:apply-templates select="@*|*" mode="M186"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7-errorsIHE PCC Payers Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Payers Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7&#34;]"
                 priority="1000"
                 mode="M188">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Payers Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7), the Payers can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.9&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.9&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Payers Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7), the parent template identifier for Payers 
     is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;48768-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;48768-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Payers Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7), the section type code of a Payers must be 
     48768-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Payers Section (1.3.6.1.4.1.19376.1.5.3.1.1.5.3.7), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M188"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M188"/>
   <xsl:template match="@*|node()" priority="-2" mode="M188">
      <xsl:apply-templates select="@*|*" mode="M188"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.15-errorsIHE PCC Physical Exam Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Physical Exam Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.15&#34;]"
                 priority="1000"
                 mode="M190">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.15&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Physical Exam Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.15), the Physical Exam can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.24&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.24&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Physical Exam Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.15), the parent template identifier 
      for Physical Exam is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;29545-1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;29545-1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Physical Exam Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.15), the section type code of a 
      Physical Exam must be 29545-1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Physical Exam Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.15), the section type code must come 
      from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M190"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M190"/>
   <xsl:template match="@*|node()" priority="-2" mode="M190">
      <xsl:apply-templates select="@*|*" mode="M190"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.16-errorsIHE PCC General Appearance Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC General Appearance Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.16&#34;]"
                 priority="1000"
                 mode="M193">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.16&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC General Appearance Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.16), the General Appearance can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10210-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10210-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC General Appearance Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.16), the section type code of a 
      General Appearance must be 10210-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC General Appearance Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.16), the section type code must 
      come from the LOINC code  system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M193"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M193"/>
   <xsl:template match="@*|node()" priority="-2" mode="M193">
      <xsl:apply-templates select="@*|*" mode="M193"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.17-errorsIHE PCC Integumentary System Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Integumentary System Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.17&#34;]"
                 priority="1000"
                 mode="M195">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.17&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Integumentary System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.17), the Integumentary System 
      can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;29302-7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;29302-7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Integumentary System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.17), the section type code of an 
      Integumentary System must be 29302-7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Integumentary System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.17), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M195"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M195"/>
   <xsl:template match="@*|node()" priority="-2" mode="M195">
      <xsl:apply-templates select="@*|*" mode="M195"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.18-errorsIHE PCC Head Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Head Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.18&#34;]"
                 priority="1000"
                 mode="M197">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.18&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Head Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.18), the Head can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10199-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10199-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Head Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.18), the section type code of a Head must be 10199-8 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Head Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.18), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M197"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M197"/>
   <xsl:template match="@*|node()" priority="-2" mode="M197">
      <xsl:apply-templates select="@*|*" mode="M197"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.19-errorsIHE PCC Eyes Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Eyes Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.19&#34;]"
                 priority="1000"
                 mode="M199">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.19&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Eyes Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.19), the Eyes can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10197-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10197-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Eyes Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.19), the section type code of a Eyes must be 10197-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Eyes Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.19), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M199"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M199"/>
   <xsl:template match="@*|node()" priority="-2" mode="M199">
      <xsl:apply-templates select="@*|*" mode="M199"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.20-errorsIHE PCC Ears, Nose, Mouth and Throat Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Ears, Nose, Mouth and Throat Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.20&#34;]"
                 priority="1000"
                 mode="M201">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.20&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Ears, Nose, Mouth and Throat Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.20), the Ears, Nose, 
      Mouth and Throat can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11393-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11393-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Ears, Nose, Mouth and Throat Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.20), the section type 
      code of a Ears, Nose, Mouth and Throat must be 11393-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Ears, Nose, Mouth and Throat Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.20), the section type 
      code must come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M201"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M201"/>
   <xsl:template match="@*|node()" priority="-2" mode="M201">
      <xsl:apply-templates select="@*|*" mode="M201"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.21-errorsIHE PCC Ears Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Ears Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.21&#34;]"
                 priority="1000"
                 mode="M203">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.21&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Ears Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.21), the Ears can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10195-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10195-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Ears Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.21), the section type code of a Ears must be 10195-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Ears Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.21), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M203"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M203"/>
   <xsl:template match="@*|node()" priority="-2" mode="M203">
      <xsl:apply-templates select="@*|*" mode="M203"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.22-errorsIHE PCC Nose Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Nose Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.22&#34;]"
                 priority="1000"
                 mode="M205">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.22&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Nose Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.22), the Nose can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10203-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10203-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Nose Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.22), the section type code of a Nose must be 10203-8 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Nose Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.22), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M205"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M205"/>
   <xsl:template match="@*|node()" priority="-2" mode="M205">
      <xsl:apply-templates select="@*|*" mode="M205"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.23-errorsIHE PCC Mouth, Throat and Teeth Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Mouth, Throat and Teeth Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.23&#34;]"
                 priority="1000"
                 mode="M207">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.23&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Mouth, Throat and Teeth Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.23), the Mouth, Throat and 
      Teeth can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10201-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10201-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Mouth, Throat and Teeth Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.23), the section type code 
      of a Mouth, Throat and Teeth must be 10201-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Mouth, Throat and Teeth Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.23), the section type code 
      must come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M207"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M207"/>
   <xsl:template match="@*|node()" priority="-2" mode="M207">
      <xsl:apply-templates select="@*|*" mode="M207"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.24-errorsIHE PCC Neck Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Neck Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.24&#34;]"
                 priority="1000"
                 mode="M209">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.24&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Neck Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.24), the Neck can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11411-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11411-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Neck Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.24), the section type code of a Neck must be 11411-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Neck Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.24), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M209"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M209"/>
   <xsl:template match="@*|node()" priority="-2" mode="M209">
      <xsl:apply-templates select="@*|*" mode="M209"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.25-errorsIHE PCC Endocrine System Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Endocrine System Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.25&#34;]"
                 priority="1000"
                 mode="M211">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.25&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Endocrine System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.25), the Endocrine System can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;29307-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;29307-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Endocrine System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.25), the section type code of a 
      Endocrine System must be 29307-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Endocrine System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.25), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M211"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M211"/>
   <xsl:template match="@*|node()" priority="-2" mode="M211">
      <xsl:apply-templates select="@*|*" mode="M211"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.26-errorsIHE PCC Thorax and Lungs Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Thorax and Lungs Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.26&#34;]"
                 priority="1000"
                 mode="M213">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.26&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Thorax and Lungs Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.26), the Thorax and Lungs can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10207-9&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10207-9&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Thorax and Lungs Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.26), the section type code of a Thorax 
      and Lungs must be 10207-9 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Thorax and Lungs Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.26), the section type code must come 
      from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M213"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M213"/>
   <xsl:template match="@*|node()" priority="-2" mode="M213">
      <xsl:apply-templates select="@*|*" mode="M213"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.27-errorsIHE PCC Chest Wall Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Chest Wall Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.27&#34;]"
                 priority="1000"
                 mode="M215">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.27&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Chest Wall Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.27), the Chest Wall can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11392-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11392-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Chest Wall Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.27), the section type code of a Chest Wall must be 11392-8 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Chest Wall Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.27), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M215"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M215"/>
   <xsl:template match="@*|node()" priority="-2" mode="M215">
      <xsl:apply-templates select="@*|*" mode="M215"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.28-errorsIHE PCC Breast Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Breast Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.28&#34;]"
                 priority="1000"
                 mode="M217">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.28&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Breast Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.28), the Breast can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10193-1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10193-1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Breast Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.28), the section type code of a Breast must be 10193-1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Breast Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.28), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M217"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M217"/>
   <xsl:template match="@*|node()" priority="-2" mode="M217">
      <xsl:apply-templates select="@*|*" mode="M217"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.29-errorsIHE PCC Heart Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Heart Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.29&#34;]"
                 priority="1000"
                 mode="M219">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.29&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Heart Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.29), the Heart can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10200-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10200-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Heart Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.29), the section type code of a Heart must be 10200-4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Heart Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.29), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M219"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M219"/>
   <xsl:template match="@*|node()" priority="-2" mode="M219">
      <xsl:apply-templates select="@*|*" mode="M219"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.30-errorsIHE PCC Respiratory System Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Respiratory System Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.30&#34;]"
                 priority="1000"
                 mode="M221">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.30&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Respiratory System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.30), the Respiratory System can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11412-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11412-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Respiratory System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.30), the section type code of a 
      Respiratory System must be 11412-4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Respiratory System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.30), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M221"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M221"/>
   <xsl:template match="@*|node()" priority="-2" mode="M221">
      <xsl:apply-templates select="@*|*" mode="M221"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.31-errorsIHE PCC Abdomen Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Abdomen Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.31&#34;]"
                 priority="1000"
                 mode="M223">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.31&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Abdomen Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.31), the Abdomen can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10191-5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10191-5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Abdomen Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.31), the section type code of a Abdomen must be 10191-5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Abdomen Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.31), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M223"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M223"/>
   <xsl:template match="@*|node()" priority="-2" mode="M223">
      <xsl:apply-templates select="@*|*" mode="M223"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.32-errorsIHE PCC Lymphatic System Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Lymphatic System Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.32&#34;]"
                 priority="1000"
                 mode="M225">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.32&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Lymphatic System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.32), the Lymphatic System can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11447-0&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11447-0&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Lymphatic System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.32), the section type code of a 
     Lymphatic System must be 11447-0 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Lymphatic System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.32), the section type code must come 
     from the LOINC code  system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M225"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M225"/>
   <xsl:template match="@*|node()" priority="-2" mode="M225">
      <xsl:apply-templates select="@*|*" mode="M225"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.33-errorsIHE PCC Vessels Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Vessels Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.33&#34;]"
                 priority="1000"
                 mode="M227">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.33&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Vessels Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.33), the Vessels can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10208-7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10208-7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Vessels Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.33), the section type code of a Vessels must be 10208-7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Vessels Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.33), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M227"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M227"/>
   <xsl:template match="@*|node()" priority="-2" mode="M227">
      <xsl:apply-templates select="@*|*" mode="M227"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.34-errorsIHE PCC Musculoskeletal System Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Musculoskeletal System Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.34&#34;]"
                 priority="1000"
                 mode="M229">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.34&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Musculoskeletal System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.34), the Musculoskeletal System 
      can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11410-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11410-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Musculoskeletal System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.34), the section type code of a 
      Musculoskeletal System must be 11410-8 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Musculoskeletal System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.34), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M229"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M229"/>
   <xsl:template match="@*|node()" priority="-2" mode="M229">
      <xsl:apply-templates select="@*|*" mode="M229"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.35-errorsIHE PCC Neurologic System Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Neurologic System Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.35&#34;]"
                 priority="1000"
                 mode="M231">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.35&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Neurologic System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.35), the Neurologic System can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10202-0&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10202-0&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Neurologic System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.35), the section type code of a 
      Neurologic System must be 10202-0 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Neurologic System Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.35), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M231"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M231"/>
   <xsl:template match="@*|node()" priority="-2" mode="M231">
      <xsl:apply-templates select="@*|*" mode="M231"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.36-errorsIHE PCC Genitalia Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Genitalia Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.36&#34;]"
                 priority="1000"
                 mode="M233">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.36&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Genitalia Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.36), the Genitalia can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11400-9&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11400-9&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Genitalia Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.36), the section type code of a Genitalia must be 11400-9 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Genitalia Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.36), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M233"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M233"/>
   <xsl:template match="@*|node()" priority="-2" mode="M233">
      <xsl:apply-templates select="@*|*" mode="M233"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.37-errorsIHE PCC Rectum Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Rectum Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.37&#34;]"
                 priority="1000"
                 mode="M235">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.37&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Rectum Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.37), the Rectum can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10205-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10205-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Rectum Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.37), the section type code of a Rectum must be 10205-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Rectum Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.37), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M235"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M235"/>
   <xsl:template match="@*|node()" priority="-2" mode="M235">
      <xsl:apply-templates select="@*|*" mode="M235"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.38-errorsIHE PCC Patient Education and Consents Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Patient Education and Consents Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.38&#34;]"
                 priority="1000"
                 mode="M237">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.38&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Patient Education and Consents Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.38), the Patient Education 
      and Consents can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;34895-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;34895-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Patient Education and Consents Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.38), the section type code 
      of a Patient Education and Consents must be 34895-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Patient Education and Consents Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.38), the section type code 
      must come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M237"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M237"/>
   <xsl:template match="@*|node()" priority="-2" mode="M237">
      <xsl:apply-templates select="@*|*" mode="M237"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.39-errorsIHE PCC Patient Education and Consents - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Patient Education and Consents - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.39&#34;]"
                 priority="1000"
                 mode="M239">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.39&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Patient Education and Consents (1.3.6.1.4.1.19376.1.5.3.1.1.9.39), the Patient Education and 
      Consents can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.38&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.38&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Patient Education and Consents (1.3.6.1.4.1.19376.1.5.3.1.1.9.39), the parent template 
      identifier for Patient Education and Consents is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;34895-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;34895-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Patient Education and Consents (1.3.6.1.4.1.19376.1.5.3.1.1.9.39), the section type code of a 
      Patient Education and Consents must be 34895-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Patient Education and Consents (1.3.6.1.4.1.19376.1.5.3.1.1.9.39), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Patient Education and Consents (1.3.6.1.4.1.19376.1.5.3.1.1.9.39), the Patient Education and 
      Consents Section must contain a(n) Procedure Entry Entry.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.1.9.39 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M239"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M239"/>
   <xsl:template match="@*|node()" priority="-2" mode="M239">
      <xsl:apply-templates select="@*|*" mode="M239"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.1.9.48-errorsIHE PCC Visible Implanted Medical Devices Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Visible Implanted Medical Devices Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.48&#34;]"
                 priority="1000"
                 mode="M242">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.1.9.48&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Visible Implanted Medical Devices Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.48), the Visible Implanted 
      Medical Devices can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Visible Implanted Medical Devices Section (1.3.6.1.4.1.19376.1.5.3.1.1.9.48), the section type code 
     of a Visible Implated Medical Decides must come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M242"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M242"/>
   <xsl:template match="@*|node()" priority="-2" mode="M242">
      <xsl:apply-templates select="@*|*" mode="M242"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.2.1-errorsIHE PCC Language Communication - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Language Communication - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.1&#34;]" priority="1001"
                 mode="M244">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:languageCommunication"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:languageCommunication">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Language Communication (1.3.6.1.4.1.19376.1.5.3.1.2.1), the IHE PCC LanguageCommunication shall 
      describe this information using the languageCommunication element.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:languageCode"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:languageCode">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Language Communication (1.3.6.1.4.1.19376.1.5.3.1.2.1), the languageCode element describes the 
      language code. It uses the same vocabulary described for the ClinicalDocument/languageCode element described in 
      more detail in HL7 CRS: 2.1.1. This element is required.  
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:modeCode) or                   cda:modeCode[@codeSystem=&#34;2.16.840.1.113883.5.60&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:modeCode) or cda:modeCode[@codeSystem=&#34;2.16.840.1.113883.5.60&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Language Communication (1.3.6.1.4.1.19376.1.5.3.1.2.1), the modeCode element describes the mode 
      of use, and is only necessary when there are differences between expressive and receptive abilities. This element
      is optional. When not present, the assumption is that any further detail provided within the languageCommunication 
      element refers to all common modes of communication. The coding system used shall be the HL7 LanguageAbilityMode 
      vocabulary when this element is communicated.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:proficiencyLevelCode) or                  cda:proficiencyLevelCode[@codeSystem=&#34;2.16.840.1.113883.5.61&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:proficiencyLevelCode) or cda:proficiencyLevelCode[@codeSystem=&#34;2.16.840.1.113883.5.61&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Language Communication (1.3.6.1.4.1.19376.1.5.3.1.2.1), the proficiencyLevelCode element describes
      the proficiency of the patient (with respect to the mode if specified). This element is optional. The coding system
      used shall be the HL7 LanguageProficiencyCode vocabulary when this element is communicated.  
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:preferenceInd) or                  cda:preferenceInd[@value=&#34;true&#34;] or                  cda:preferenceInd[@value=&#34;false&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:preferenceInd) or cda:preferenceInd[@value=&#34;true&#34;] or cda:preferenceInd[@value=&#34;false&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Language Communication (1.3.6.1.4.1.19376.1.5.3.1.2.1), the preferenceInd shall be valued "true" 
      if this language is the patient's preferred language for communication, or "false" if this is not the patient's 
      preferred language.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M244"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="/" priority="1000" mode="M244">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl" context="/"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(//cda:recordTarget//cda:languageCommunication) &lt; 2 or                     count(//cda:recordTarget//cda:languageCommunication) = count(//cda:recordTarget//cda:languageCommunication/cda:preferenceInd) "/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(//cda:recordTarget//cda:languageCommunication) &lt; 2 or count(//cda:recordTarget//cda:languageCommunication) = count(//cda:recordTarget//cda:languageCommunication/cda:preferenceInd)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Language Communication (1.3.6.1.4.1.19376.1.5.3.1.2.1), the preferenceInd element shall be 
         present on all languageCommunication elements when more than one is provided.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.1&#34;]) = 0 or             count(//cda:languageCommunication/cda:preferenceInd[@value=&#34;true&#34;]) &gt; 0"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.1&#34;]) = 0 or count(//cda:languageCommunication/cda:preferenceInd[@value=&#34;true&#34;]) &gt; 0">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Language Communication (1.3.6.1.4.1.19376.1.5.3.1.2.1), when present at least one languageCommunication
	 element must have a preferred value of true.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M244"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M244"/>
   <xsl:template match="@*|node()" priority="-2" mode="M244">
      <xsl:apply-templates select="@*|*" mode="M244"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.2.2-errorsIHE PCC Employer and School Contacts - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Employer and School Contacts - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.2&#34;]" priority="1000"
                 mode="M246">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:participant[@typeCode = &#34;IND&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:participant[@typeCode = &#34;IND&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Employer and School Contacts (1.3.6.1.4.1.19376.1.5.3.1.2.2), the typeCode of the participant
       shall be IND.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:time/cda:low and cda:time/cda:high"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:time/cda:low and cda:time/cda:high">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Employer and School Contacts (1.3.6.1.4.1.19376.1.5.3.1.2.2), time element indicates the start 
       and stop time range for this contact. These dates shall correspond to the start and stop dates for employment, 
       enrollment, or other affiliation with the organization described.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="descendant::cda:code[@code]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="descendant::cda:code[@code]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Employer and School Contacts (1.3.6.1.4.1.19376.1.5.3.1.2.2), the code value shall indicate 
       whether the participant is the employer, school or other affiliated (e.g., volunteer) organization.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(.//cda:associatedPerson) = 0 or                   count(.//cda:associatedPerson) = count(.//cda:associatedPerson/cda:name)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(.//cda:associatedPerson) = 0 or count(.//cda:associatedPerson) = count(.//cda:associatedPerson/cda:name)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Employer and School Contacts (1.3.6.1.4.1.19376.1.5.3.1.2.2), when an associatedPerson is
       present, it shall provide the name of a contact person within the organization.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:scopingOrganization/cda:name and                   .//cda:scopingOrganization/cda:telecom and                   .//cda:scopingOrganization/cda:addr"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:scopingOrganization/cda:name and .//cda:scopingOrganization/cda:telecom and .//cda:scopingOrganization/cda:addr">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Employer and School Contacts (1.3.6.1.4.1.19376.1.5.3.1.2.2), a scopingOrganization element 
       shall be present and shall provide the name, address and phone number of the organization.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M246"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M246"/>
   <xsl:template match="@*|node()" priority="-2" mode="M246">
      <xsl:apply-templates select="@*|*" mode="M246"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.2.3-errorsIHE PCC Healthcare Providers and Pharmacies - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Healthcare Providers and Pharmacies - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.3&#34;]" priority="1000"
                 mode="M248">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="ancestor::cda:documentationOf/cda:serviceEvent[@classCode =     &#34;PCPR&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="ancestor::cda:documentationOf/cda:serviceEvent[@classCode = &#34;PCPR&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Healthcare Providers and Pharmacies (1.3.6.1.4.1.19376.1.5.3.1.2.3), the documentationOf element 
       shall be present. The serviceEvent element shall be present, and shall have a classCode attribute of 'PCPR'.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.2.3
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="preceding-sibling::cda:effectiveTime/cda:low and                    preceding-sibling::cda:effectiveTime/cda:high"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="preceding-sibling::cda:effectiveTime/cda:low and preceding-sibling::cda:effectiveTime/cda:high">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Healthcare Providers and Pharmacies (1.3.6.1.4.1.19376.1.5.3.1.2.3), in effectiveTime there shall 
       be a low element which records the starting date of care provision, and a high element which records the ending date 
       of care provision.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:time/cda:low and cda:time/cda:high"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:time/cda:low and cda:time/cda:high">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Healthcare Providers and Pharmacies (1.3.6.1.4.1.19376.1.5.3.1.2.3), the time element is used to 
       show the time period over which the provider gave care to the patient. The low and high elements must be present, 
       and indicate the time over which care was (or is to be) provided.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedEntity"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:assignedEntity">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Healthcare Providers and Pharmacies (1.3.6.1.4.1.19376.1.5.3.1.2.3), the assignedEntity element 
       contains elements that identify the individual provider, and shall be present.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:assignedEntity/cda:assignedPerson/cda:name or            cda:assignedEntity/cda:representedOrganization"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:assignedEntity/cda:assignedPerson/cda:name or cda:assignedEntity/cda:representedOrganization">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Healthcare Providers and Pharmacies (1.3.6.1.4.1.19376.1.5.3.1.2.3), the providers name should 
       be present. If not present, then the representedOrganization shall be present.   
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.2.3
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M248"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M248"/>
   <xsl:template match="@*|node()" priority="-2" mode="M248">
      <xsl:apply-templates select="@*|*" mode="M248"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.2.4.1-errorsIHE PCC Spouse - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Spouse - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4.1&#34;]"
                 priority="1000"
                 mode="M250">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@nullFlavor or cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@nullFlavor or cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Spouse (1.3.6.1.4.1.19376.1.5.3.1.2.4.1), the parent of this template is Patient Contacts
       and must be recorded exactly as shown.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.2.4.1
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@nullFlavor or cda:associatedEntity/@classCode=&#34;PRS&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@nullFlavor or cda:associatedEntity/@classCode=&#34;PRS&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Spouse (1.3.6.1.4.1.19376.1.5.3.1.2.4.1), the classCode attribute of the associated entity 
       shall be PRS.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@nullFlavor or                  cda:associatedEntity/cda:code[@code=&#34;xx-spouse&#34; or @code=&#34;184142008&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@nullFlavor or cda:associatedEntity/cda:code[@code=&#34;xx-spouse&#34; or @code=&#34;184142008&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Spouse (1.3.6.1.4.1.19376.1.5.3.1.2.4.1), this element SHALL use xx-spouse (requested) to represent
       the patient's spouse or 184142008 to represent the patient's next of kin.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M250"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M250"/>
   <xsl:template match="@*|node()" priority="-2" mode="M250">
      <xsl:apply-templates select="@*|*" mode="M250"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.2.4.2-errorsIHE PCC Natural Father of Fetus - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Natural Father of Fetus - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4.2&#34;]"
                 priority="1000"
                 mode="M252">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@nullFlavor or cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@nullFlavor or cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Natural Father of Fetus (1.3.6.1.4.1.19376.1.5.3.1.2.4.2), parent of this template is Patient Contacts
       and must be recorded exactly as shown.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.2.4.2 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@nullFlavor or cda:associatedEntity/@classCode=&#34;PRS&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@nullFlavor or cda:associatedEntity/@classCode=&#34;PRS&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Natural Father of Fetus (1.3.6.1.4.1.19376.1.5.3.1.2.4.2), the classCode attribute of the associated 
       entity shall be PRS.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@nullFlavor or cda:associatedEntity/cda:code[@code=&#34;xx-fatherofbaby&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@nullFlavor or cda:associatedEntity/cda:code[@code=&#34;xx-fatherofbaby&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Natural Father of Fetus (1.3.6.1.4.1.19376.1.5.3.1.2.4.2), the code SHALL be xx-fatherofbaby
       (requested).
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M252"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M252"/>
   <xsl:template match="@*|node()" priority="-2" mode="M252">
      <xsl:apply-templates select="@*|*" mode="M252"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.2.4-errorsIHE PCC Patient Contacts - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Patient Contacts - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4&#34;]" priority="1000"
                 mode="M254">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.2.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(../cda:participant) or ../cda:participant[@typeCode=&#34;IND&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(../cda:participant) or ../cda:participant[@typeCode=&#34;IND&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Patient Contacts (1.3.6.1.4.1.19376.1.5.3.1.2.4), contacts that are recorded as participant
       elements shall have the classCode attribute shall set to 'IND'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(../cda:participant) or                   cda:associatedEntity[@classCode = &#34;AGNT&#34; or                                        @classCode = &#34;CAREGIVER&#34; or                                        @classCode = &#34;ECON&#34; or                                        @classCode = &#34;NOK&#34; or                                        @classCode = &#34;PRS&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(../cda:participant) or cda:associatedEntity[@classCode = &#34;AGNT&#34; or @classCode = &#34;CAREGIVER&#34; or @classCode = &#34;ECON&#34; or @classCode = &#34;NOK&#34; or @classCode = &#34;PRS&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Patient Contacts (1.3.6.1.4.1.19376.1.5.3.1.2.4), the associatedEntity element identifies the 
      type of contact. The classCode attribute shall be present, and contains a value from the set AGNT, CAREGIVER, 
      ECON, NOK, or PRS to identify contacts that are agents of the patient, care givers, emergency contacts, next 
      of kin, or other relations respectively.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(../cda:participant) or                   not(cda:associatedEntity/cda:code) or                    cda:associatedEntity/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.5.111&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(../cda:participant) or not(cda:associatedEntity/cda:code) or cda:associatedEntity/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.5.111&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Patient Contacts (1.3.6.1.4.1.19376.1.5.3.1.2.4), in the associatedEntity code, the code 
       attribute is required and comes from the HL7 PersonalRelationshipRoleType vocabulary. The codeSystem attribute 
       is required and shall be represented exactly as shown.  
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.2.4
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M254"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M254"/>
   <xsl:template match="@*|node()" priority="-2" mode="M254">
      <xsl:apply-templates select="@*|*" mode="M254"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.11-errorsIHE PCC List of Surgeries Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC List of Surgeries Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.11&#34;]"
                 priority="1000"
                 mode="M256">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.11&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC List of Surgeries Section (1.3.6.1.4.1.19376.1.5.3.1.3.11), the List of Surgeries can only be
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.12&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.12&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC List of Surgeries Section (1.3.6.1.4.1.19376.1.5.3.1.3.11), the parent template identifier for 
     List of Surgeries is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;47519-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;47519-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC List of Surgeries Section (1.3.6.1.4.1.19376.1.5.3.1.3.11), the section type code of a List of 
     Surgeries must be 47519-4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC List of Surgeries Section (1.3.6.1.4.1.19376.1.5.3.1.3.11), the section type code must come from 
     the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M256"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M256"/>
   <xsl:template match="@*|node()" priority="-2" mode="M256">
      <xsl:apply-templates select="@*|*" mode="M256"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.12-errorsIHE PCC Coded List of Surgeries Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Coded List of Surgeries Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.12&#34;]"
                 priority="1000"
                 mode="M258">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.12&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded List of Surgeries Section: 1.3.6.1.4.1.19376.1.5.3.1.3.12, the Coded List of Surgeries 
      can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.11&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.11&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded List of Surgeries Section: 1.3.6.1.4.1.19376.1.5.3.1.3.12, the parent template identifier 
      for Coded List of Surgeries is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;47519-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;47519-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Coded List of Surgeries Section: 1.3.6.1.4.1.19376.1.5.3.1.3.12, the section type code of a Coded 
     List of Surgeries must be 47519-4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: iIn IHE PCC Coded List of Surgeries Section: 1.3.6.1.4.1.19376.1.5.3.1.3.12, the section type code must come 
     from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC Coded List of Surgeries Section: 1.3.6.1.4.1.19376.1.5.3.1.3.12, a Coded List of Surgeries must 
     contain Procedure Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.12
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M258"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M258"/>
   <xsl:template match="@*|node()" priority="-2" mode="M258">
      <xsl:apply-templates select="@*|*" mode="M258"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.13-errorsIHE PCC Allergies and Other Adverse Reactions Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Allergies and Other Adverse Reactions Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.13&#34;]"
                 priority="1000"
                 mode="M260">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.13&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Allergies and Other Adverse Reactions Section (1.3.6.1.4.1.19376.1.5.3.1.3.13), the Allergies and 
      Other Adverse Reactions can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Allergies and Other Adverse Reactions Section (1.3.6.1.4.1.19376.1.5.3.1.3.13), the parent template 
     identifier for Allergies and Other Adverse Reactions is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;48765-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;48765-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Allergies and Other Adverse Reactions Section (1.3.6.1.4.1.19376.1.5.3.1.3.13), the section type code 
     of a Allergies and Other Adverse Reactions must be 48765-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Allergies and Other Adverse Reactions Section (1.3.6.1.4.1.19376.1.5.3.1.3.13), the section type code 
     must come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root =      &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC Allergies and Other Adverse Reactions Section (1.3.6.1.4.1.19376.1.5.3.1.3.13), an Allergies and Other 
     Adverse Reactions must contain Allergies and Intolerances Concern.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.13
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M260"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M260"/>
   <xsl:template match="@*|node()" priority="-2" mode="M260">
      <xsl:apply-templates select="@*|*" mode="M260"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.14-errorsIHE PCC Family Medical History - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Family Medical History - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.14&#34;]"
                 priority="1000"
                 mode="M262">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.14&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Family Medical History (1.3.6.1.4.1.19376.1.5.3.1.3.14), the Family Medical History can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Family Medical History (1.3.6.1.4.1.19376.1.5.3.1.3.14), the parent template identifier for Family 
      Medical History is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10157-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10157-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Family Medical History (1.3.6.1.4.1.19376.1.5.3.1.3.14), the section type code of a Family Medical 
      History must be 10157-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Family Medical History (1.3.6.1.4.1.19376.1.5.3.1.3.14), the section type code must come from the 
      LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M262"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M262"/>
   <xsl:template match="@*|node()" priority="-2" mode="M262">
      <xsl:apply-templates select="@*|*" mode="M262"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.15-errorsIHE PCC Coded Family Medical History Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Coded Family Medical History Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.15&#34;]"
                 priority="1000"
                 mode="M264">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.15&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Family Medical History Section (1.3.6.1.4.1.19376.1.5.3.1.3.15), the Coded Family Medical 
      History can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.14&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.14&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Family Medical History Section (1.3.6.1.4.1.19376.1.5.3.1.3.15), the parent template 
      identifier for Coded Family Medical History is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10157-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10157-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Family Medical History Section (1.3.6.1.4.1.19376.1.5.3.1.3.15), the section type code of 
      a Coded Family Medical History must be 10157-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Family Medical History Section (1.3.6.1.4.1.19376.1.5.3.1.3.15), the section type code must 
      come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.15&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.15&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Coded Family Medical History Section (1.3.6.1.4.1.19376.1.5.3.1.3.15), a Coded Family Medical 
      History must contain Family History Organizer.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.15
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M264"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M264"/>
   <xsl:template match="@*|node()" priority="-2" mode="M264">
      <xsl:apply-templates select="@*|*" mode="M264"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.16-errorsIHE PCC Social History Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Social History Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.16&#34;]"
                 priority="1000"
                 mode="M266">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.16&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Social History Section (1.3.6.1.4.1.19376.1.5.3.1.3.16), the Social History can only be used 
      on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.15&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.15&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Social History Section (1.3.6.1.4.1.19376.1.5.3.1.3.16), the parent template identifier for 
      Social History is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;29762-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;29762-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Social History Section (1.3.6.1.4.1.19376.1.5.3.1.3.16), the section type code of a Social 
      History must be 29762-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Social History Section (1.3.6.1.4.1.19376.1.5.3.1.3.16), the section type code must come from 
      the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M266"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M266"/>
   <xsl:template match="@*|node()" priority="-2" mode="M266">
      <xsl:apply-templates select="@*|*" mode="M266"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.17-errorsIHE PCC Functional Status Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Functional Status Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.17&#34;]"
                 priority="1000"
                 mode="M268">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.17&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Functional Status Section (1.3.6.1.4.1.19376.1.5.3.1.3.17), the Functional Status can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Functional Status Section (1.3.6.1.4.1.19376.1.5.3.1.3.17), the parent template identifier for 
      Functional Status is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;47420-5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;47420-5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Functional Status Section (1.3.6.1.4.1.19376.1.5.3.1.3.17), the section type code of a Functional 
      Status must be 47420-5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Functional Status Section (1.3.6.1.4.1.19376.1.5.3.1.3.17), the section type code must come from 
      the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M268"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M268"/>
   <xsl:template match="@*|node()" priority="-2" mode="M268">
      <xsl:apply-templates select="@*|*" mode="M268"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.18-errorsIHE PCC Review of Systems Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Review of Systems Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.18&#34;]"
                 priority="1000"
                 mode="M270">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.18&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Review of Systems Section (1.3.6.1.4.1.19376.1.5.3.1.3.18), the Review of Systems can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10187-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10187-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Review of Systems Section (1.3.6.1.4.1.19376.1.5.3.1.3.18), the section type code of a Review 
      of Systems must be 10187-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Review of Systems Section (1.3.6.1.4.1.19376.1.5.3.1.3.18), the section type code must come 
      from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M270"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M270"/>
   <xsl:template match="@*|node()" priority="-2" mode="M270">
      <xsl:apply-templates select="@*|*" mode="M270"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.19-errorsIHE PCC Medications Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Medications Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.19&#34;]"
                 priority="1000"
                 mode="M272">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.19&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.19), the Medications can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.19), the parent template identifier for Medications 
      is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10160-0&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10160-0&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.19), the section type code of a Medications must be 
      10160-0 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.19), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.19), a Medications Section must contain Medications.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.19
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M272"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M272"/>
   <xsl:template match="@*|node()" priority="-2" mode="M272">
      <xsl:apply-templates select="@*|*" mode="M272"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.1-errorsIHE PCC Reason for Referral Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Reason for Referral Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.1&#34;]" priority="1000"
                 mode="M274">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Reason for Referral Section (1.3.6.1.4.1.19376.1.5.3.1.3.1), the Reason for Referral can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;42349-1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;42349-1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Reason for Referral Section (1.3.6.1.4.1.19376.1.5.3.1.3.1), the section type code of a Reason for 
      Referral must be 42349-1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Reason for Referral Section (1.3.6.1.4.1.19376.1.5.3.1.3.1), the section type code must come from 
      the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M274"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M274"/>
   <xsl:template match="@*|node()" priority="-2" mode="M274">
      <xsl:apply-templates select="@*|*" mode="M274"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.20-errorsIHE PCC Admission Medication History - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Admission Medication History - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.20&#34;]"
                 priority="1000"
                 mode="M276">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.20&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Admission Medication History (1.3.6.1.4.1.19376.1.5.3.1.3.20), the Admission Medication History can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;42346-7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;42346-7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Admission Medication History (1.3.6.1.4.1.19376.1.5.3.1.3.20), the section type code of a Admission 
      Medication History must be 42346-7 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Admission Medication History (1.3.6.1.4.1.19376.1.5.3.1.3.20), the section type code must come from 
      the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Admission Medication History (1.3.6.1.4.1.19376.1.5.3.1.3.20), an Admission Medication History must 
      contain Medications.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.20
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M276"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M276"/>
   <xsl:template match="@*|node()" priority="-2" mode="M276">
      <xsl:apply-templates select="@*|*" mode="M276"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.21-errorsIHE PCC Medications Administered Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Medications Administered Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.21&#34;]"
                 priority="1000"
                 mode="M278">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.21&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medications Administered Section (1.3.6.1.4.1.19376.1.5.3.1.3.21), the Medications Administered can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;18610-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;18610-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medications Administered Section (1.3.6.1.4.1.19376.1.5.3.1.3.21), the section type code of a 
      Medications Administered must be 18610-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Medications Administered Section (1.3.6.1.4.1.19376.1.5.3.1.3.21), the section type code must come from 
      the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Medications Administered Section (1.3.6.1.4.1.19376.1.5.3.1.3.21), a Medications Administered must 
      contain Medications.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.21
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M278"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M278"/>
   <xsl:template match="@*|node()" priority="-2" mode="M278">
      <xsl:apply-templates select="@*|*" mode="M278"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.22-errorsIHE PCC Hospital Discharge Medications Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Hospital Discharge Medications Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.22&#34;]"
                 priority="1000"
                 mode="M280">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.22&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Discharge Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.22), the Hospital Discharge 
      Medications can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10183-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10183-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Discharge Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.22), the section type code 
      of a Hospital Discharge Medications must be 10183-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Discharge Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.22), the section type code 
      must come from the LOINC code  system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Hospital Discharge Medications Section (1.3.6.1.4.1.19376.1.5.3.1.3.22), a Hospital Discharge 
      Medications must contain Medications.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.22
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M280"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M280"/>
   <xsl:template match="@*|node()" priority="-2" mode="M280">
      <xsl:apply-templates select="@*|*" mode="M280"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.23-errorsIHE PCC Immunizations Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Immunizations Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.23&#34;]"
                 priority="1000"
                 mode="M282">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.23&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Immunizations Section (1.3.6.1.4.1.19376.1.5.3.1.3.23), the Immunizations can only be used on 
      sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Immunizations Section (1.3.6.1.4.1.19376.1.5.3.1.3.23), the parent template identifier for 
      Immunizations is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11369-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11369-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Immunizations Section (1.3.6.1.4.1.19376.1.5.3.1.3.23), the section type code of a Immunizations 
      must be 11369-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Immunizations Section (1.3.6.1.4.1.19376.1.5.3.1.3.23), the section type code must come from the 
      LOINC code  system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Immunizations Section (1.3.6.1.4.1.19376.1.5.3.1.3.23), a Immunizations must contain Immunization.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.23
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M282"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M282"/>
   <xsl:template match="@*|node()" priority="-2" mode="M282">
      <xsl:apply-templates select="@*|*" mode="M282"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.24-errorsIHE PCC Physical Exam Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Physical Exam Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.24&#34;]"
                 priority="1000"
                 mode="M284">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.24&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Physical Exam Section (1.3.6.1.4.1.19376.1.5.3.1.3.24), the Physical Exam can only be used on 
      sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;29545-1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;29545-1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Physical Exam Section (1.3.6.1.4.1.19376.1.5.3.1.3.24), the section type code of a Physical 
      Exam must be 29545-1 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Physical Exam Section (1.3.6.1.4.1.19376.1.5.3.1.3.24), the section type code must come from 
      the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M284"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M284"/>
   <xsl:template match="@*|node()" priority="-2" mode="M284">
      <xsl:apply-templates select="@*|*" mode="M284"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.25-errorsIHE PCC Vital Signs Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Vital Signs Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.25&#34;]"
                 priority="1000"
                 mode="M286">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.25&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.3.25), the Vital Signs can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.16&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.16&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.3.25), the parent template identifier for Vital Signs 
     is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;8716-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;8716-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.3.25), the section type code of a Vital Signs must be 8716-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Vital Signs Section (1.3.6.1.4.1.19376.1.5.3.1.3.25), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M286"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M286"/>
   <xsl:template match="@*|node()" priority="-2" mode="M286">
      <xsl:apply-templates select="@*|*" mode="M286"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.27-errorsIHE PCC Results Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Results Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.27&#34;]"
                 priority="1000"
                 mode="M288">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.27&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Results Section (1.3.6.1.4.1.19376.1.5.3.1.3.27), the Results can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;30954-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;30954-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Results Section (1.3.6.1.4.1.19376.1.5.3.1.3.27), the section type code of a Results must be 30954-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Results Section (1.3.6.1.4.1.19376.1.5.3.1.3.27), the section type code must come from the LOINC code  
     system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M288"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M288"/>
   <xsl:template match="@*|node()" priority="-2" mode="M288">
      <xsl:apply-templates select="@*|*" mode="M288"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.28-errorsIHE PCC Coded Results Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Coded Results Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.28&#34;]"
                 priority="1000"
                 mode="M290">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.28&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Results Section (1.3.6.1.4.1.19376.1.5.3.1.3.28), the Coded Results can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;30954-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;30954-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Results Section (1.3.6.1.4.1.19376.1.5.3.1.3.28), the section type code of a Coded Results must be
      30954-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Results Section (1.3.6.1.4.1.19376.1.5.3.1.3.28), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Coded Results Section (1.3.6.1.4.1.19376.1.5.3.1.3.28), the Coded Results Section must contain a(n) 
      Procedure Entry Entry.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.28
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M290"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M290"/>
   <xsl:template match="@*|node()" priority="-2" mode="M290">
      <xsl:apply-templates select="@*|*" mode="M290"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.29-errorsIHE PCC Hospital Studies Summary - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Hospital Studies Summary - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.29&#34;]"
                 priority="1000"
                 mode="M293">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.29&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Studies Summary (1.3.6.1.4.1.19376.1.5.3.1.3.29), the Hospital Studies Summary can only be 
      used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11493-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11493-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Studies Summary (1.3.6.1.4.1.19376.1.5.3.1.3.29), the section type code of a Hospital Studies 
      Summary must be 11493-4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Studies Summary (1.3.6.1.4.1.19376.1.5.3.1.3.29), the section type code must come from the LOINC 
      code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M293"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M293"/>
   <xsl:template match="@*|node()" priority="-2" mode="M293">
      <xsl:apply-templates select="@*|*" mode="M293"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.31-errorsIHE PCC Care Plan Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Care Plan Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.31&#34;]"
                 priority="1000"
                 mode="M295">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.31&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Care Plan Section (1.3.6.1.4.1.19376.1.5.3.1.3.31), the Care Plan can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.10&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.10&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Care Plan Section (1.3.6.1.4.1.19376.1.5.3.1.3.31), the parent template identifier for Care Plan 
      is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;18776-5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;18776-5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Care Plan Section (1.3.6.1.4.1.19376.1.5.3.1.3.31), the section type code of a Care Plan must be 18776-5 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Care Plan Section (1.3.6.1.4.1.19376.1.5.3.1.3.31), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M295"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M295"/>
   <xsl:template match="@*|node()" priority="-2" mode="M295">
      <xsl:apply-templates select="@*|*" mode="M295"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.33-errorsIHE PCC Discharge Diet - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Discharge Diet - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.33&#34;]"
                 priority="1000"
                 mode="M297">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.33&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Discharge Diet (1.3.6.1.4.1.19376.1.5.3.1.3.33), the Discharge Diet can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;42344-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;42344-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Discharge Diet (1.3.6.1.4.1.19376.1.5.3.1.3.33), the section type code of a Discharge Diet must be 
      42344-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Discharge Diet (1.3.6.1.4.1.19376.1.5.3.1.3.33), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M297"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M297"/>
   <xsl:template match="@*|node()" priority="-2" mode="M297">
      <xsl:apply-templates select="@*|*" mode="M297"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.34-errorsIHE PCC Advance Directives Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Advance Directives Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.34&#34;]"
                 priority="1000"
                 mode="M299">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.34&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Advance Directives Section (1.3.6.1.4.1.19376.1.5.3.1.3.34), the Advance Directives can only be used 
      on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Advance Directives Section (1.3.6.1.4.1.19376.1.5.3.1.3.34), the parent template identifier for 
      Advance Directives is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;42348-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;42348-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Advance Directives Section (1.3.6.1.4.1.19376.1.5.3.1.3.34), the section type code of a Advance 
      Directives must be 42348-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Advance Directives Section (1.3.6.1.4.1.19376.1.5.3.1.3.34), the section type code must come from the 
      LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M299"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M299"/>
   <xsl:template match="@*|node()" priority="-2" mode="M299">
      <xsl:apply-templates select="@*|*" mode="M299"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.35-errorsIHE PCC Coded Advance Directives Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Coded Advance Directives Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.35&#34;]"
                 priority="1000"
                 mode="M301">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.35&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Advance Directives Section (1.3.6.1.4.1.19376.1.5.3.1.3.35), the Coded Advance Directives can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.34&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.34&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Advance Directives Section (1.3.6.1.4.1.19376.1.5.3.1.3.35), the parent template identifier 
      for Coded Advance Directives is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;42348-3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;42348-3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Advance Directives Section (1.3.6.1.4.1.19376.1.5.3.1.3.35), the section type code of a Coded 
      Advance Directives must be 42348-3 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Coded Advance Directives Section (1.3.6.1.4.1.19376.1.5.3.1.3.35), the section type code must come 
      from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M301"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M301"/>
   <xsl:template match="@*|node()" priority="-2" mode="M301">
      <xsl:apply-templates select="@*|*" mode="M301"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.3-errorsIHE PCC Hospital Admission Diagnosis Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Hospital Admission Diagnosis Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.3&#34;]" priority="1000"
                 mode="M303">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Admission Diagnosis Section (1.3.6.1.4.1.19376.1.5.3.1.3.3), the Hospital Admission Diagnosis 
      can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;46241-6&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;46241-6&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Admission Diagnosis Section (1.3.6.1.4.1.19376.1.5.3.1.3.3), the section type code of a Hospital 
      Admission Diagnosis must be 46241-6 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Admission Diagnosis Section (1.3.6.1.4.1.19376.1.5.3.1.3.3), the section type code must come from 
      the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: A(n) Hospital Admission Diagnosis must contain Problem Concern Entry.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.3
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M303"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M303"/>
   <xsl:template match="@*|node()" priority="-2" mode="M303">
      <xsl:apply-templates select="@*|*" mode="M303"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.4-errorsIHE PCC History of Present Illness Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC History of Present Illness Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.4&#34;]" priority="1000"
                 mode="M305">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC History of Present Illness Section (1.3.6.1.4.1.19376.1.5.3.1.3.4), the History of Present Illness can 
      only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;10164-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;10164-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC History of Present Illness Section (1.3.6.1.4.1.19376.1.5.3.1.3.4), the section type code of a History 
      of Present Illness must be 10164-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC History of Present Illness Section (1.3.6.1.4.1.19376.1.5.3.1.3.4), the section type code must come from 
      the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M305"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M305"/>
   <xsl:template match="@*|node()" priority="-2" mode="M305">
      <xsl:apply-templates select="@*|*" mode="M305"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.5-errorsIHE PCC Hospital Course Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Hospital Course Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.5&#34;]" priority="1000"
                 mode="M307">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.5&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Course Section (1.3.6.1.4.1.19376.1.5.3.1.3.5), the Hospital Course can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;8648-8&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;8648-8&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Course Section (1.3.6.1.4.1.19376.1.5.3.1.3.5), the section type code of a Hospital Course must be 
      8648-8 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Hospital Course Section (1.3.6.1.4.1.19376.1.5.3.1.3.5), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M307"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M307"/>
   <xsl:template match="@*|node()" priority="-2" mode="M307">
      <xsl:apply-templates select="@*|*" mode="M307"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.6-errorsIHE PCC Active Problems Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Active Problems Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.6&#34;]" priority="1000"
                 mode="M309">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.6&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Active Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.6), the Active Problems can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.11&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.11&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Active Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.6), the parent template identifier 
     (2.16.840.1.113883.10.20.1.11) for Active Problems is not present. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11450-4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11450-4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Active Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.6), the section type code of Active Problems must be 
     11450-4 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     Error: In IHE PCC Active Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.6), the section type code of Active Problems must come 
     from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
     Error: In IHE PCC Active Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.6), Active Problems must contain Problem Concern Entry.
     See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.6
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M309"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M309"/>
   <xsl:template match="@*|node()" priority="-2" mode="M309">
      <xsl:apply-templates select="@*|*" mode="M309"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.7-errorsIHE PCC Discharge Diagnosis - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Discharge Diagnosis - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.7&#34;]" priority="1000"
                 mode="M311">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.7&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Discharge Diagnosis (1.3.6.1.4.1.19376.1.5.3.1.3.7), the Discharge Diagnosis can only be used on sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11535-2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11535-2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Discharge Diagnosis (1.3.6.1.4.1.19376.1.5.3.1.3.7), the section type code of a Discharge Diagnosis must be 
      11535-2 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Discharge Diagnosis (1.3.6.1.4.1.19376.1.5.3.1.3.7), the section type code must come from the LOINC code  
      system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
     
      Error: In IHE PCC Discharge Diagnosis (1.3.6.1.4.1.19376.1.5.3.1.3.7), a Discharge Diagnosis must contain Problem Concern Entry.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.7
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M311"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M311"/>
   <xsl:template match="@*|node()" priority="-2" mode="M311">
      <xsl:apply-templates select="@*|*" mode="M311"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.3.8-errorsIHE PCC Resolved Problems Section - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Resolved Problems Section - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.8&#34;]" priority="1000"
                 mode="M313">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.3.8&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:section"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:section">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Resolved Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.8), the Resolved Problems can only be used on 
      sections. 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;11348-0&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@code = &#34;11348-0&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Resolved Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.8), the section type code of a Resolved Problems 
      must be 11348-0 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      Error: In IHE PCC Resolved Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.8), the section type code of a Ressolved Problems
      must come from the LOINC code system (2.16.840.1.113883.6.1). 
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text> 
      
      Error: In IHE PCC Resolved Problems Section (1.3.6.1.4.1.19376.1.5.3.1.3.8), a Resolved Problems must contain Problem 
      Concern Entry.
      See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.3.8
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M313"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M313"/>
   <xsl:template match="@*|node()" priority="-2" mode="M313">
      <xsl:apply-templates select="@*|*" mode="M313"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.1.1-errorsIHE PCC Problem Status Observation - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Problem Status Observation - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]"
                 priority="1000"
                 mode="M315">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.57&#34;] and                    cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.50&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.57&#34;] and cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.50&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Problem Status Observation (1.3.6.1.4.1.19376.1.5.3.1.4.1.1), CCD templateIds 
       (2.16.840.1.113883.10.20.1.50 and 2.16.840.1.113883.10.20.1.57) for parents of Problem Status Observation shall exist.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;33999-4&#34; and @codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code = &#34;33999-4&#34; and @codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Problem Status Observation (1.3.6.1.4.1.19376.1.5.3.1.4.1.1), the Problem Status Observation is of 
       clinical status, as indicated by the &lt;code&gt; element. This element must be present. The code and codeSystem shall 
       be recorded exactly.  
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.1.1
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Problem Status Observation (1.3.6.1.4.1.19376.1.5.3.1.4.1.1), the &lt;observation&gt; element shall 
       contain a &lt;text&gt; element. For CDA, the &lt;text&gt; elements shall contain a &lt;reference&gt; element pointing 
       to the narrative where the severity is recorded, rather than duplicate text to avoid ambiguity. For HL7 Version 3 
       Messages, the &lt;text&gt; element should contain the full narrative text.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code = &#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code = &#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Problem Status Observation (1.3.6.1.4.1.19376.1.5.3.1.4.1.1), the code attribute of &lt;statusCode&gt; 
       for all Problem Status observations shall be completed. While the &lt;statusCode&gt; element is required in all acts to 
       record the status of the act, the only sensible value of this element in this context is completed.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@xsi:type=&#34;CE&#34; and @codeSystem=&#34;2.16.840.1.113883.6.96&#34;] and             cda:value[@code = &#34;55561003&#34; or               @code = &#34;73425007&#34; or        @code = &#34;90734009&#34; or        @code = &#34;7087005&#34; or        @code = &#34;255227004&#34; or        @code = &#34;415684004&#34; or        @code = &#34;410516002&#34; or        @code = &#34;413322009&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:value[@xsi:type=&#34;CE&#34; and @codeSystem=&#34;2.16.840.1.113883.6.96&#34;] and cda:value[@code = &#34;55561003&#34; or @code = &#34;73425007&#34; or @code = &#34;90734009&#34; or @code = &#34;7087005&#34; or @code = &#34;255227004&#34; or @code = &#34;415684004&#34; or @code = &#34;410516002&#34; or @code = &#34;413322009&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Problem Status Observation (1.3.6.1.4.1.19376.1.5.3.1.4.1.1), the &lt;value&gt; element contains the 
       clinical status. It is always represented using the CE datatype (xsi:type='CE'). It shall contain a code from the set 
       of values from SNOMED CT listed in the profile.  
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.1.1
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M315"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M315"/>
   <xsl:template match="@*|node()" priority="-2" mode="M315">
      <xsl:apply-templates select="@*|*" mode="M315"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.1.2-errorsIHE PCC Health Status - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Health Status - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;]"
                 priority="1000"
                 mode="M317">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.51&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.51&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Health Status (1.3.6.1.4.1.19376.1.5.3.1.4.1.2), the parent templateId (2.16.840.1.113883.10.20.1.51) 
       for Health Status shall be present.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;11323-3&#34; and                            @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;11323-3&#34; and @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Health Status (1.3.6.1.4.1.19376.1.5.3.1.4.1.2), the code element is required. The code and codeSystem 
       attributes shall be recorded exactly as indicated.
       See: http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.1.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Health Status (1.3.6.1.4.1.19376.1.5.3.1.4.1.2), the &lt;observation&gt; element shall contain a 
       &lt;text&gt; element. For CDA, the &lt;text&gt; elements shall contain a &lt;reference&gt; element pointing to the 
       narrative where the severity is recorded, rather than duplicate text to avoid ambiguity. For HL7 Version 3 Messages, 
       the &lt;text&gt; element should contain the full narrative text.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code = &#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code = &#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Health Status (1.3.6.1.4.1.19376.1.5.3.1.4.1.2), the code attribute of &lt;statusCode&gt; for all health 
       status observations shall be completed. While the &lt;statusCode&gt; element is required in all acts to record the status 
       of the act, the only sensible value of this element in this context is completed.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@xsi:type=&#34;CE&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value[@xsi:type=&#34;CE&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Health Status (1.3.6.1.4.1.19376.1.5.3.1.4.1.2), the &lt;value&gt; element contains the clinical status 
       of the Health Status Observation. It is always represented using the CE datatype (xsi:type='CE').
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M317"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M317"/>
   <xsl:template match="@*|node()" priority="-2" mode="M317">
      <xsl:apply-templates select="@*|*" mode="M317"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.12-errorsIHE PCC Immunizations - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Immunizations - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;]"
                 priority="1001"
                 mode="M319">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@negationInd=&#34;true&#34; or @negationInd=&#34;false&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@negationInd=&#34;true&#34; or @negationInd=&#34;false&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), an Immunization Entry may be a record of why a specific 
       immunization was not performed. In this case, negationInd shall be set to true, otherwise, it shall be false.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.24&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.24&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), Immunization shall record its parent CCD template ID
       (2.16.840.1.113883.10.20.1.24).
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), an Immunization shall have an identifier (id).
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code and @codeSystem]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code and @codeSystem]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), this required element records that the act was an
       immunization. The substance administration act must have a &lt;code&gt; element with code and codeSystem attributes present. 
       If no coding system is used by the source, then simply record the code exactly as shown: &lt;code code='IMMUNIZ' 
       codeSystem='2.16.840.1.113883.5.4' codeSystemName='ActCode'/&gt;.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), the statusCode shall be set to "completed" for all 
       Immunizations.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime[@value or @nullFlavor]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:effectiveTime[@value or @nullFlavor]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), the effectiveTime element shall be present and should 
       contain a time value that indicates the date of the substance administration. If the date is unknown, this shall be 
       recorded using the nullFlavor attribute, with the reason that the information is unknown being specified.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:consumable//cda:manufacturedProduct//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:consumable//cda:manufacturedProduct//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), the &lt;consumable&gt; element shall be present, and
       shall contain a &lt;manufacturedProduct&gt; entry conforming to the Product Entry template (1.3.6.1.4.1.19376.1.5.3.1.4.7.2).
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]) or     (cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]//cda:observation/cda:id and      cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]//cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.28&#34;] and      cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;] and      cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]//cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.54&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]) or (cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]//cda:observation/cda:id and cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]//cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.28&#34;] and cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;] and cda:entryRelationship[@inversionInd=&#34;false&#34; and @typeCode=&#34;CAUS&#34;]//cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.54&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>   
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), an entryRelationship should be used to identify adverse 
       reactions caused by the immunization.  In that case, an observation is required, and provides a pointer to the the adverse
       reaction caused by the immunization. An identifier (id) of the observation is required. It shall contain a conforming 
       Problem Entry that also conforms to the CCD Reaction template.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.12
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M319"/>
   </xsl:template>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root='2.16.840.1.113883.10.20.1.46']" priority="1000"
                 mode="M319">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root='2.16.840.1.113883.10.20.1.46']"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(ancestor::*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;]) or                    cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(ancestor::*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.12&#34;]) or cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Immunizations (1.3.6.1.4.1.19376.1.5.3.1.4.12), in the optional entry relationship indicating
       that position of this immunization in a series of immunizations, the &lt;statusCode&gt; element shall be present, 
       and must be recorded as completed.  
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.12
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M319"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M319"/>
   <xsl:template match="@*|node()" priority="-2" mode="M319">
      <xsl:apply-templates select="@*|*" mode="M319"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.13.1-errorsIHE PCC Vital Signs Organizer - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Vital Signs Organizer - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.1&#34;]"
                 priority="1000"
                 mode="M321">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.32&#34;] and                   cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.35&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.32&#34;] and cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.35&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.13.1), the Vital Signs Organizer shall have template IDs
       (2.16.840.1.113883.10.20.1.32 and 2.16.840.1.113883.10.20.1.35) to indicate that it inherits constraints from the ASTM/HL7
       CCD Specification for Vital signs.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.13.1), the Vital Signs Organizer shall have an 
       &lt;id&gt; element.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;46680005&#34; and                             @displayName=&#34;Vital signs&#34; and                            @codeSystem=&#34;2.16.840.1.113883.6.96&#34; and       @codeSystemName=&#34;SNOMED CT&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;46680005&#34; and @displayName=&#34;Vital signs&#34; and @codeSystem=&#34;2.16.840.1.113883.6.96&#34; and @codeSystemName=&#34;SNOMED CT&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.13.1), the &lt;code&gt; element of Vital Signs 
       Organizer shall be recorded as shown to indicate that this organizer captures information about patient vital signs. 
       &lt;code code='46680005' displayName='Vital signs' codeSystem='2.16.840.1.113883.6.96' codeSystemName='SNOMED CT'/&gt;
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.13.1), the Vital Signs Organizer observations shall 
       have all been completed.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.13.1), the effective time element shall be present 
       in Vital Signs Organizer to indicate when the measurement was taken.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:component/cda:observation/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:component/cda:observation/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.13.1), the Vital Signs Organizer shall have one or more 
       &lt;component&gt; elements that are &lt;observation&gt; elements using the Vital Signs Observation template 
       (1.3.6.1.4.1.19376.1.5.3.1.4.13.2).
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M321"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M321"/>
   <xsl:template match="@*|node()" priority="-2" mode="M321">
      <xsl:apply-templates select="@*|*" mode="M321"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.13.2-errorsIHE PCC Vital Signs Observation - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Vital Signs Observation - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.2&#34;]"
                 priority="1000"
                 mode="M323">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;] and            cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.31&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;] and cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.31&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), Vital Signs Observation shall include 
       parent template IDs to indicate that it inherits constraints from the ASTM/HL7 CCD Specification for Vital signs 
       (2.16.840.1.113883.10.20.1.31), and the constraints of this specification (1.3.6.1.4.1.19376.1.5.3.1.4.13).
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem = &#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a Vital Signs Observation shall use a LOINC 
       code.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code = &#34;9279-1&#34; or                             @code = &#34;8867-4&#34; or                            @code = &#34;2710-2&#34; or                            @code = &#34;8480-6&#34; or                            @code = &#34;8462-4&#34; or                            @code = &#34;8310-5&#34; or                            @code = &#34;8302-2&#34; or                            @code = &#34;8306-3&#34; or                            @code = &#34;8287-5&#34; or                            @code = &#34;3141-9&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code = &#34;9279-1&#34; or @code = &#34;8867-4&#34; or @code = &#34;2710-2&#34; or @code = &#34;8480-6&#34; or @code = &#34;8462-4&#34; or @code = &#34;8310-5&#34; or @code = &#34;8302-2&#34; or @code = &#34;8306-3&#34; or @code = &#34;8287-5&#34; or @code = &#34;3141-9&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a Vital Signs Observation shall use a LOINC 
       code from the table in the specification.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@xsi:type=&#34;PQ&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value[@xsi:type=&#34;PQ&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), the &lt;value&gt; element shall be present in Vital Signs 
       Observation, and shall be of the appropriate data type specified
       for measure in the table.  See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;9279-1&#34;]) or cda:value[@unit=&#34;/min&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;9279-1&#34;]) or cda:value[@unit=&#34;/min&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 9279-1 shall use units = "/min".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8867-4&#34;]) or cda:value[@unit=&#34;/min&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8867-4&#34;]) or cda:value[@unit=&#34;/min&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 8867-4 shall use units = "/min".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;2710-2&#34;]) or cda:value[@unit=&#34;%&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;2710-2&#34;]) or cda:value[@unit=&#34;%&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 2710-2 shall use units = "%".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8480-6&#34;]) or cda:value[@unit=&#34;mm[Hg]&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8480-6&#34;]) or cda:value[@unit=&#34;mm[Hg]&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 8480-6 shall use units = "mm[Hg]".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8462-4&#34;]) or cda:value[@unit=&#34;mm[Hg]&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8462-4&#34;]) or cda:value[@unit=&#34;mm[Hg]&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 8462-4 shall use units = "mm[Hg]".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8310-5&#34;]) or cda:value[@unit=&#34;Cel&#34; or @unit=&#34;[degF]&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8310-5&#34;]) or cda:value[@unit=&#34;Cel&#34; or @unit=&#34;[degF]&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 8310-5 shall use units = "Cel" or 
       "[degF]".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8302-2&#34;]) or cda:value[@unit=&#34;m&#34; or        @unit=&#34;cm&#34; or @unit=&#34;[in_us]&#34; or @unit=&#34;[in_uk]&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8302-2&#34;]) or cda:value[@unit=&#34;m&#34; or @unit=&#34;cm&#34; or @unit=&#34;[in_us]&#34; or @unit=&#34;[in_uk]&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 8302-2 shall use units = "m" or "cm" 
       or "[in_us]" or "[in_uk]".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8306-3&#34;]) or cda:value[@unit=&#34;m&#34; or        @unit=&#34;cm&#34; or @unit=&#34;[in_us]&#34; or @unit=&#34;[in_uk]&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8306-3&#34;]) or cda:value[@unit=&#34;m&#34; or @unit=&#34;cm&#34; or @unit=&#34;[in_us]&#34; or @unit=&#34;[in_uk]&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 8306-3 shall use units = "m" or "cm" 
       or "[in_us]" or "[in_uk]".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8287-5&#34;]) or cda:value[@unit=&#34;m&#34; or        @unit=&#34;cm&#34; or @unit=&#34;[in_us]&#34; or @unit=&#34;[in_uk]&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8287-5&#34;]) or cda:value[@unit=&#34;m&#34; or @unit=&#34;cm&#34; or @unit=&#34;[in_us]&#34; or @unit=&#34;[in_uk]&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 8287-5 shall use units = "m" or "cm" 
       or "[in_us]" or "[in_uk]".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;3141-9&#34;]) or cda:value[@unit=&#34;kg&#34; or        @unit=&#34;g&#34; or @unit=&#34;[lb_av]&#34; or @unit=&#34;[oz_av]&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;3141-9&#34;]) or cda:value[@unit=&#34;kg&#34; or @unit=&#34;g&#34; or @unit=&#34;[lb_av]&#34; or @unit=&#34;[oz_av]&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Vital Signs Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.2), a code of 3141-9 shall use units = "kg" or "g" 
       or "[lb_av]" or "[oz_av]".
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M323"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M323"/>
   <xsl:template match="@*|node()" priority="-2" mode="M323">
      <xsl:apply-templates select="@*|*" mode="M323"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.13.3-errorsIHE PCC Family History Observation - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Family History Observation - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.3&#34;]"
                 priority="1000"
                 mode="M325">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;] and                    cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.22&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;] and cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.22&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Family History Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.3), Family History Observations is a 
       Simple Observation and inherits constraints from CCD.  It must include two addition template IDs: 
       1.3.6.1.4.1.19376.1.5.3.1.4.13 and 2.16.840.1.113883.10.20.1.22.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.3
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M325"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M325"/>
   <xsl:template match="@*|node()" priority="-2" mode="M325">
      <xsl:apply-templates select="@*|*" mode="M325"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.13.5-errorsIHE PCC Pregnancy Observation - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Pregnancy Observation - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.5&#34;]"
                 priority="1000"
                 mode="M327">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.5&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the parent template Id 
       (1.3.6.1.4.1.19376.1.5.3.1.4.13) of Pregnancy Observation shall exist.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@codeSystem=&#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), a Pregnancy Observation shall have a LOINC 
       code describing what facet of patient's pregnancy history is being recorded.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11449-6&#34;]) or                    (cda:code[@code=&#34;11449-6&#34;] and                    cda:value[@xsi:type=&#34;CE&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11449-6&#34;]) or (cda:code[@code=&#34;11449-6&#34;] and cda:value[@xsi:type=&#34;CE&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11449-6 shall be recorded using a CE datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8678-5&#34;]) or                   (cda:code[@code=&#34;8678-5&#34;] and                    cda:value[@xsi:type=&#34;CE&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8678-5&#34;]) or (cda:code[@code=&#34;8678-5&#34;] and cda:value[@xsi:type=&#34;CE&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 8678-5 shall be recorded using a CE datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;8665-2&#34;]) or                   (cda:code[@code=&#34;8665-2&#34;] and                    cda:value[@xsi:type=&#34;TS&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;8665-2&#34;]) or (cda:code[@code=&#34;8665-2&#34;] and cda:value[@xsi:type=&#34;TS&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 8665-2 shall be recorded using a TS datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11636-8&#34;]) or                   (cda:code[@code=&#34;11636-8&#34;] and                    (cda:value[@xsi:type=&#34;QTY&#34;] or                     cda:value[@xsi:type=&#34;INT&#34;] or                     cda:value[@xsi:type=&#34;MO&#34;] or                     cda:value[@xsi:type=&#34;TS&#34;] or                     cda:value[@xsi:type=&#34;REAL&#34;] or                     cda:value[@xsi:type=&#34;PQ&#34;] or                     cda:value[@xsi:type=&#34;RTO&#34;]))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11636-8&#34;]) or (cda:code[@code=&#34;11636-8&#34;] and (cda:value[@xsi:type=&#34;QTY&#34;] or cda:value[@xsi:type=&#34;INT&#34;] or cda:value[@xsi:type=&#34;MO&#34;] or cda:value[@xsi:type=&#34;TS&#34;] or cda:value[@xsi:type=&#34;REAL&#34;] or cda:value[@xsi:type=&#34;PQ&#34;] or cda:value[@xsi:type=&#34;RTO&#34;]))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11636-8 shall be recorded using a QTY datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11637-6&#34;]) or                   (cda:code[@code=&#34;11637-6&#34;] and                    (cda:value[@xsi:type=&#34;QTY&#34;] or                     cda:value[@xsi:type=&#34;INT&#34;] or                     cda:value[@xsi:type=&#34;MO&#34;] or                     cda:value[@xsi:type=&#34;TS&#34;] or                     cda:value[@xsi:type=&#34;REAL&#34;] or                     cda:value[@xsi:type=&#34;PQ&#34;] or                     cda:value[@xsi:type=&#34;RTO&#34;]))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11637-6&#34;]) or (cda:code[@code=&#34;11637-6&#34;] and (cda:value[@xsi:type=&#34;QTY&#34;] or cda:value[@xsi:type=&#34;INT&#34;] or cda:value[@xsi:type=&#34;MO&#34;] or cda:value[@xsi:type=&#34;TS&#34;] or cda:value[@xsi:type=&#34;REAL&#34;] or cda:value[@xsi:type=&#34;PQ&#34;] or cda:value[@xsi:type=&#34;RTO&#34;]))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11637-6 shall be recorded using a QTY datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11638-4&#34;]) or                   (cda:code[@code=&#34;11638-4&#34;] and                    (cda:value[@xsi:type=&#34;QTY&#34;] or                     cda:value[@xsi:type=&#34;INT&#34;] or                     cda:value[@xsi:type=&#34;MO&#34;] or                     cda:value[@xsi:type=&#34;TS&#34;] or                     cda:value[@xsi:type=&#34;REAL&#34;] or                     cda:value[@xsi:type=&#34;PQ&#34;] or                     cda:value[@xsi:type=&#34;RTO&#34;]))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11638-4&#34;]) or (cda:code[@code=&#34;11638-4&#34;] and (cda:value[@xsi:type=&#34;QTY&#34;] or cda:value[@xsi:type=&#34;INT&#34;] or cda:value[@xsi:type=&#34;MO&#34;] or cda:value[@xsi:type=&#34;TS&#34;] or cda:value[@xsi:type=&#34;REAL&#34;] or cda:value[@xsi:type=&#34;PQ&#34;] or cda:value[@xsi:type=&#34;RTO&#34;]))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11638-4 shall be recorded using a QTY datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11639-2&#34;]) or                   (cda:code[@code=&#34;11639-2&#34;] and                    (cda:value[@xsi:type=&#34;QTY&#34;] or                     cda:value[@xsi:type=&#34;INT&#34;] or                     cda:value[@xsi:type=&#34;MO&#34;] or                     cda:value[@xsi:type=&#34;TS&#34;] or                     cda:value[@xsi:type=&#34;REAL&#34;] or                     cda:value[@xsi:type=&#34;PQ&#34;] or                     cda:value[@xsi:type=&#34;RTO&#34;]))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11639-2&#34;]) or (cda:code[@code=&#34;11639-2&#34;] and (cda:value[@xsi:type=&#34;QTY&#34;] or cda:value[@xsi:type=&#34;INT&#34;] or cda:value[@xsi:type=&#34;MO&#34;] or cda:value[@xsi:type=&#34;TS&#34;] or cda:value[@xsi:type=&#34;REAL&#34;] or cda:value[@xsi:type=&#34;PQ&#34;] or cda:value[@xsi:type=&#34;RTO&#34;]))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11639-2 shall be recorded using a QTY datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11640-0&#34;]) or                   (cda:code[@code=&#34;11640-0&#34;] and                    (cda:value[@xsi:type=&#34;QTY&#34;] or                     cda:value[@xsi:type=&#34;INT&#34;] or                     cda:value[@xsi:type=&#34;MO&#34;] or                     cda:value[@xsi:type=&#34;TS&#34;] or                     cda:value[@xsi:type=&#34;REAL&#34;] or                     cda:value[@xsi:type=&#34;PQ&#34;] or                     cda:value[@xsi:type=&#34;RTO&#34;]))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11640-0&#34;]) or (cda:code[@code=&#34;11640-0&#34;] and (cda:value[@xsi:type=&#34;QTY&#34;] or cda:value[@xsi:type=&#34;INT&#34;] or cda:value[@xsi:type=&#34;MO&#34;] or cda:value[@xsi:type=&#34;TS&#34;] or cda:value[@xsi:type=&#34;REAL&#34;] or cda:value[@xsi:type=&#34;PQ&#34;] or cda:value[@xsi:type=&#34;RTO&#34;]))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11640-0 shall be recorded using a QTY datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11778-8&#34;]) or                   (cda:code[@code=&#34;11778-8&#34;] and                    cda:value[@xsi:type=&#34;TS&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11778-8&#34;]) or (cda:code[@code=&#34;11778-8&#34;] and cda:value[@xsi:type=&#34;TS&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11778-8 shall be recorded using a TS datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11779-6&#34;]) or                   (cda:code[@code=&#34;11779-6&#34;] and                    cda:value[@xsi:type=&#34;TS&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11779-6&#34;]) or (cda:code[@code=&#34;11779-6&#34;] and cda:value[@xsi:type=&#34;TS&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11779-6 shall be recorded using a TS datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11780-4&#34;]) or                   (cda:code[@code=&#34;11780-4&#34;] and                    cda:value[@xsi:type=&#34;TS&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11780-4&#34;]) or (cda:code[@code=&#34;11780-4&#34;] and cda:value[@xsi:type=&#34;TS&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11780-4 shall be recorded using a TS datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11884-4&#34;]) or                   (cda:code[@code=&#34;11884-4&#34;] and                    cda:value[@xsi:type=&#34;PQ&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11884-4&#34;]) or (cda:code[@code=&#34;11884-4&#34;] and cda:value[@xsi:type=&#34;PQ&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11884-4 shall be recorded using a PQ datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11885-1&#34;]) or                   (cda:code[@code=&#34;11885-1&#34;] and                    cda:value[@xsi:type=&#34;PQ&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11885-1&#34;]) or (cda:code[@code=&#34;11885-1&#34;] and cda:value[@xsi:type=&#34;PQ&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11885-1 shall be recorded using a PQ datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11886-9&#34;]) or                   (cda:code[@code=&#34;11886-9&#34;] and                    cda:value[@xsi:type=&#34;PQ&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11886-9&#34;]) or (cda:code[@code=&#34;11886-9&#34;] and cda:value[@xsi:type=&#34;PQ&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11886-9 shall be recorded using a PQ datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:code[@code=&#34;11887-7&#34;]) or                   (cda:code[@code=&#34;11887-7&#34;] and                    cda:value[@xsi:type=&#34;PQ&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:code[@code=&#34;11887-7&#34;]) or (cda:code[@code=&#34;11887-7&#34;] and cda:value[@xsi:type=&#34;PQ&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Pregnancy Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.5), the Pregnancy Observation with a LOINC code 
       of 11887-7 shall be recorded using a PQ datatype.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M327"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M327"/>
   <xsl:template match="@*|node()" priority="-2" mode="M327">
      <xsl:apply-templates select="@*|*" mode="M327"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.13.7-errorsIHE PCC Advance Directive Observation - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Advance Directive Observation - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.7&#34;]"
                 priority="1000"
                 mode="M329">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.7&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:repeatNumber) and not(cda:interpretationCode) and                   not(cda:methodCode) and not(cda:targetSiteCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:repeatNumber) and not(cda:interpretationCode) and not(cda:methodCode) and not(cda:targetSiteCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Advance Directive Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.7), an Advance Directive Observation 
       shall not contain any repeatNumber, interpretationCode, methodCode or targetSiteCode elements.
       See: http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.7
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;] and                   cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.17&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;] and cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.17&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Advance Directive Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13.7), the templateId elements shown 
       in the specification shall be present, and indicate that this is an Advance Directive entry.
       See: http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.13.7
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M329"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M329"/>
   <xsl:template match="@*|node()" priority="-2" mode="M329">
      <xsl:apply-templates select="@*|*" mode="M329"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.13-errorsIHE PCC Simple Observation - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Simple Observation - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"
                 priority="1000"
                 mode="M331">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13), each Simple Observation shall have an 
       &lt;id&gt; identifier.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13), Simple Observations shall have a code 
       describing what was measured.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13), each observation measurement entry may 
       contain a text element providing the free text that provides the same information as the observation within the 
       narrative portion of the document with a text element. For CDA based uses of Simple Observations, this element 
       SHALL be present, and SHALL contain a reference element that points to the related string in the narrative portion 
       of the document.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code = &#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code = &#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13), the status code of all Simple Observations 
       shall be completed.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime[@value or @nullFlavor]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:effectiveTime[@value or @nullFlavor]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13), the &lt;effectiveTime&gt; element shall be 
       present in Simple Observations, and shall record the date and time when the measurement was taken. This element 
       should be precise to the day. If the date and time is unknown, this element should record that using the nullFlavor
       attribute.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Simple Observation (1.3.6.1.4.1.19376.1.5.3.1.4.13), the value of the Simple Observation shall be 
       recorded using a data type appropriate to the observation.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M331"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M331"/>
   <xsl:template match="@*|node()" priority="-2" mode="M331">
      <xsl:apply-templates select="@*|*" mode="M331"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.14-errorsIHE PCC Encounters - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Encounters - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.14&#34;]"
                 priority="1000"
                 mode="M334">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.14&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@classCode=&#34;ENC&#34;"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="@classCode=&#34;ENC&#34;">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounters (1.3.6.1.4.1.19376.1.5.3.1.4.14), the classCode shall be ENC.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(@moodCode=&#34;EVN&#34;) or cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.21&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(@moodCode=&#34;EVN&#34;) or cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.21&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounters (1.3.6.1.4.1.19376.1.5.3.1.4.14), the templateId indicates that this encounter entry 
       conforms to the constraints of this content module. 
       NOTE: When the encounter is in event mood (moodCode='EVN'), this entry conforms to the CCD template 
       2.16.840.1.113883.10.20.1.21, and when in other moods, this entry conforms to the CCD template 
       2.16.840.1.113883.10.20.1.25.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="@moodCode=&#34;EVN&#34; or cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.25&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="@moodCode=&#34;EVN&#34; or cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.25&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounters (1.3.6.1.4.1.19376.1.5.3.1.4.14), the templateId indicates that this encounter entry 
       conforms to the constraints of this content module. 
       NOTE: When the encounter is in event mood (moodCode='EVN'), this entry conforms to the CCD template 
       2.16.840.1.113883.10.20.1.21, and when in other moods, this entry conforms to the CCD template 
       2.16.840.1.113883.10.20.1.25.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounters (1.3.6.1.4.1.19376.1.5.3.1.4.14), the id element is required.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounters (1.3.6.1.4.1.19376.1.5.3.1.4.14), code is a required element.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounters (1.3.6.1.4.1.19376.1.5.3.1.4.14), the text element shall contain a reference to
       the narrative text describing the encounter.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant[@typeCode=&#34;LOC&#34;]) or                    cda:participant[@typeCode=&#34;LOC&#34;]/cda:participantRole[@classCode=&#34;SDLOC&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant[@typeCode=&#34;LOC&#34;]) or cda:participant[@typeCode=&#34;LOC&#34;]/cda:participantRole[@classCode=&#34;SDLOC&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounters (1.3.6.1.4.1.19376.1.5.3.1.4.14), a participant with typeCode LOC may be present to 
       provide information about the location where the encounter is to be or was performed. This element shall have a 
       participantRole element with classCode='SDLOC' that describes the service delivery location.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:particpant[@typeCode=&#34;LOC&#34;]) or                   cda:participant[@typeCode=&#34;LOC&#34;]/cda:participantRole/cda:playingEntity/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:particpant[@typeCode=&#34;LOC&#34;]) or cda:participant[@typeCode=&#34;LOC&#34;]/cda:participantRole/cda:playingEntity/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Encounters (1.3.6.1.4.1.19376.1.5.3.1.4.14), in a participant with typeCode LOC there shall be
       a playingEntity with a name.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M334"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M334"/>
   <xsl:template match="@*|node()" priority="-2" mode="M334">
      <xsl:apply-templates select="@*|*" mode="M334"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.15-errorsIHE PCC Family History Organizer - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Family History Organizer - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.15&#34;]"
                 priority="1000"
                 mode="M337">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.15&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.23&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.23&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Family History Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.15), the template ID of its CCD parent
       shall be present (2.16.840.1.113883.10.20.1.23).
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:subject/cda:relatedSubject[@classCode=&#34;PRS&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:subject/cda:relatedSubject[@classCode=&#34;PRS&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Family History Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.15), the subject element shall be present 
       and relates the subject of the observations to the patient. It shall contain a relatedSubject element that is a 
       personal relation of the patient (classCode='PRS').
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:subject/cda:relatedSubject[@classCode=&#34;PRS&#34;]/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.5.111&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:subject/cda:relatedSubject[@classCode=&#34;PRS&#34;]/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.5.111&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Family History Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.15), the code element of relatedSubject 
       shall be present, and give the relationship of the subject to the patient. The code attribute shall be present, 
       and shall contain a value from the HL7 FamilyMember vocabulary. The codeSystem attribute shall be present and shall 
       use the value: 2.16.840.1.113883.5.111.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant) or cda:participant/cda:participantRole[@classCode=&#34;PRS&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant) or cda:participant/cda:participantRole[@classCode=&#34;PRS&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Family History Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.15), a participant shall contain a 
       participantRole element showing the relationship of the subject to other family members (classCode='PRS').
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant) or                    cda:participant/cda:participantRole[@classCode=&#34;PRS&#34;]/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.5.111&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant) or cda:participant/cda:participantRole[@classCode=&#34;PRS&#34;]/cda:code[@code and @codeSystem=&#34;2.16.840.1.113883.5.111&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Family History Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.15), a participant's code element shall be 
       present, and gives the relationship of the participant to the subject. The code attribute shall be present, and shall 
       contain a value from the HL7 FamilyMember vocabulary. The codeSystem attribute shall be present and shall use the 
       value "2.16.840.1.113883.5.111". 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant) or                   cda:participant/cda:participantRole[@classCode=&#34;PRS&#34;]/cda:playingEntity[@classCode=&#34;PSN&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant) or cda:participant/cda:participantRole[@classCode=&#34;PRS&#34;]/cda:playingEntity[@classCode=&#34;PSN&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Family History Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.15), a participant's playingEntity element 
       identifies the related person. It shall be recorded as shown: &lt;playingEntity classCode='PSN'&gt;.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.15
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test=".//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.3&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test=".//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.13.3&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Family History Organizer (1.3.6.1.4.1.19376.1.5.3.1.4.15), the Family History Organizer shall 
       contain one or more components. These components must conform the Family History Observation template.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.15
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M337"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M337"/>
   <xsl:template match="@*|node()" priority="-2" mode="M337">
      <xsl:apply-templates select="@*|*" mode="M337"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.16-errorsIHE PCC v3.0 Update Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC v3.0 Update Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.16&#34;]"
                 priority="1000"
                 mode="M339">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.16&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:reference[@typeCode=&#34;RPLC&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:reference[@typeCode=&#34;RPLC&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In Update Entry, reference element shall be present
       with typeCode RPLC.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:reference/cda:externalAct[@classCode=&#34;ACT&#34; and @moodCode=&#34;EVN&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:reference/cda:externalAct[@classCode=&#34;ACT&#34; and @moodCode=&#34;EVN&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In Update Entry, &lt;externalAct classCode='ACT'
       moodCode='EVN'&gt; must appear as shown.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.16
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M339"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M339"/>
   <xsl:template match="@*|node()" priority="-2" mode="M339">
      <xsl:apply-templates select="@*|*" mode="M339"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.17-errorsIHE PCC Coverage Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Coverage Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.17&#34;]"
                 priority="1000"
                 mode="M341">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.17&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:act[@moodCode=&#34;DEF&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:act[@moodCode=&#34;DEF&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Coverage Entry (1.3.6.1.4.1.19376.1.5.3.1.4.17), coverage shall be recorded in an act that groups all 
       patient coverage together, and defines (moodCode='DEF') the payers.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.20&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.20&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Coverage Entry (1.3.6.1.4.1.19376.1.5.3.1.4.17), the act conforms to CCD: 3.1.2.1.1 as well as
       this specification. This shall be reflected by including the templateId elements shown at 
       http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.17
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Coverage Entry (1.3.6.1.4.1.19376.1.5.3.1.4.17), the statusCode shall be recorded exactly as shown:
       &lt;statusCode code='completed'/&gt;
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.17
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:entryRelationship//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.18&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:entryRelationship//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.18&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Coverage Entry (1.3.6.1.4.1.19376.1.5.3.1.4.17), the coverage act shall have one or more entryRelationship
       elements. These elements define the coverage. The entry relationship must contain Payer Entries.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.17
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:sequenceNumber) or cda:sequenceNumber[@value]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:sequenceNumber) or cda:sequenceNumber[@value]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Coverage Entry (1.3.6.1.4.1.19376.1.5.3.1.4.17), the sequenceNumber element may be present. If 
       present, it shall contain a value attribute that indicates the priority of the payment source.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M341"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M341"/>
   <xsl:template match="@*|node()" priority="-2" mode="M341">
      <xsl:apply-templates select="@*|*" mode="M341"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.18-errorsIHE PCC Payer Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Payer Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.18&#34;]"
                 priority="1000"
                 mode="M343">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.18&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.26&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.26&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the act conforms to CCD: 3.1.2.1.2 and this guide. 
       This shall be reflected by including the templateId elements shown at 
       http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.18
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id/@extension"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id/@extension">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the act shall contain at least one id element that 
       represents the policy or group number of the coverage.  That identifier shall appear in the extension attribute.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:statusCode">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the statusCode element shall be present, and should be 
       recorded exactly as shown: &lt;statusCode code='completed'/&gt;
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:performer"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:performer">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the performer element shall be present to represent the 
       payer of the coverage.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:performer//cda:code[(@code = &#34;PAYOR&#34; or        @code = &#34;GUAR&#34; or       @code = &#34;PAT&#34;) and                                          @codeSystem = &#34;2.16.840.1.113883.5.110&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:performer//cda:code[(@code = &#34;PAYOR&#34; or @code = &#34;GUAR&#34; or @code = &#34;PAT&#34;) and @codeSystem = &#34;2.16.840.1.113883.5.110&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the code element of performer describes the role of the 
       payer. It shall contain one of these values: PAYOR (used to indicate that the payer is a payor for a policy or program), 
       GUAR (used to indicate that the payer is a guarantor for the patient) or PAT (used to indicate that the payer is the 
       patient).
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.18
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:performer//cda:addr"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:performer//cda:addr">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the addr element shall be used to record the address of 
       the payer.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.18
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:performer//cda:telecom"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:performer//cda:telecom">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the telecom element shall be used to record the phone 
       number of the payer.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.18
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:performer//cda:representedOrganization/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:performer//cda:representedOrganization/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the name of the payer organization shall be provided 
       in the name element contained within the representedOrganization element.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.18
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant/cda:participantRole) or                        cda:participant/cda:participantRole/cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant/cda:participantRole) or cda:participant/cda:participantRole/cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Payer Entry (1.3.6.1.4.1.19376.1.5.3.1.4.18), the &lt;code&gt; element for the patient's policy or 
       program shall indicate the covered parties relationship to the subscriber.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.18
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M343"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M343"/>
   <xsl:template match="@*|node()" priority="-2" mode="M343">
      <xsl:apply-templates select="@*|*" mode="M343"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.19-errorsIHE PCC Procedure Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Procedure Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]"
                 priority="1000"
                 mode="M345">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.19&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:procedure[@classCode=&#34;PROC&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:procedure[@classCode=&#34;PROC&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Procedure Entry (1.3.6.1.4.1.19376.1.5.3.1.4.19), the classCode for Procedure Entry shall be "PROC" 
       and the element is procedure.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(./@moodCode=&#34;EVN&#34;) or                   cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.29&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(./@moodCode=&#34;EVN&#34;) or cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.29&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Procedure Entry (1.3.6.1.4.1.19376.1.5.3.1.4.19), when the Procedure Entry is in event mood 
       (moodCode='EVN'), this entry conforms to the CCD template 2.16.840.1.113883.10.20.1.29.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(./@moodCode=&#34;INT&#34;) or            cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.25&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(./@moodCode=&#34;INT&#34;) or cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.25&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Procedure Entry (1.3.6.1.4.1.19376.1.5.3.1.4.19), when the Procedure Entry is in intent mood 
       (moodCode='INT'), this entry conforms to the CCD template 2.16.840.1.113883.10.20.1.25.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Procedure Entry (1.3.6.1.4.1.19376.1.5.3.1.4.19), a Procedure Entry shall contain an id element.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Procedure Entry (1.3.6.1.4.1.19376.1.5.3.1.4.19), a Procedure Entry shall contain a code element.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Procedure Entry (1.3.6.1.4.1.19376.1.5.3.1.4.19), a Procedure Entry text element shall contain a 
       reference to the narrative text describing the procedure.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code = &#34;completed&#34; or                                  @code = &#34;active&#34; or                                  @code = &#34;aborted&#34; or                                  @code = &#34;cancelled&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code = &#34;completed&#34; or @code = &#34;active&#34; or @code = &#34;aborted&#34; or @code = &#34;cancelled&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Procedure Entry (1.3.6.1.4.1.19376.1.5.3.1.4.19), the &lt;statusCode&gt; element shall be present 
       when used to describe a Procedure Event. It shall have the value 'completed' for procedures that have been completed, 
       and 'active' for procedures that are still in progress. Procedures that were stopped prior to completion shall use the 
       value 'aborted', and procedures that were cancelled before being started shall use the value 'cancelled'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(./@moodCode=&#34;INT&#34;) or                    (cda:effectiveTime or cda:priorityCode)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(./@moodCode=&#34;INT&#34;) or (cda:effectiveTime or cda:priorityCode)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Procedure Entry (1.3.6.1.4.1.19376.1.5.3.1.4.19), in Procedure Entry the priorityCode element shall 
       be present in INT mood when effectiveTime is not provided, it may be present in other moods. It indicates the priority 
       of the procedure.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M345"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M345"/>
   <xsl:template match="@*|node()" priority="-2" mode="M345">
      <xsl:apply-templates select="@*|*" mode="M345"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.1-errorsIHE PCC Severity - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Severity - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]" priority="1000"
                 mode="M348">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.55&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.55&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Severity (1.3.6.1.4.1.19376.1.5.3.1.4.1), the templateId for CCD Severity (2.16.840.1.113883.10.20.1.55) 
       must be present.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;SEV&#34; and                             @codeSystem=&#34;2.16.840.1.113883.5.4&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;SEV&#34; and @codeSystem=&#34;2.16.840.1.113883.5.4&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Severity (1.3.6.1.4.1.19376.1.5.3.1.4.1), the observation is of Severity, as indicated by the code
       element. This element is required. The code and codeSystem attributes shall be recorded exactly as indicated.
       See: http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.1
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Severity (1.3.6.1.4.1.19376.1.5.3.1.4.1), the &lt;observation&gt; element shall contain a 
       &lt;text&gt; element. For CDA, the &lt;text&gt; elements shall contain a &lt;reference&gt; element pointing
       to the narrative where the severity is recorded, rather than duplicate text to avoid ambiguity. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code = &#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code = &#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Severity (1.3.6.1.4.1.19376.1.5.3.1.4.1), the code attribute of &lt;statusCode&gt; for all Severity 
       observations shall be completed. While the &lt;statusCode&gt; element is required in all acts to record the status of 
       the act, the only sensible value of this element in this context is completed.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@xsi:type=&#34;CD&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value[@xsi:type=&#34;CD&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Severity (1.3.6.1.4.1.19376.1.5.3.1.4.1), the &gt;value&lt; element contains the level of severity.
       It is always represented using the CD datatype (xsi:type='CD'), even though the value may be a coded or uncoded
       string.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M348"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M348"/>
   <xsl:template match="@*|node()" priority="-2" mode="M348">
      <xsl:apply-templates select="@*|*" mode="M348"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.2-errorsIHE PCC Comments - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Comments - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;]" priority="1000"
                 mode="M350">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.40&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.40&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Comments (1.3.6.1.4.1.19376.1.5.3.1.4.2), the parent CCD templateId (2.16.840.1.113883.10.20.1.40) for
       Comments must be included.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;48767-8&#34; and                            @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;48767-8&#34; and @codeSystem=&#34;2.16.840.1.113883.6.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Comments (1.3.6.1.4.1.19376.1.5.3.1.4.2), the code element for Comments is required. The code and 
       codeSystem attributes shall be recorded exactly as indicated. 
       See: http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Comments (1.3.6.1.4.1.19376.1.5.3.1.4.2), the &lt;observation&gt; element shall contain a &lt;text&gt;
       element. For CDA, the &lt;text&gt; elements shall contain a &lt;reference&gt;
       element pointing to the narrative where the severity is recorded, rather than duplicate
       text to avoid ambiguity.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code = &#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code = &#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Comments (1.3.6.1.4.1.19376.1.5.3.1.4.2), the code attribute of &lt;statusCode&gt; for all Comments
       shall be completed. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:author) or (                   cda:author/cda:time and     cda:author/cda:assignedAuthor/cda:id and     cda:author/cda:assignedAuthor/cda:addr and     cda:author/cda:assignedAuthor/cda:telecom and (     cda:author/cda:assignedAuthor/cda:assignedPerson/cda:name or     cda:author/cda:assignedAuthor/cda:representedOrganization/cda:name))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:author) or ( cda:author/cda:time and cda:author/cda:assignedAuthor/cda:id and cda:author/cda:assignedAuthor/cda:addr and cda:author/cda:assignedAuthor/cda:telecom and ( cda:author/cda:assignedAuthor/cda:assignedPerson/cda:name or cda:author/cda:assignedAuthor/cda:representedOrganization/cda:name))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Comments (1.3.6.1.4.1.19376.1.5.3.1.4.2), the Comment may have an author. The time of the comment 
       creation shall be recorded in the &lt;time&gt; element when the &lt;author&gt; element is present. The identifier of 
       the author, and their address and telephone number must be present inside the &lt;id&gt;, &lt;addr&gt; and 
       &lt;telecom&gt; elements when the &lt;author&gt; element is present. The author's and/or the organization's name must 
       be present when the &lt;author&gt; element is present.   
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M350"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M350"/>
   <xsl:template match="@*|node()" priority="-2" mode="M350">
      <xsl:apply-templates select="@*|*" mode="M350"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.3.1-errorsIHE PCC Medication Fulfillment Instructions - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Medication Fulfillment Instructions - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&#34;]"
                 priority="1000"
                 mode="M352">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.43&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.43&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Medication Fulfillment Instructions (1.3.6.1.4.1.19376.1.5.3.1.4.3.1), the parent CCD template ID 
       (2.16.840.1.113883.10.20.1.43) for Medication Fulfillment Instructions shall exist.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;FINSTRUCT&#34; and                            @codeSystem=&#34;1.3.6.1.4.1.19376.1.5.3.2&#34; and       @codeSystemName=&#34;IHEActCode&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;FINSTRUCT&#34; and @codeSystem=&#34;1.3.6.1.4.1.19376.1.5.3.2&#34; and @codeSystemName=&#34;IHEActCode&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Medication Fulfillment Instructions (1.3.6.1.4.1.19376.1.5.3.1.4.3.1), the code for Medication 
       Fulfillment Instructions shall be recorded exactly as specified: &lt;code code='FINSTRUCT' 
       codeSystem='1.3.6.1.4.1.19376.1.5.3.2' codeSystemName='IHEActCode' /&gt;.  
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.3.1
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: The &lt;text&gt; element of Medication Fulfillment
       Instructions contains a free text representation of the
       instruction. For CDA this SHALL contain a provides a &lt;reference&gt; element
       to the link text of the comment in the narrative portion of the
       document. The comment itself is not the act being coded, so it appears
       in the &lt;text&gt; of the &lt;observation&gt;, not as part of the &lt;code&gt;. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Medication Fulfillment Instructions (1.3.6.1.4.1.19376.1.5.3.1.4.3.1), the code attribute of 
       &lt;statusCode&gt; for all Medication Fulfillment Instriction comments must be completed.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M352"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M352"/>
   <xsl:template match="@*|node()" priority="-2" mode="M352">
      <xsl:apply-templates select="@*|*" mode="M352"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.3-errorsIHE PCC Patient Medication Instructions - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Patient Medication Instructions - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3&#34;]" priority="1000"
                 mode="M354">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.49&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.49&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Patient Medication Instructions (1.3.6.1.4.1.19376.1.5.3.1.4.3), the parent CCD template ID 
       (2.16.840.1.113883.10.20.1.49) of Patient Medication Instructions shall be present.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code=&#34;PINSTRUCT&#34; and                            @codeSystem=&#34;1.3.6.1.4.1.19376.1.5.3.2&#34; and                            @codeSystemName=&#34;IHEActCode&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code=&#34;PINSTRUCT&#34; and @codeSystem=&#34;1.3.6.1.4.1.19376.1.5.3.2&#34; and @codeSystemName=&#34;IHEActCode&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Patient Medication Instructions (1.3.6.1.4.1.19376.1.5.3.1.4.3), the code for Patient Medication 
       Instructions shall be recorded exactly as specified: &lt;code code='PINSTRUCT' codeSystem='1.3.6.1.4.1.19376.1.5.3.2'
       codeSystemName='IHEActCode' /&gt;.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.3
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:text/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:text/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: The &lt;text&gt; element indicates the text of the comment in Patient Medication Instructions. For CDA, this 
       SHALL be represented as a &lt;reference&gt; element that points at the narrative portion of the document. The comment
       itself is not the act being coded, so it appears in the &lt;text&gt; of the &lt;observation&gt;, not as part of the
       &lt;code&gt;. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Patient Medication Instructions (1.3.6.1.4.1.19376.1.5.3.1.4.3), the code attribute of &lt;statusCode&gt; 
       for all comments in Patient Medication Instructions must be completed.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M354"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M354"/>
   <xsl:template match="@*|node()" priority="-2" mode="M354">
      <xsl:apply-templates select="@*|*" mode="M354"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.4.1-errorsIHE PCC Internal References - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Internal References - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.4.1&#34;]"
                 priority="1000"
                 mode="M356">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.4.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:act"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="self::cda:act">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Internal References (1.3.6.1.4.1.19376.1.5.3.1.4.4.1), for compatibility with the Clinical Statement 
       model the Internal Reference shall always use the &lt;act&gt; class
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id[@root and @extension]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id[@root and @extension]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Internal References (1.3.6.1.4.1.19376.1.5.3.1.4.4.1), the id element shall be present in Internal 
       Reference. The root and extension attributes shall identify an element defined elsewhere in the same document.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Internal References (1.3.6.1.4.1.19376.1.5.3.1.4.4.1), the code element of Internal Reference shall be 
       present. 
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M356"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M356"/>
   <xsl:template match="@*|node()" priority="-2" mode="M356">
      <xsl:apply-templates select="@*|*" mode="M356"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.4-errorsIHE PCC External References - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC External References - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.4&#34;]" priority="1000"
                 mode="M358">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.4&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:act[@classCode=&#34;ACT&#34; and @moodCode=&#34;EVN&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:act[@classCode=&#34;ACT&#34; and @moodCode=&#34;EVN&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC External References (1.3.6.1.4.1.19376.1.5.3.1.4.4), the External Reference is an act that refers to
       documentation of an act (classCode='ACT'), that previously occurred (moodCode='EVN').
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC External References (1.3.6.1.4.1.19376.1.5.3.1.4.4), the reference is an act of itself, and must be 
       uniquely identified with an id element.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M358"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M358"/>
   <xsl:template match="@*|node()" priority="-2" mode="M358">
      <xsl:apply-templates select="@*|*" mode="M358"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.5.1-errorsIHE PCC Concern Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Concern Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.1&#34;]"
                 priority="1000"
                 mode="M360">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.1&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:act"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="../cda:act">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
           Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), the Concern Entry can only be used on acts.
        </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:act[@classCode=&#34;ACT&#34;] and                       ../cda:act[@moodCode=&#34;EVN&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="../cda:act[@classCode=&#34;ACT&#34;] and ../cda:act[@moodCode=&#34;EVN&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	   Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), all concerns reflect the act of recording 
           (&lt;act classCode='ACT'&gt;) the event (moodCode='EVN') of being concerned about a problem, allergy or other 
           issue about the patient condition.
	</svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.27&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.27&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	   Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), the required template identifiers indicates 
           this Concern Entry conforms to the Concern Content module. This content module inherits constraints from the HL7 
           CCD Template for problem acts, and so also includes that template identifier (2.16.840.1.113883.10.20.1.27).
	</svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	   Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), the Concern Entry requires id element.
	</svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@nullFlavor=&#34;NA&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:code[@nullFlavor=&#34;NA&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	   Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), the code is not applicable to a concern act 
           (Concern Entry), and so shall be recorded as &lt;code nullFlavor='NA'/&gt;.
	</svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;active&#34; or                                       @code=&#34;suspended&#34; or                                      @code=&#34;aborted&#34; or                                      @code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;active&#34; or @code=&#34;suspended&#34; or @code=&#34;aborted&#34; or @code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	   Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), the statusCode associated with any concern must 
           be one of the following values: active, suspended, aborted or completed.
	</svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:low"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:effectiveTime/cda:low">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	   Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), the &lt;effectiveTime&gt; element records the 
           starting and ending times during which the concern (Concern Entry) was active. The &lt;low&gt; element shall be 
           present.
	</svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:statusCode[@code=&#34;completed&#34; or @code=&#34;aborted&#34;] and cda:effectiveTime/cda:high) or                       (cda:statusCode[@code=&#34;active&#34; or @code=&#34;suspended&#34;] and not(cda:effectiveTime/cda:high))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:statusCode[@code=&#34;completed&#34; or @code=&#34;aborted&#34;] and cda:effectiveTime/cda:high) or (cda:statusCode[@code=&#34;active&#34; or @code=&#34;suspended&#34;] and not(cda:effectiveTime/cda:high))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
           Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), the &lt;effectiveTime&gt; element records the 
           starting and ending times during the concern (Concern Entry).  The &lt;high&gt; element shall be present for concerns 
           in the completed or aborted state, and shall not be present otherwise.
        </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:entryRelationship[@typeCode=&#34;SUBJ&#34;] and cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34; or @root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;]) or       (cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;false&#34;] and cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34; or @root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;]) "/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:entryRelationship[@typeCode=&#34;SUBJ&#34;] and cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34; or @root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;]) or (cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;false&#34;] and cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34; or @root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	   Error: In IHE PCC Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.1), each concern (Concern Entry) is about one or more 
           related problems or allergies. This entry shall contain one or more problem or allergy entries that conform to the 
           specification in section Problem Entry or Allergies and Intolerances. This is how a series of related observations
           can be grouped as a single concern.  For CDA this SHALL be represented with the &lt;entryRelationship&gt; element. 
           For HL7 Version 3 Messages, this SHALL be represented as a &lt;sourceOf&gt; element. The typeCode SHALL be SUBJ for 
           both HL7 Version 3 and CDA. HL7 Version 3 additionally requires that inversionInd SHALL be false. 
	</svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M360"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M360"/>
   <xsl:template match="@*|node()" priority="-2" mode="M360">
      <xsl:apply-templates select="@*|*" mode="M360"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.5.2-errorsIHE PCC Problem Concern Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Problem Concern Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]"
                 priority="1000"
                 mode="M362">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Problem Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.2), the Problem Concern Entry has a template 
       identifier of 1.3.6.1.4.1.19376.1.5.3.1.4.5.2, and is a subtype of the Concern Entry, and so must also conform to 
       that specification, with the template identifier of 1.3.6.1.4.1.19376.1.5.3.1.4.5.1. These elements are required and 
       shall be recorded exactly as indicated.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.5.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:entryRelationship[@typeCode = &#34;SUBJ&#34;] and                  cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;] and                  cda:entryRelationship[@inversionInd=&#34;false&#34;]) or                  (cda:subjectOf[@typeCode = &#34;SUBJ&#34;] and                  cda:subjectOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;] and                  cda:subjectOf[@inversionInd=&#34;false&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:entryRelationship[@typeCode = &#34;SUBJ&#34;] and cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;] and cda:entryRelationship[@inversionInd=&#34;false&#34;]) or (cda:subjectOf[@typeCode = &#34;SUBJ&#34;] and cda:subjectOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;] and cda:subjectOf[@inversionInd=&#34;false&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
      Error: In IHE PCC Problem Concern Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5.2), the Problem Concern Entry shall contain one 
      or more problem entries that conform to the Problem Entry template 1.3.6.1.4.1.19376.1.5.3.1.4.5. For CDA this SHALL be 
      represented with the &lt;entryRelationship&gt; element. For HL7 Version 3 Messages, this SHALL be represented as a 
      &lt;subjectOf&gt; element. The typeCode SHALL be ‘ SUBJ and inversionInd SHALL be false.
   </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M362"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M362"/>
   <xsl:template match="@*|node()" priority="-2" mode="M362">
      <xsl:apply-templates select="@*|*" mode="M362"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.5.3-errorsIHE PCC Allergy and Intolerance Concern - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Allergy and Intolerance Concern - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.3&#34;]"
                 priority="1000"
                 mode="M364">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root = &#34;2.16.840.1.113883.10.20.1.27&#34;] and            cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root = &#34;2.16.840.1.113883.10.20.1.27&#34;] and cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.5.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Allergy and Intolerance Concern: 1.3.6.1.4.1.19376.1.5.3.1.4.5.3), the parent CCD template ID 
       (2.16.840.1.113883.10.20.1.27) and the parent PCC template ID (1.3.6.1.4.1.19376.1.5.3.1.4.5.1) shall be present 
       in the Allergy and Intolerance Concern.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;false&#34;]//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;]) or                   (cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;false&#34;]//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;false&#34;]//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;]) or (cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;false&#34;]//cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>

       Error: In IHE PCC Allergy and Intolerance Concern: 1.3.6.1.4.1.19376.1.5.3.1.4.5.3), this Allergy and Intolerance 
       Concern shall contain one or more allergy or intolerance entries that conform to the Allergy and Intolerance Entry. 
       For CDA this SHALL be represented with the &lt;entryRelationship&gt; element. For HL7 Version 3 Messages, this SHALL 
       be represented as a &lt;sourceOf&gt; element. The typeCode SHALL be 'SUBJ' and inversionInd SHALL be 'false'.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M364"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M364"/>
   <xsl:template match="@*|node()" priority="-2" mode="M364">
      <xsl:apply-templates select="@*|*" mode="M364"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.5-errorsIHE PCC Problem Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Problem Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;]" priority="1000"
                 mode="M366">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="self::cda:observation[@classCode=&#34;OBS&#34; and @moodCode=&#34;EVN&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="self::cda:observation[@classCode=&#34;OBS&#34; and @moodCode=&#34;EVN&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), the basic pattern for reporting a problem uses 
          the CDA &lt;observation&gt; element, setting the classCode='OBS' to represent that this is an observation of a 
          problem, and the moodCode='EVN', to represent that this is an observation that has in fact taken place.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.28&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.28&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), &lt;templateId&gt; elements identify this under 
          both IHE and CCD specifications (2.16.840.1.113883.10.20.1.28).  This CCD template ID SHALL be included.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	  Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), the specific Problem Entry observation being 
          recorded must have an identifier (&lt;id&gt;) that shall be provided for tracking purposes. If the source EMR
          does not or cannot supply an intrinsic identifier, then a GUID shall be provided as the root, with no extension
          (e.g., &lt;id root='CE1215CD-69EC-4C7B-805F-569233C5E159'/&gt;).
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code=&#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code=&#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
	  Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), a clinical document normally records only 
          those condition observation events that have been completed, not observations that are in any other state. 
          Therefore, the &lt;statusCode&gt; shall always have code='completed' for Problem Entry.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--REPORT -->
<xsl:if test="cda:effectiveTime/cda:width or cda:effectiveTime/cda:center">
         <svrl:successful-report xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                 test="cda:effectiveTime/cda:width or cda:effectiveTime/cda:center">
            <xsl:attribute name="location">
               <xsl:apply-templates select="." mode="schematron-select-full-path"/>
            </xsl:attribute>
            <svrl:text>
	  Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), while CDA allows for multiple mechanisms to record 
          this time interval (e.g. by low and high values, low and width, high and width, or center point and width), we are
          constraining Medical summaries (Problem Entry) to use only the low/high form.
       </svrl:text>
         </svrl:successful-report>
      </xsl:if>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:effectiveTime/cda:low[@value or @nullFlavor = &#34;UNK&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:effectiveTime/cda:low[@value or @nullFlavor = &#34;UNK&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), the effectiveTime &lt;low&gt; value should normally 
          be present in Problem Entry. There are exceptions, such as for the case where the patient may be able to report that
          they had chicken pox, but are unsure when. In this case, the &lt;effectiveTime&gt; element shall have a &lt;low&gt;
          element with a nullFlavor attribute set to 'UNK'.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:value[@xsi:type=&#34;CD&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:value[@xsi:type=&#34;CD&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), the &lt;value&gt; is the condition that was found. 
          This element is required.  While the value of Problem Entry code may be a coded or an un-coded string, the type is 
          always a coded value (xsi:type='CD').
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:value[@code and @codeSystem]) or                      (not(cda:value[@code]) and not(cda:value[@codeSystem]))"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:value[@code and @codeSystem]) or (not(cda:value[@code]) and not(cda:value[@codeSystem]))">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), if Problem Entry value is coded, the code and 
          codeSystem attributes shall be present.  If uncoded, all attributes other than xsi:type='CD' must be absent.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] |                       cda:subjectOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]) &lt;= 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] | cda:subjectOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]) &lt;= 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>  
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), only one optional severity entry relationship is 
          allowed.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]) or             (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] and              cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]) or (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] and cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), an optional &lt;entryRelationship&gt; element may 
          be present in Problem Entry indicating the severity of the problem. When present, this &lt;entryRelationship&gt; 
          element shall contain a severity observation conforming to the Severity entry template (1.3.6.1.4.1.19376.1.5.3.1.4.1). 
          The typeCode SHALL be SUBJ and inversionInd SHALL be true. For CDA this SHALL be represented with the 
          &lt;entryRelationship&gt; element. 
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:subjectOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]) or             (cda:subjectOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] and              cda:subjectOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:subjectOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]) or (cda:subjectOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] and cda:subjectOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), an optional &lt;entryRelationship&gt; element may be 
          present in Problem Entry indicating the severity of the problem. When present, this &lt;entryRelationship&gt; element
          shall contain a severity observation conforming to the Severity entry template (1.3.6.1.4.1.19376.1.5.3.1.4.1).  The
          typeCode SHALL be SUBJ and inversionInd SHALL be true. For HL7 Version 3 Messages, this SHALL be represented as a 
          &lt;subjectOf&gt; element.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] |                cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]) &lt;= 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] | cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]) &lt;= 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), only one optional Problem Status Observation 
          relationship is allowed.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]) or        (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] and                cda:entryRelationship[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]) or (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] and cda:entryRelationship[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), an optional &lt;entryRelationship&gt; element may 
          be present in Problem Entry indicating the clinical status of the problem, e.g., resolved, in remission, active. 
          When present, this &lt;entryRelationship&gt; element shall contain a clinical status observation conforming to the 
          Problem Status Observation template (1.3.6.1.4.1.19376.1.5.3.1.4.1.1).  The typeCode SHALL be REFR and inversionInd
          SHALL be false. For CDA this SHALL be represented with the &lt;entryRelationship&gt; element.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]) or               (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] and                cda:sourceOf[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]) or (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] and cda:sourceOf[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), an optional &lt;entryRelationship&gt; element may 
          be present in Problem Entry indicating the clinical status of the problem, e.g., resolved, in remission, active. 
          When present, this &lt;entryRelationship&gt; element shall contain a clinical status observation conforming to the 
          Problem Status Observation template (1.3.6.1.4.1.19376.1.5.3.1.4.1.1).  The typeCode SHALL be REFR and inversionInd
          SHALL be false. For HL7 Version 3 Messages, this SHALL be represented as a &lt;sourceOf&gt; element.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;] |      cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;]) &lt;= 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;] | cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;]) &lt;= 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), only one optional Health Status Observation 
          relationship is allowed.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;]) or               (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;] and                cda:entryRelationship[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;]) or (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;] and cda:entryRelationship[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), an optional &lt;entryRelationship&gt; may be 
          present in Problem Entry referencing the health status of the patient, e.g., resolved, in remission, active. 
          When present, this &lt;entryRelationship&gt; element shall contain a clinical status observation conforming 
          to the Health Status Observation template (1.3.6.1.4.1.19376.1.5.3.1.4.1.2). The typeCode SHALL be REFR and
          inversionInd SHALL be false. For CDA this SHALL be represented with the &lt;entryRelationship&gt; element.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;]) or               (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;] and                cda:sourceOf[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;]) or (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.2&#34;] and cda:sourceOf[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), an optional &lt;entryRelationship&gt; may be 
          present in Problem Entry referencing the health status of the patient, e.g., resolved, in remission, active. 
          When present, this &lt;entryRelationship&gt; element shall contain a clinical status observation conforming to 
          the Health Status Observation template (1.3.6.1.4.1.19376.1.5.3.1.4.1.2). The typeCode SHALL be REFR and 
          inversionInd SHALL be false.  For HL7 Version 3 Messages, this SHALL be represented as a &lt;sourceOf&gt; element. 
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;]) or                (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;] and                 cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;]) or (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;] and cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), one or more optional &lt;entryRelationship&gt; 
          elements may be present providing an additional comments (annotations) for the condition. When present, this 
          &lt;entryRelationship&gt; element shall contain a comment observation conforming to the Comment entry template 
          (1.3.6.1.4.1.19376.1.5.3.1.4.2). The typeCode SHALL be SUBJ and inversionInd SHALL be true. For CDA this SHALL
          be represented with the &lt;entryRelationship&gt; element.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;])           or                (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;] and                 cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;]) or (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;] and cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Problem Entry (1.3.6.1.4.1.19376.1.5.3.1.4.5), one or more optional &lt;entryRelationship&gt; 
          elements may be present providing an additional comments (annotations) for the condition. When present, this 
          &lt;entryRelationship&gt; element shall contain a comment observation conforming to the Comment entry template 
          (1.3.6.1.4.1.19376.1.5.3.1.4.2). The typeCode SHALL be SUBJ and inversionInd SHALL be true.  For HL7 Version 3
          Messages, this SHALL be represented as a &lt;sourceOf&gt; element.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M366"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M366"/>
   <xsl:template match="@*|node()" priority="-2" mode="M366">
      <xsl:apply-templates select="@*|*" mode="M366"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.6-errorsIHE PCC Allergies and Intolerances - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Allergies and Intolerances - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;]" priority="1000"
                 mode="M368">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.6&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="../cda:observation[@classCode=&#34;OBS&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="../cda:observation[@classCode=&#34;OBS&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), allergies and intolerances are special 
          kinds of problems, and so are also recorded in the CDA &lt;observation&gt; element, with classCode='OBS'.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), this Allergies and Intolerances entry 
          has a template identifier of 1.3.6.1.4.1.19376.1.5.3.1.4.6, and is a subtype of the 1.3.6.1.4.1.19376.1.5.3.1.4.5 
          Problem Entry, and so must also conform to the rules of the problem entry, which has the template identifier of 
          1.3.6.1.4.1.19376.1.5.3.1.4.5. These elements are required.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:code[@code and @codeSystem]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:code[@code and @codeSystem]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), the &lt;code&gt; element of Allergies 
          and Intolerances represents the kind of allergy observation made, to a drug, food or environmental agent, and whether 
          it is an allergy, non-allergy intolerance, or unknown class of intolerance (not known to be allergy or intolerance). 
          The &lt;code&gt; element of an allergy entry shall be provided, and a code and codeSystem attribute shall be present.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(cda:value[@xsi:type=&#34;CD&#34;]) and                       (cda:value[@code and @codeSystem] or cda:value[not(@code) and not(@codeSystem)])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(cda:value[@xsi:type=&#34;CD&#34;]) and (cda:value[@code and @codeSystem] or cda:value[not(@code) and not(@codeSystem)])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), the &lt;value&gt; is a description of 
          the allergy or adverse reaction. While the value may be a coded or an uncoded string, the type is always a coded 
          value (xsi:type='CD'). If coded, the code and codeSystem attributes must be present. The codingSystem should 
          reference a controlled vocabulary describing allergies and adverse reactions. If uncoded, all attributes other than 
          xsi:type='CD' must be absent. 
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:participant[@typeCode=&#34;CSM&#34;]/cda:participantRole[@classCode=&#34;MANU&#34;]/cda:playingEntity[@classCode=&#34;MMAT&#34;])                  or cda:participant[@typeCode=&#34;CSM&#34;]/cda:participantRole[@classCode=&#34;MANU&#34;]/cda:playingEntity[@classCode=&#34;MMAT&#34;]/cda:code/cda:originalText/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:participant[@typeCode=&#34;CSM&#34;]/cda:participantRole[@classCode=&#34;MANU&#34;]/cda:playingEntity[@classCode=&#34;MMAT&#34;]) or cda:participant[@typeCode=&#34;CSM&#34;]/cda:participantRole[@classCode=&#34;MANU&#34;]/cda:playingEntity[@classCode=&#34;MMAT&#34;]/cda:code/cda:originalText/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), the &lt;code&gt; element shall be 
          present. It may contain a code and codeSystem attribute to indicate the code for the substance causing the allergy 
          or intolerance. It shall contain a &lt;reference&gt; to the &lt;originalText&gt; in the narrative where the substance 
          is named.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;]) or              (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;] and               cda:entryRelationship/*/cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.54&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;]) or (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.5&#34;] and cda:entryRelationship/*/cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.54&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>

          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), the entry contained with this 
          Allergies and Intolerance entry relationship is some sort of problem that is a manifestation of the allergy. 
          It is recorded using the Problem Entry structure (template identifier 1.3.6.1.4.1.19376.1.5.3.1.4.5), with the 
          additional template identifier (2.16.840.1.113883.10.20.1.54) indicating that this problem is a reaction.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]) and               not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;])) or               (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] and                cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;]) or              (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] and         cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;]) and not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;])) or (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] and cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;]) or (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1&#34;] and cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), an optional &lt;entryRelationship&gt; 
          element may be present indicating the severity of the problem. When present, this &lt;entryRelationship&gt; element
          shall contain a severity observation conforming to the Severity entry template (1.3.6.1.4.1.19376.1.5.3.1.4.1). For 
          CDA this SHALL be represented with the &lt;entryRelationship&gt; element. For HL7 Version 3 Messages, this SHALL be
          represented as a &lt;sourceOf&gt; element. The typeCode SHALL be 'SUBJ' and inversionInd SHALL be 'true'.
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]) and               not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;])) or              (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] and               cda:entryRelationship[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;]) or              (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] and               cda:sourceOf[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;]) and not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;])) or (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] and cda:entryRelationship[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;]) or (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.1.1&#34;] and cda:sourceOf[@typeCode=&#34;REFR&#34; and @inversionInd=&#34;false&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), an optional &lt;entryRelationship&gt; 
          may be present indicating the clinical status of the allergy, e.g., resolved, in remission, active. When present, 
          this &lt;entryRelationship&gt; element shall contain a clinical status observation conforming to the Problem Status 
          Observation template (1.3.6.1.4.1.19376.1.5.3.1.4.1.1). The typeCode SHALL be 'REFR' and inversionInd SHALL be 
          'false'. For CDA this SHALL be represented with the &lt;entryRelationship&gt; element. For HL7 Version 3 Messages, 
          this SHALL be represented as a &lt;sourceOf&gt; element.  
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="(not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;]) and               not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;])) or              (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;] and               cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;]) or              (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;] and               cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="(not(cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;]) and not(cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;])) or (cda:entryRelationship/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;] and cda:entryRelationship[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;]) or (cda:sourceOf/*/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.2&#34;] and cda:sourceOf[@typeCode=&#34;SUBJ&#34; and @inversionInd=&#34;true&#34;])">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
          Error: In IHE PCC Allergies and Intolerances (1.3.6.1.4.1.19376.1.5.3.1.4.6), one or more optional 
          &lt;entryRelationship&gt; elements may be present providing an additional comments (annotations) for the allergy. 
          When present, this &lt;entryRelationship&gt; element shall contain an entry conforming to the Comment entry template
          (1.3.6.1.4.1.19376.1.5.3.1.4.2). The typeCode SHALL be SUBJ and inversionInd SHALL be true.  For CDA this SHALL be 
          represented with the &lt;entryRelationship&gt; element. For HL7 Version 3 Messages, this SHALL be represented as a
          &lt;sourceOf&gt; element. 
       </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M368"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M368"/>
   <xsl:template match="@*|node()" priority="-2" mode="M368">
      <xsl:apply-templates select="@*|*" mode="M368"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.7.1-errorsIHE PCC Normal Dosing - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Normal Dosing - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.1&#34;]"
                 priority="1000"
                 mode="M370">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.1&#34;]"/>

		    <!--REPORT -->
<xsl:if test="//cda:substanceAdministation">
         <svrl:successful-report xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="//cda:substanceAdministation">
            <xsl:attribute name="location">
               <xsl:apply-templates select="." mode="schematron-select-full-path"/>
            </xsl:attribute>
            <svrl:text>
       Error: In IHE PCC Normal Dosing: 1.3.6.1.4.1.19376.1.5.3.1.4.7.1), medications that use this template identifier shall
       not use subordinate &lt;substanceAdministation&gt; acts.
    </svrl:text>
         </svrl:successful-report>
      </xsl:if>
      <xsl:apply-templates select="@*|*" mode="M370"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M370"/>
   <xsl:template match="@*|node()" priority="-2" mode="M370">
      <xsl:apply-templates select="@*|*" mode="M370"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.7.2-errorsIHE PCC Product Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Product Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;]"
                 priority="1000"
                 mode="M372">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.53&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.53&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Product Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.2), the template ID for CCD parent
       (2.16.840.1.113883.10.20.1.53) is required.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:manufacturedMaterial/cda:code/cda:originalText/cda:reference"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:manufacturedMaterial/cda:code/cda:originalText/cda:reference">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Product Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.2), the name and strength of the medication are 
       specified in the elements under the &lt;manufacturedMaterial&gt; element.  The &lt;originalText&gt; shall contain 
       a &lt;reference&gt; whose URI value points to the generic name and strength of the medication, or just the generic 
       name alone if strength is not relevant.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.7.2
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M372"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M372"/>
   <xsl:template match="@*|node()" priority="-2" mode="M372">
      <xsl:apply-templates select="@*|*" mode="M372"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.7.3-errorsIHE PCC Supply Entry - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Supply Entry - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.3&#34;]"
                 priority="1000"
                 mode="M374">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.3&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="./@classCode=&#34;SPLY&#34; and (./@moodCode=&#34;INT&#34; or ./@moodCode=&#34;EVN&#34;)"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="./@classCode=&#34;SPLY&#34; and (./@moodCode=&#34;INT&#34; or ./@moodCode=&#34;EVN&#34;)">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), the moodCode attribute shall be INT to reflect 
       that a medication has been prescribed, or EVN to indicate that the prescription has been filled.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.34&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root=&#34;2.16.840.1.113883.10.20.1.34&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), the parent CCD template ID 
       (2.16.840.1.113883.10.20.1.34) shall be present.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), each supply entry shall have an identifier to 
       uniquely identify the supply entry.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:quantity) or cda:quantity[@value]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:quantity) or cda:quantity[@value]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), the value attribute of quantity shall be present 
       if quantity exists.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:author) or cda:author/cda:time[@value or @nullFlavor=&#34;UNK&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:author) or cda:author/cda:time[@value or @nullFlavor=&#34;UNK&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), the &lt;time&gt; element must be present if 
       author exists to indicate when the author created the prescription.  If this information is unknown, it shall be 
       recorded by setting the nullFlavor attribute to UNK.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:author) or cda:author/cda:assignedAuthor"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:author) or cda:author/cda:assignedAuthor">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), the &lt;assignedAuthor&gt; element shall be 
       present if an author exists in Supply Entry, and identifies the author.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:author) or cda:author/cda:assignedAuthor/cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:author) or cda:author/cda:assignedAuthor/cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), an identifier element shall be present for an 
       assigned author if an author exists in Supply Entry.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:author) or                   cda:author/cda:assignedAuthor/cda:assignedPerson/cda:name or                   cda:author/cda:assignedAuthor/cda:representedOrganization/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:author) or cda:author/cda:assignedAuthor/cda:assignedPerson/cda:name or cda:author/cda:assignedAuthor/cda:representedOrganization/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), an &lt;assignedPerson&gt;/&lt;name&gt; and/or 
       &lt;representedOriganization&gt;/&lt;name&gt; element shall be present if an author exists in Supply Entry. This 
       element shall identify the prescriber or their organization.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:performer) or                   not(./@moodCode=&#34;INT&#34;) or                   cda:performer/cda:time[@value or @nullFlavor=&#34;UNK&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:performer) or not(./@moodCode=&#34;INT&#34;) or cda:performer/cda:time[@value or @nullFlavor=&#34;UNK&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), the &lt;time&gt; element shall be present if 
       there is a performer in Supply Entry to indicate when the prescription was filled (moodCode='EVN'). If this 
       information is unknown, it shall be recorded by setting the nullFlavor attribute to UNK.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:performer) or     cda:performer/cda:assignedEntity"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:performer) or cda:performer/cda:assignedEntity">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), the &lt;assignedEntity&gt; element shall be 
       present in a Supply Entry that contains a performer, and identifies the filler of the prescription.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:performer) or            cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name or                   cda:performer/cda:assignedEntity/cda:representedOrganization/cda:name"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:performer) or cda:performer/cda:assignedEntity/cda:assignedPerson/cda:name or cda:performer/cda:assignedEntity/cda:representedOrganization/cda:name">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), an assignedPerson/name and/or 
       representedOriganization/name element shall be present under the assignedEntity if a performer exists.
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]) or                   cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:act[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]) or cda:entryRelationship[@typeCode=&#34;SUBJ&#34;]/cda:act[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.3.1&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
       Error: In IHE PCC Supply Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.3), an entry relationship may be present to provide 
       the fulfillment instructions. When present, this entry relationship shall contain a Medication Fulfillment 
       Instructions entry.
       See http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.3.1
    </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M374"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M374"/>
   <xsl:template match="@*|node()" priority="-2" mode="M374">
      <xsl:apply-templates select="@*|*" mode="M374"/>
   </xsl:template>

   <!--PATTERN p-1.3.6.1.4.1.19376.1.5.3.1.4.7-errorsIHE PCC Medications - errors validation phase-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">IHE PCC Medications - errors validation phase</svrl:text>

	  <!--RULE -->
<xsl:template match="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]" priority="1000"
                 mode="M377">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="*[cda:templateId/@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7&#34;]"/>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:templateId[@root = &#34;2.16.840.1.113883.10.20.1.24&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:templateId[@root = &#34;2.16.840.1.113883.10.20.1.24&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
        Error: In IHE PCC Medications (1.3.6.1.4.1.19376.1.5.3.1.4.7), all Medications entries use the templateId element 
        specified (2.16.840.1.113883.10.20.1.24) to indicate that they are medication acts. This element is required.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="count(cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.1&#34;] |                            cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.8&#34;] |                           cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.9&#34;] |                           cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.10&#34;] |                           cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.11&#34;])  = 1"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="count(cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.1&#34;] | cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.8&#34;] | cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.9&#34;] | cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.10&#34;] | cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.11&#34;]) = 1">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Medications (1.3.6.1.4.1.19376.1.5.3.1.4.7), the &lt;templateId&gt; element identifies this 
         Medications &lt;entry&gt; as a particular type of medication event, allowing for validation of the content. 
         As a side effect, readers of the CDA can quickly locate and identify medication events. The templateId must
         use one of the values in the table on: http://wiki.ihe.net/index.php?title=1.3.6.1.4.1.19376.1.5.3.1.4.7
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="not(cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.1&#34;]) or                      count(.//cda:substanceAdministration) = 0"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="not(cda:templateId[@root = &#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.1&#34;]) or count(.//cda:substanceAdministration) = 0">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Medications (1.3.6.1.4.1.19376.1.5.3.1.4.7), template ID 1.3.6.1.4.1.19376.1.5.3.1.4.7.1 indicates a
         "normal" &lt;substanceAdministration&gt; act that may not contain any subordinate 
         &lt;substanceAdministration&gt; acts.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:id"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl" test="cda:id">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Medications (1.3.6.1.4.1.19376.1.5.3.1.4.7), a top level &lt;substanceAdministration&gt; element 
         must be uniquely identified in Medications. If there is no explicit identifier for this observation in the source 
         EMR system, a GUID may be used for the root attribute, and the extension may be omitted. 
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:statusCode[@code = &#34;completed&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:statusCode[@code = &#34;completed&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Medications (1.3.6.1.4.1.19376.1.5.3.1.4.7), the status of all Medications 
         &lt;substanceAdministration&gt; elements must be "completed". The act has either occurred, or the request or order 
         has been placed.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>

		    <!--ASSERT -->
<xsl:choose>
         <xsl:when test="cda:consumable/cda:manufacturedProduct/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;]"/>
         <xsl:otherwise>
            <svrl:failed-assert xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                test="cda:consumable/cda:manufacturedProduct/cda:templateId[@root=&#34;1.3.6.1.4.1.19376.1.5.3.1.4.7.2&#34;]">
               <xsl:attribute name="location">
                  <xsl:apply-templates select="." mode="schematron-select-full-path"/>
               </xsl:attribute>
               <svrl:text>
         Error: In IHE PCC Medications (1.3.6.1.4.1.19376.1.5.3.1.4.7), the &lt;consumable&gt; element shall be present, and 
         shall contain a &lt;manufacturedProduct&gt; entry conforming to the Product Entry (1.3.6.1.4.1.19376.1.5.3.1.4.7.2) 
         template.
      </svrl:text>
            </svrl:failed-assert>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:apply-templates select="@*|*" mode="M377"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M377"/>
   <xsl:template match="@*|node()" priority="-2" mode="M377">
      <xsl:apply-templates select="@*|*" mode="M377"/>
   </xsl:template>
</xsl:stylesheet>